(function(){this.$image_url=function(t){return t.match(/^((https?:)?\/\/|\/)/)||(t="/images/"+t),t}}).call(this),this.JSON||(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)i=rep[n],"string"==typeof i&&(r=str(i,u),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in u)Object.hasOwnProperty.call(u,i)&&(r=str(i,u),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var $r={};$r.__data={api_v0_analytics_hits:["api",["v0","analytics","hits"]],api_v0:["api",["v0","analytics","targeted",":action"]],record_invalid_extension_api_v0_attachments:["api",["v0","attachments","record_invalid_extension"]],parsed_attributes_api_v0_attachment:["api",["v0","attachments",":id","parsed_attributes"]],api_v0_attachments:["api",["v0","attachments"]],api_v0_attachment:["api",["v0","attachments",":id"]],api_v0_work_authorship:["api",["v0","works",":work_id","authorship"]],api_v0_work_attachments:["api",["v0","works",":work_id","attachments"]],new_api_v0_work_attachment:["api",["v0","works",":work_id","attachments","new"]],edit_api_v0_work_attachment:["api",["v0","works",":work_id","attachments",":id","edit"]],api_v0_work_attachment:["api",["v0","works",":work_id","attachments",":id"]],api_v0_work_urls:["api",["v0","works",":work_id","urls"]],api_v0_work_url:["api",["v0","works",":work_id","urls",":id"]],api_v0_works_views:["api",["v0","works","views"]],set_order_api_v0_works:["api",["v0","works","set_order"]],unstar_api_v0_work_stars:["api",["v0","works",":work_id","stars","unstar"]],api_v0_work_stars:["api",["v0","works",":work_id","stars"]],allowed_api_v0_work_requests:["api",["v0","works",":work_id","requests","allowed"]],api_v0_work_requests:["api",["v0","works",":work_id","requests"]],validate_url_api_v0_works:["api",["v0","works","validate_url"]],html_api_v0_work:["api",["v0","works",":id","html"]],api_v0_works:["api",["v0","works"]],new_api_v0_work:["api",["v0","works","new"]],edit_api_v0_work:["api",["v0","works",":id","edit"]],api_v0_work:["api",["v0","works",":id"]],validate_api_v0_sections:["api",["v0","sections","validate"]],set_order_api_v0_sections:["api",["v0","sections","set_order"]],api_v0_section:["api",["v0","sections",":id"]],api_v0_user_details:["api",["v0","users",":user_id","details"]],api_v0_user_followers:["api",["v0","users",":user_id","followers"]],api_v0_user_following_index:["api",["v0","users",":user_id","following"]],allowed_api_v0_user_requests:["api",["v0","users",":user_id","requests","allowed"]],api_v0_user_requests:["api",["v0","users",":user_id","requests"]],api_v0_user_social_profiles:["api",["v0","users",":user_id","social_profiles"]],new_api_v0_user_social_profile:["api",["v0","users",":user_id","social_profiles","new"]],edit_api_v0_user_social_profile:["api",["v0","users",":user_id","social_profiles",":id","edit"]],api_v0_user_social_profile:["api",["v0","users",":user_id","social_profiles",":id"]],api_v0_user_stats:["api",["v0","users",":user_id","stats"]],api_v0_user:["api",["v0","users",":id"]],add_api_v0_taggings:["api",["v0","taggings","add"]],remove_api_v0_taggings:["api",["v0","taggings","remove"]],set_order_api_v0_taggings:["api",["v0","taggings","set_order"]],suggestions_api_v0_taggings:["api",["v0","taggings","suggestions"]],suggestion_api_v0_taggings:["api",["v0","taggings","suggestion"]],api_v0_taggings:["api",["v0","taggings"]],recipients_api_v0_messages:["api",["v0","messages","recipients"]],recipient_api_v0_messages:["api",["v0","messages","recipient"]],api_v0_messages:["api",["v0","messages"]],api_v0_active_support_notifications:["api",["v0","server_notifications"]],api_v0_feature_flags:["api",["v0","feature_flags"]],find_api_v0_shares:["api",["v0","shares","find"]],api_v0_shares:["api",["v0","shares"]],api_v0_share:["api",["v0","shares",":id"]],record_split:["www",["record_split"]],finish_split:["www",["finish_split"]],attachment_csv_preview:["www",["attachments",":attachment_id","csv_preview"]],sidebar_new_profile_activity:["www",[":page_name","Activity","sidebar"]],new_profile_activity:["www",[":page_name","Activity"]],email_new_profile_contact_details:["www",[":page_name","contact_details","email"]],new_profile_curriculum_vitae:["www",[":page_name","CurriculumVitae"]],new_profile_profile_picture:["www",[":page_name","ProfilePicture"]],new_profile_supervisors:["www",[":page_name","supervisors"]],bio_new_profile_about_box:["www",[":page_name","about_box","bio"]],supervisors_new_profile_about_box:["www",[":page_name","about_box","supervisors"]],new_profile_post_edit:["www",[":page_name","Posts",":post_id","edit"]],show_new_profile_post:["www",[":page_name","Posts",":id"]],new_profile_posts:["www",[":page_name","Posts"]],new_new_profile_post:["www",[":page_name","Posts","new"]],new_profile_post:["www",[":page_name","Posts",":id"]],new_profile_questions:["www",[":page_name","Questions"]],new_profile_answers:["www",[":page_name","Answers"]],new_profile_followers:["www",[":page_name","Followers"]],new_profile_following:["www",[":page_name","Following"]],alpha_news_new_profile_admin:["www",[":page_name","admin","alpha_news"]],import_new_profile:["www",[":page_name","Import"]],update_affiliation_new_profile:["www",[":page_name","update_affiliation"]],show_affiliation_new_profile:["www",[":page_name","show_affiliation"]],new_affiliation_new_profile:["www",[":page_name","new_affiliation"]],edit_affiliation_new_profile:["www",[":page_name","edit_affiliation"]],delete_affiliation_new_profile:["www",[":page_name","delete_affiliation"]],quick_affiliation_new_profile:["www",[":page_name","quick_affiliation"]],popup_affiliation_new_profile:["www",[":page_name","popup_affiliation"]],np_blog_post_post_redirect_new_profile:["www",[":page_name","Blog",":id",":slug"]],np_blog_post_no_slug_post_redirect_new_profile:["www",[":page_name","Blog",":id"]],status_updates_slug_post_redirect_new_profile:["www",[":page_name","StatusUpdates",":id",":slug"]],books_works_redirect_new_profile:["www",[":page_name","Books",":id"]],papers_works_redirect_new_profile:["www",[":page_name","Papers",":id"]],talks_works_redirect_new_profile:["www",[":page_name","Talks",":id"]],teachings_works_redirect_new_profile:["www",[":page_name","Teaching",":id"]],new_profile_works:["www",[":page_name",":section_name"]],new_profile:["www",[":page_name"]]},$r.__absolute=function(t,e){var n,e=e||{},i=this.__data[t][0],r=e.subdomain||i;return delete e.subdomain,n=this.__relative(t,e),e.host?"//"+e.host+n:"//"+r+"."+$app_host+n},$r.__relative=function(t,e){var n,i=this.__data[t][1],e=e||{},r=[],o=[],a="/";return $.each(i,function(t,n){var i;if(0==n.indexOf(":")){if(i=n.slice(1),!e[i])throw"Failed to provide component "+n+"!";r.push(e[i]),delete e[i]}else r.push(n)}),r.length>0&&(a+=r.join("/")),e.format&&(a=a+"."+e.format,delete e.format),e.anchor&&(n=e.anchor,delete e.anchor),$.each(e,function(t,e){o.push(t+"="+e)}),o.length>0&&(a=a+"?"+o.join("&")),n&&(a=a+"#"+n),a},$.each($r.__data,function(t){$r[t+"_url"]=function(e){return $r.__absolute(t,e)},$r[t+"_path"]=function(e){return $r.__relative(t,e)}}),function(t){t.fn.extend({autocomplete:function(e,n){var i="string"==typeof e;return n=t.extend({},t.Autocompleter.defaults,{url:i?e:null,data:i?null:e,delay:i?t.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(t){return t},n.formatMatch=n.formatMatch||n.formatItem,n.useSpace=n.useSpace||!1,this.each(function(){new t.Autocompleter(this,n)})},result:function(t){return this.bind("result",t)},search:function(t){return this.trigger("search",[t])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(t){return this.trigger("setOptions",[t])},unautocomplete:function(){return this.trigger("unautocomplete")}}),t.Autocompleter=function(e,n){function i(){var t=x.selected();if(!t)return!1;var e=t.result;if(w=e,n.multiple){var i=o(v.val());i.length>1&&(e=i.slice(0,i.length-1).join(n.multipleSeparator)+n.multipleSeparator+e),e+=n.multipleSeparator}return v.val(n.displayItem(e)),l(),v.trigger("result",[t.data,t.value]),!0}function r(e,i,r,o){if(m==g.DEL)return x.hide(),void 0;var s;s=void 0!==r?r:v.val(),(i||s!=w)&&(w=s,s=a(s),s.length>=n.minChars||o?(v.addClass(n.loadingClass),n.matchCase||(s=s.toLowerCase()),n.distractor&&t(n.distractor).show(),h(s,c,l)):(_(),x.hide()))}function o(e){if(!e)return[""];var i=e.split(n.multipleSeparator),r=[];return t.each(i,function(e,n){t.trim(n)&&(r[e]=t.trim(n))}),r}function a(t){if(!n.multiple)return t;var e=o(t);return e[e.length-1]}function s(i,r){n.autoFill&&a(v.val()).toLowerCase()==i.toLowerCase()&&m!=g.BACKSPACE&&(v.val(v.val()+r.substring(a(w).length)),t.Autocompleter.Selection(e,w.length,w.length+r.length))}function u(){clearTimeout(f),f=setTimeout(l,200)}function l(){var i=x.visible();x.hide(),clearTimeout(f),_(),n.mustMatch&&v.search(function(t){if(!t)if(n.multiple){var e=o(v.val()).slice(0,-1);v.val(e.join(n.multipleSeparator)+(e.length?n.multipleSeparator:""))}else v.val("")}),i&&t.Autocompleter.Selection(e,e.value.length,e.value.length),v.trigger("resultsHidden")}function c(t,e){e&&e.length&&b?(_(),x.display(e,t),s(t,e[0].value),x.show(),v.trigger("resultsShown")):l()}function h(i,r,o){n.matchCase||(i=i.toLowerCase());var s=y.load(i);if(s&&s.length)r(i,s);else if("string"==typeof n.url&&n.url.length>0){var u={timestamp:+new Date};t.each(n.extraParams,function(t,e){u[t]="function"==typeof e?e():e});var l=t.extend({q:a(i),limit:n.max},u);null!=C&&C.abort(),C=t.benchmarkedAjax({mode:"abort",port:"autocomplete"+e.name,dataType:n.dataType,url:n.url,benchmarkUrl:n.benchmarkUrl,data:l,benchmarkData:l,success:function(e){n.distractor&&t(n.distractor).hide(),n.requestCallback&&n.requestCallback(e);var o=n.parse&&n.parse(e)||p(e);y.add(i,o),r(i,o)}})}else n.distractor&&t(n.distractor).hide(),x.emptyList(),o(i)}function p(e){for(var i=[],r=e.split("\n"),o=0;o<r.length;o++){var a=t.trim(r[o]);a&&(a=a.split("|"),i[i.length]={data:a,value:a[0],result:n.formatResult&&n.formatResult(a,a[0])||a[0]})}return i}function _(){v.removeClass(n.loadingClass),null!=C&&(C.abort(),C=null),n.distractor&&t(n.distractor).hide()}function d(){r(0,!0)}var f,m,g={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},v=t(e).attr("autocomplete","off").addClass(n.inputClass),w="",y=t.Autocompleter.Cache(n),b=0,k={mouseDownOnSelect:!1},x=t.Autocompleter.Select(n,e,i,k);e.select_visible=function(){var t=x.visible();return"undefined"!=typeof t&&t};var $,C=null;t.browser.opera&&t(e.form).bind("submit.autocomplete",function(){return $?($=!1,!1):void 0}),v.bind((t.browser.opera||t.browser.msie?"keypress":"keydown")+".autocomplete",function(t){return m=t.keyCode,t.keyCode==g.RETURN&&i()?(t.preventDefault(),$=!0,!1):!0}),v.bind((t.browser.opera?"keypress":"keydown")+".autocomplete",function(e){switch(m=e.keyCode,e.keyCode){case g.UP:x.visible()?(e.preventDefault(),x.prev()):r(0,!0);break;case g.DOWN:x.visible()?(e.preventDefault(),x.next()):r(0,!0);break;case g.PAGEUP:x.visible()?(e.preventDefault(),x.pageUp()):r(0,!0);break;case g.PAGEDOWN:x.visible()?(e.preventDefault(),x.pageDown()):r(0,!0);break;case n.multiple&&","==t.trim(n.multipleSeparator)&&g.COMMA:case g.TAB:if(i())return e.preventDefault(),$=!0,!1;break;case n.comma_effect&&g.COMMA:n.comma_effect();break;case g.ESC:x.hide(),v.trigger("resultsHidden");break;case n.useWordBoundaries&&(g.COMMA||g.SPACE||37||39||191||186||59||49):r(0,!0);break;default:clearTimeout(f),f=setTimeout(r,n.delay)}}).focus(function(){b++}).blur(function(){b=0,k.mouseDownOnSelect||u()}).click(function(){b++>1&&!x.visible()&&r(0,!0)}).bind("search",function(){function e(t,e){var i;if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r].result.toLowerCase()==t.toLowerCase()){i=e[r];break}"function"==typeof n?n(i):v.trigger("result",i&&[i.data,i.value])}var n=arguments.length>1?arguments[1]:null;t.each(o(v.val()),function(t,n){h(n,e,e)})}).bind("flushCache",function(){y.flush()}).bind("setOptions",function(){t.extend(n,arguments[1]),"data"in arguments[1]&&y.populate()}).bind("unautocomplete",function(){x.unbind(),v.unbind(),t(e.form).unbind(".autocomplete")}).bind("forceSearch",function(){r(0,!0,"",!0)}).bind("hideResults",function(){u()}).bind("show_autocomplete",function(){d()})},t.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(t){return t[0]},displayItem:function(t){return t},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(t,e){return e?t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"):t},scroll:!0,scrollHeight:180},t.Autocompleter.Cache=function(e){function n(t,n){e.matchCase||(t=t.toLowerCase());var i=t.indexOf(n);return"word"==e.matchContains&&(i=t.toLowerCase().search("\\b"+n.toLowerCase())),-1==i?!1:0==i||e.matchContains}function i(t,n){s>e.cacheLength&&o(),a[t]||s++,a[t]=n}function r(){if(!e.data)return!1;var n={},r=0;e.url||(e.cacheLength=1),n[""]=[];for(var o=0,a=e.data.length;a>o;o++){var s=e.data[o];s="string"==typeof s?[s]:s;var u=e.formatMatch(s,o+1,e.data.length);if(u!==!1){var l=u.charAt(0).toLowerCase();n[l]||(n[l]=[]);var c={value:u,data:s,result:e.formatResult&&e.formatResult(s)||u};n[l].push(c),r++<e.max&&n[""].push(c)}}t.each(n,function(t,n){e.cacheLength++,i(t,n)})}function o(){a={},s=0}var a={},s=0;return setTimeout(r,25),{flush:o,add:i,populate:r,load:function(i){if(!e.cacheLength||!s)return null;if(!e.url&&e.matchContains){var r=[];for(var o in a)if(o.length>0){var u=a[o];t.each(u,function(t,e){n(e.value,i)&&r.push(e)})}return r}if(a[i])return a[i];if(e.matchSubset)for(var l=i.length-1;l>=e.minChars;l--){var u=a[i.substr(0,l)];if(u){var r=[];return t.each(u,function(t,e){n(e.value,i)&&(r[r.length]=e)}),r}}return null}}},t.Autocompleter.Select=function(e,n,i,r){function o(){v&&(_=t("<div/>").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body),d=t("<ul/>").appendTo(_).mouseover(function(e){a(e).nodeName&&"LI"==a(e).nodeName.toUpperCase()&&(m=t("li",d).removeClass(f.ACTIVE).index(a(e)),t(a(e)).addClass(f.ACTIVE))}).click(function(e){return t(a(e)).addClass(f.ACTIVE),i(),n.focus(),!1}).mousedown(function(){r.mouseDownOnSelect=!0}).mouseup(function(){r.mouseDownOnSelect=!1}),e.form&&(view_all=t("<a>").attr({href:"#search","class":"view_all_results button blue"}).html("View All Results").click(function(){return t(e.form).unbind("submit"),t(e.form).submit(),!1}),_.append(view_all)),e.width>0&&_.css("width",e.width),v=!1)}function a(t){for(var e=t.target;e&&"LI"!=e.tagName;)e=e.parentNode;return e?e:[]}function s(t){h.slice(m,m+1).removeClass(f.ACTIVE),u(t);var n=h.slice(m,m+1).addClass(f.ACTIVE);if(e.scroll){var i=0;h.slice(0,m).each(function(){i+=this.offsetHeight}),i+n[0].offsetHeight-d.scrollTop()>d[0].clientHeight?d.scrollTop(i+n[0].offsetHeight-d.innerHeight()):i<d.scrollTop()&&d.scrollTop(i)}}function u(t){m+=t,0>m?m=h.size()-1:m>=h.size()&&(m=0)}function l(t){return e.max&&e.max<t?e.max:t}function c(){d.empty();for(var n=l(p.length),i=0;n>i;i++)if(p[i]){var r=e.formatItem(p[i].data,i+1,n,p[i].value,g);if(r!==!1){var o=t("<li/>").html(e.highlight(r,g)).addClass(0==i%2?"ac_even":"ac_odd").appendTo(d)[0];t.data(o,"ac_data",p[i])}}h=d.find("li"),e.selectFirst&&(h.slice(0,1).addClass(f.ACTIVE),m=0)}var h,p,_,d,f={ACTIVE:"ac_over"},m=-1,g="",v=!0;return{display:function(t,e){o(),p=t,g=e,c()},next:function(){s(1)},prev:function(){s(-1)},pageUp:function(){0!=m&&0>m-8?s(-m):s(-8)},pageDown:function(){m!=h.size()-1&&m+8>h.size()?s(h.size()-1-m):s(8)},hide:function(){_&&_.hide(),h&&h.removeClass(f.ACTIVE),m=-1},visible:function(){return _&&_.is(":visible")},current:function(){return this.visible()&&(h.filter("."+f.ACTIVE)[0]||e.selectFirst&&h[0])},show:function(){var i=t(n).offset();if(_.css({width:"string"==typeof e.width||e.width>0?e.width:t(n).width(),top:i.top+n.offsetHeight,left:i.left}).show(),e.scroll&&(d.scrollTop(0),d.css({maxHeight:e.scrollHeight,overflow:"auto"}),t.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var r=0;h.each(function(){r+=this.offsetHeight});var o=r>e.scrollHeight;d.css("height",o?e.scrollHeight:r),o||h.width(d.width()-parseInt(h.css("padding-left"))-parseInt(h.css("padding-right")))}},selected:function(){var e=h&&h.filter("."+f.ACTIVE).removeClass(f.ACTIVE);return e&&e.length&&t.data(e[0],"ac_data")},emptyList:function(){d&&d.empty()},unbind:function(){_&&_.remove()}}},t.Autocompleter.Selection=function(e,n,i){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",i),r.select()}else e.setSelectionRange?e.setSelectionRange(n,i):e.selectionStart&&(e.selectionStart=n,e.selectionEnd=i);t(e).focus()}}(jQuery),function(t){var e="hidden",n="border-box",i="lineHeight",r='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',o=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],a="oninput",s="onpropertychange",u=t(r)[0];u.setAttribute(a,"return"),t.isFunction(u[a])||s in u?(t(u).css(i,"99px"),"99px"===t(u).css(i)&&o.push(i),t.fn.autosize=function(i){return i=i||{},this.each(function(){function u(){var t,n,r;c||(c=!0,l.value=p.value,l.style.overflowY=p.style.overflowY,r=parseInt(p.style.height,10),l.style.width=_.css("width"),l.scrollTop=0,l.scrollTop=9e4,t=l.scrollTop,n=e,t>f?(t=f,n="scroll"):d>t&&(t=d),t+=g,p.style.overflowY=n,r!==t&&(p.style.height=t+"px",w&&i.callback.call(p)),setTimeout(function(){c=!1},1))}var l,c,h,p=this,_=t(p),d=_.height(),f=parseInt(_.css("maxHeight"),10),m=o.length,g=0,v=p.value,w=t.isFunction(i.callback);if((_.css("box-sizing")===n||_.css("-moz-box-sizing")===n||_.css("-webkit-box-sizing")===n)&&(g=_.outerHeight()-_.height()),!_.data("mirror")&&!_.data("ismirror")){for(l=t(r).data("ismirror",!0).addClass(i.className||"autosizejs")[0],h="none"===_.css("resize")?"none":"horizontal",_.data("mirror",t(l)).css({overflow:e,overflowY:e,wordWrap:"break-word",resize:h}),f=f&&f>0?f:9e4;m--;)l.style[o[m]]=_.css(o[m]);t("body").append(l),s in p?a in p?p[a]=p.onkeyup=u:p[s]=u:p[a]=u,t(window).resize(u),_.bind("autosize",u),p.value="",p.value=v,u()}})}):t.fn.autosize=function(){return this}}(jQuery),/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),o=0;o<r.length;o++){var a=jQuery.trim(r[o]);if(a.substring(0,t.length+1)==t+"="){i=decodeURIComponent(a.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n=$.extend({},n),n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+1e3*60*60*24*n.expires)):u=n.expires,s="; expires="+u.toUTCString()}var l=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),s,l,c,h].join("")},/* Copyright (c) 2007 Paul Bakaus (paul.bakaus@googlemail.com) and Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * $LastChangedDate: 2007-12-20 08:43:48 -0600 (Thu, 20 Dec 2007) $
 * $Rev: 4257 $
 *
 * Version: 1.2
 *
 * Requires: jQuery 1.2+
 */
eval(function(t,e,n,i,r,o){if(r=function(t){return(e>t?"":r(parseInt(t/e)))+((t%=e)>35?String.fromCharCode(t+29):t.toString(36))},!"".replace(/^/,String)){for(;n--;)o[r(n)]=i[n]||r(n);i=[function(t){return o[t]}],r=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(t=t.replace(new RegExp("\\b"+r(n)+"\\b","g"),i[n]));return t}("(5($){$.19={P:'1.2'};$.u(['j','w'],5(i,d){$.q['O'+d]=5(){p(!3[0])6;g a=d=='j'?'s':'m',e=d=='j'?'D':'C';6 3.B(':y')?3[0]['L'+d]:4(3,d.x())+4(3,'n'+a)+4(3,'n'+e)};$.q['I'+d]=5(b){p(!3[0])6;g c=d=='j'?'s':'m',e=d=='j'?'D':'C';b=$.F({t:Z},b||{});g a=3.B(':y')?3[0]['8'+d]:4(3,d.x())+4(3,'E'+c+'w')+4(3,'E'+e+'w')+4(3,'n'+c)+4(3,'n'+e);6 a+(b.t?(4(3,'t'+c)+4(3,'t'+e)):0)}});$.u(['m','s'],5(i,b){$.q['l'+b]=5(a){p(!3[0])6;6 a!=W?3.u(5(){3==h||3==r?h.V(b=='m'?a:$(h)['U'](),b=='s'?a:$(h)['T']()):3['l'+b]=a}):3[0]==h||3[0]==r?S[(b=='m'?'R':'Q')]||$.N&&r.M['l'+b]||r.A['l'+b]:3[0]['l'+b]}});$.q.F({z:5(){g a=0,f=0,o=3[0],8,9,7,v;p(o){7=3.7();8=3.8();9=7.8();8.f-=4(o,'K');8.k-=4(o,'J');9.f+=4(7,'H');9.k+=4(7,'Y');v={f:8.f-9.f,k:8.k-9.k}}6 v},7:5(){g a=3[0].7;G(a&&(!/^A|10$/i.16(a.15)&&$.14(a,'z')=='13'))a=a.7;6 $(a)}});5 4(a,b){6 12($.11(a.17?a[0]:a,b,18))||0}})(X);",62,72,"|||this|num|function|return|offsetParent|offset|parentOffset|||||borr|top|var|window||Height|left|scroll|Left|padding|elem|if|fn|document|Top|margin|each|results|Width|toLowerCase|visible|position|body|is|Right|Bottom|border|extend|while|borderTopWidth|outer|marginLeft|marginTop|client|documentElement|boxModel|inner|version|pageYOffset|pageXOffset|self|scrollTop|scrollLeft|scrollTo|undefined|jQuery|borderLeftWidth|false|html|curCSS|parseInt|static|css|tagName|test|jquery|true|dimensions".split("|"),0,{})),function(t){function e(){t.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}t.fn.ajaxSubmit=function(n){function i(){function e(){if(!_++){l.detachEvent?l.detachEvent("onload",e):l.removeEventListener("load",e,!1);var n=!0;try{if(d)throw"timeout";var r,a;if(a=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document,(null==a.body||""==a.body.innerHTML)&&!g)return g=1,_--,setTimeout(e,100),void 0;if(h.responseText=a.body?a.body.innerHTML:null,h.responseXML=a.XMLDocument?a.XMLDocument:a,h.getResponseHeader=function(t){var e={"content-type":o.dataType};return e[t]},"json"==o.dataType||"script"==o.dataType){var s=a.getElementsByTagName("textarea")[0];h.responseText=s?s.value:h.responseText}else"xml"!=o.dataType||h.responseXML||null==h.responseText||(h.responseXML=i(h.responseText));r=t.httpData(h,o.dataType)}catch(c){n=!1,t.handleError(o,h,"error",c)}n&&(o.success(r,"success"),p&&t.event.trigger("ajaxSuccess",[h,o])),p&&t.event.trigger("ajaxComplete",[h,o]),p&&!--t.active&&t.event.trigger("ajaxStop"),o.complete&&o.complete(h,n?"success":"error"),setTimeout(function(){u.remove(),h.responseXML=null},100)}}function i(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.tagName?e:null}var r=c[0];if(t(":input[name=submit]",r).length)return alert('Error: Form elements must not be named "submit".'),void 0;var o=t.extend({},t.ajaxSettings,n),a=t.extend(!0,{},t.extend(!0,{},t.ajaxSettings),o),s="jqFormIO"+(new Date).getTime(),u=t('<iframe id="'+s+'" name="'+s+'" src="about:blank" />'),l=u[0];u.css({position:"absolute",top:"-1000px",left:"-1000px"});var h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,u.attr("src","about:blank")}},p=o.global;if(p&&!t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[h,o]),a.beforeSend&&a.beforeSend(h,a)===!1)return a.global&&t.active--,void 0;if(!h.aborted){var _=0,d=0,f=r.clk;if(f){var m=f.name;m&&!f.disabled&&(n.extraData=n.extraData||{},n.extraData[m]=f.value,"image"==f.type&&(n.extraData[name+".x"]=r.clk_x,n.extraData[name+".y"]=r.clk_y))}setTimeout(function(){var i=c.attr("target"),a=c.attr("action");r.setAttribute("target",s),"POST"!=r.getAttribute("method")&&r.setAttribute("method","POST"),r.getAttribute("action")!=o.url&&r.setAttribute("action",o.url),n.skipEncodingOverride||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),o.timeout&&setTimeout(function(){d=!0,e()},o.timeout);var h=[];try{if(n.extraData)for(var p in n.extraData)h.push(t('<input type="hidden" name="'+p+'" value="'+n.extraData[p]+'" />').appendTo(r)[0]);u.appendTo("body"),l.attachEvent?l.attachEvent("onload",e):l.addEventListener("load",e,!1),r.submit()}finally{r.setAttribute("action",a),i?r.setAttribute("target",i):c.removeAttr("target"),t(h).remove()}},10);var g=0}}if(!this.length)return e("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof n&&(n={success:n});var r=this.attr("action")||window.location.href;r=(r.match(/^([^#]+)/)||[])[1],r=r||"",n=t.extend({url:r,type:this.attr("method")||"GET"},n||{});var o={};if(this.trigger("form-pre-serialize",[this,n,o]),o.veto)return e("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return e("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(var s in n.data)if(n.data[s]instanceof Array)for(var u in n.data[s])a.push({name:s,value:n.data[s][u]});else a.push({name:s,value:n.data[s]})}if(n.beforeSubmit&&n.beforeSubmit(a,this,n)===!1)return e("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,n,o]),o.veto)return e("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var l=t.param(a);"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+l,n.data=null):n.data=l;var c=this,h=[];if(n.resetForm&&h.push(function(){c.resetForm()}),n.clearForm&&h.push(function(){c.clearForm()}),!n.dataType&&n.target){var p=n.success||function(){};h.push(function(e){t(n.target).html(e).each(p,arguments)})}else n.success&&h.push(n.success);n.success=function(t,e){for(var i=0,r=h.length;r>i;i++)h[i].apply(n,[t,e,c])};for(var _=t("input:file",this).fieldValue(),d=!1,f=0;f<_.length;f++)_[f]&&(d=!0);return n.iframe||d?n.closeKeepAlive?t.get(n.closeKeepAlive,i):i():t.ajax(n),this.trigger("form-submit-notify",[this,n]),this},t.fn.ajaxForm=function(e){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){return t(this).ajaxSubmit(e),!1}).each(function(){t(":submit,input:image",this).bind("click.form-plugin",function(e){var n=this.form;if(n.clk=this,"image"==this.type)if(void 0!=e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var i=t(this).offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-this.offsetLeft,n.clk_y=e.pageY-this.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},10)})})},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin"),this.each(function(){t(":submit,input:image",this).unbind("click.form-plugin")})},t.fn.formToArray=function(e){var n=[];if(0==this.length)return n;var i=this[0],r=e?i.getElementsByTagName("*"):i.elements;if(!r)return n;for(var o=0,a=r.length;a>o;o++){var s=r[o],u=s.name;if(u)if(e&&i.clk&&"image"==s.type)s.disabled||i.clk!=s||n.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y});else{var l=t.fieldValue(s,!0);if(l&&l.constructor==Array)for(var c=0,h=l.length;h>c;c++)n.push({name:u,value:l[c]});else null!==l&&"undefined"!=typeof l&&n.push({name:u,value:l})}}if(!e&&i.clk)for(var p=i.getElementsByTagName("input"),o=0,a=p.length;a>o;o++){var _=p[o],u=_.name;u&&!_.disabled&&"image"==_.type&&i.clk==_&&n.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y})}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var o=0,a=r.length;a>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],a=t.fieldValue(o,e);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?t.merge(n,a):n.push(a))}return n},t.fieldValue=function(t,e){var n=t.name,i=t.type,r=t.tagName.toLowerCase();if("undefined"==typeof e&&(e=!0),e&&(!n||t.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!t.checked||("submit"==i||"image"==i)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var o=t.selectedIndex;if(0>o)return null;for(var a=[],s=t.options,u="select-one"==i,l=u?o+1:s.length,c=u?o:0;l>c;c++){var h=s[c];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),u)return p;a.push(p)}}return a}return t.value},t.fn.clearForm=function(){return this.each(function(){t("input,select,textarea",this).clearFields()})},t.fn.clearFields=t.fn.clearInputs=function(){return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();"text"==t||"password"==t||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0==t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0==e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})}}(jQuery),function(){$.fn.hide_contents=function(){return $(this).show_contents(),$(this).contents().wrap("<span class='visibility_hidden'/>")},$.fn.show_contents=function(){return $(this).find("> span.visibility_hidden").contents().unwrap()}}.call(this),function(){$.fn.magicker_default=function(t){var e,n,i,r,o,a=this;return t?(n=!1,i=$("<div/>").text(t).css({position:"absolute",cursor:"text",color:"#999999"}).on("click",function(){return a.focus()}),e=function(){return a.val().length>0?r():o()},r=function(){return n=!1,i.hide()},o=function(){var r,o,s,u,l,c,h,p,_,d;if((s=a.data("magicker-default"))&&s!==t&&(t=s,i.text(t)),!n){if(c=a.offsetParent(),u=a.offset(),h=c.offset(),0===c.length)return setTimeout(e,250),void 0;for(n=!0,l={top:parseInt(a.css("padding-top")||"0"),left:parseInt(a.css("padding-left")||"0")},o={top:u.top-((null!=h?h.top:void 0)||0)+l.top+1,left:u.left-((null!=h?h.left:void 0)||0)+l.left+1},d=["font-style","font-variant","font-weight","font-size","line-height","font-family"],p=0,_=d.length;_>p;p++)r=d[p],o[r]=a.css(r);return i.css(o).appendTo(c).show()}},this.on("keyup focus blur check_magic_default",e),e(),this):this}}.call(this),function(){var t=[].slice;$.fn.more_link=function(){var e,n;return e=$.fn.more_link,n=arguments,$(this).each(function(i,r){return e.init.apply(e,[$(r)].concat(t.call(n)))})},$.fn.more_link.init=function(t,e,n,i){var r,o,a;return a=""+GlobalIncrementor.next()+"-"+(new Date).getTime(),o="more-link-container-"+a,t.attr("data-"+o,"true"),r=t.find(e),r.attr("data-more-link-behavior","true"),r.attr("data-container","*[data-"+o+"=true]"),r.attr("data-show",i),r.attr("data-hide",n)}}.call(this),function(t){window.NeverEndingProgress=function(e){this.update_progress=function(t){var e=this.max_progress*t;e>this.current_progress&&(this.current_progress=e),1==t&&this.start_auto_progress(),this.callback_progress()},this.finish=function(){this.current_progress=1,this.callback_progress()},this.stop=function(){this.stopped=!0},this.start_auto_progress=function(){if(!this.auto_progress_time){this.auto_progress_time=(new Date).getTime();var t=this.auto_progress_time-this.start_time;this.expected_time=t/this.max_progress*this.auto_progress_required,this.update_interval=this.expected_time/100/this.auto_progress_required,this.auto_progress=0,this.auto_interval()}},this.auto_interval=function(){if(!(this.current_progress>=1||this.stopped)){var t=this;this.auto_progress+=.01,this.current_progress+=.01;var e=1/Math.pow(.99-this.current_progress,3);this.callback_progress(),this.interval=setTimeout(function(){t.auto_interval()},this.update_interval+e)}},this.callback_progress=function(){"function"==typeof this.progress_callback&&this.progress_callback(this.current_progress)},this.init=function(){this.current_progress=0,this.max_progress=.7,t.extend(this,e),this.auto_progress_required=1-this.max_progress,this.start_time=(new Date).getTime()},this.init()},t.fn.never_ending_progress=function(e,n){var i=t(this);return i.never_ending_progress=new NeverEndingProgress({max_progress:e,progress_callback:n}),i}}(jQuery),/*! jQuery Retina Plugin - v1.0 - 3/25/2012
* https://github.com/tylercraft/jQuery-Retina
* Copyright (c) 2012 Tyler Craft; Licensed MIT, GPL */
/*
 * Twitter Search Plugin jquery.retina.js
 * https://github.com/tylercraft/jQuery-Retina
 *
 * Copyright (c) 2012 tylercraft.com
 * Author: Tyler Craft
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/tylercraft/jQuery-Retina
 *
 */
function(t){t.fn.retina=function(e){var n={dataRetina:!0,suffix:"",checkIfImageExists:!1,customFileNameCallback:"",overridePixelRation:!1};e&&jQuery.extend(n,e);var i=!1;return(n.overridePixelRation||window.devicePixelRatio>=2)&&(i=!0),this.each(function(){var e=t(this);if(e.addClass("retina-off"),!i)return!1;var r="";if(n.dataRetina&&e.attr("data-retina")&&(r=e.attr("data-retina")),n.suffix&&(r||(r=e.attr("src"))),n.suffix){var o=r.replace(/.[^.]+$/,""),a=r.replace(/^.*\./,"");r=o+n.suffix+"."+a}n.customFileNameCallback&&(r=n.customFileNameCallback(e)),n.checkIfImageExists&&r?t.ajax({url:r,type:"HEAD",success:function(){e.attr("src",r),e.removeClass("retina-off"),e.addClass("retina-on")}}):r&&(e.attr("src",r),e.removeClass("retina-off"),e.addClass("retina-on"))})}}(jQuery),function(t){var e=function(t,e){return t<<e|t>>>32-e},n=function(t){var e,n,i="";for(e=7;e>=0;e--)n=15&t>>>4*e,i+=n.toString(16);return i},i=function(t){t=t.replace(/\x0d\x0a/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e};t.extend({sha1:function(t){var r,o,a,s,u,l,c,h,p,_=new Array(80),d=1732584193,f=4023233417,m=2562383102,g=271733878,v=3285377520;t=i(t);var w=t.length,y=new Array;for(o=0;w-3>o;o+=4)a=t.charCodeAt(o)<<24|t.charCodeAt(o+1)<<16|t.charCodeAt(o+2)<<8|t.charCodeAt(o+3),y.push(a);switch(w%4){case 0:o=2147483648;break;case 1:o=8388608|t.charCodeAt(w-1)<<24;break;case 2:o=32768|(t.charCodeAt(w-2)<<24|t.charCodeAt(w-1)<<16);break;case 3:o=128|(t.charCodeAt(w-3)<<24|t.charCodeAt(w-2)<<16|t.charCodeAt(w-1)<<8)}for(y.push(o);14!=y.length%16;)y.push(0);for(y.push(w>>>29),y.push(4294967295&w<<3),r=0;r<y.length;r+=16){for(o=0;16>o;o++)_[o]=y[r+o];for(o=16;79>=o;o++)_[o]=e(_[o-3]^_[o-8]^_[o-14]^_[o-16],1);for(s=d,u=f,l=m,c=g,h=v,o=0;19>=o;o++)p=4294967295&e(s,5)+(u&l|~u&c)+h+_[o]+1518500249,h=c,c=l,l=e(u,30),u=s,s=p;for(o=20;39>=o;o++)p=4294967295&e(s,5)+(u^l^c)+h+_[o]+1859775393,h=c,c=l,l=e(u,30),u=s,s=p;for(o=40;59>=o;o++)p=4294967295&e(s,5)+(u&l|u&c|l&c)+h+_[o]+2400959708,h=c,c=l,l=e(u,30),u=s,s=p;for(o=60;79>=o;o++)p=4294967295&e(s,5)+(u^l^c)+h+_[o]+3395469782,h=c,c=l,l=e(u,30),u=s,s=p;d=4294967295&d+s,f=4294967295&f+u,m=4294967295&m+l,g=4294967295&g+c,v=4294967295&v+h}var p=n(d)+n(f)+n(m)+n(g)+n(v);return p.toLowerCase()}})}(jQuery),function(t){var e=function(t,e){return t<<e|t>>>32-e},n=function(t){var e,n,i="";for(e=7;e>=0;e--)n=15&t>>>4*e,i+=n.toString(16);return i},i=function(t){t=t.replace(/\x0d\x0a/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e};t.extend({sha1:function(t){var r,o,a,s,u,l,c,h,p,_=new Array(80),d=1732584193,f=4023233417,m=2562383102,g=271733878,v=3285377520;t=i(t);var w=t.length,y=new Array;for(o=0;w-3>o;o+=4)a=t.charCodeAt(o)<<24|t.charCodeAt(o+1)<<16|t.charCodeAt(o+2)<<8|t.charCodeAt(o+3),y.push(a);switch(w%4){case 0:o=2147483648;break;case 1:o=8388608|t.charCodeAt(w-1)<<24;break;case 2:o=32768|(t.charCodeAt(w-2)<<24|t.charCodeAt(w-1)<<16);break;case 3:o=128|(t.charCodeAt(w-3)<<24|t.charCodeAt(w-2)<<16|t.charCodeAt(w-1)<<8)}for(y.push(o);14!=y.length%16;)y.push(0);for(y.push(w>>>29),y.push(4294967295&w<<3),r=0;r<y.length;r+=16){for(o=0;16>o;o++)_[o]=y[r+o];for(o=16;79>=o;o++)_[o]=e(_[o-3]^_[o-8]^_[o-14]^_[o-16],1);for(s=d,u=f,l=m,c=g,h=v,o=0;19>=o;o++)p=4294967295&e(s,5)+(u&l|~u&c)+h+_[o]+1518500249,h=c,c=l,l=e(u,30),u=s,s=p;for(o=20;39>=o;o++)p=4294967295&e(s,5)+(u^l^c)+h+_[o]+1859775393,h=c,c=l,l=e(u,30),u=s,s=p;for(o=40;59>=o;o++)p=4294967295&e(s,5)+(u&l|u&c|l&c)+h+_[o]+2400959708,h=c,c=l,l=e(u,30),u=s,s=p;for(o=60;79>=o;o++)p=4294967295&e(s,5)+(u^l^c)+h+_[o]+3395469782,h=c,c=l,l=e(u,30),u=s,s=p;d=4294967295&d+s,f=4294967295&f+u,m=4294967295&m+l,g=4294967295&g+c,v=4294967295&v+h}var p=n(d)+n(f)+n(m)+n(g)+n(v);return p.toLowerCase()}})}(jQuery),/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.10.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2011, Ryan McGeary (ryanonjavascript -[at]- mcgeary [*dot*] org)
 */
function(t){function e(){var e=n(this);return isNaN(e.datetime)||t(this).text(i(e.datetime)),this}function n(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var n=t.trim(e.text());n.length>0&&e.attr("title",n)}return e.data("timeago")}function i(t){return o.inWords(r(t))}function r(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return e instanceof Date?i(e):"string"==typeof e?i(t.timeago.parse(e)):i(t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(e){function n(n,r){var o=t.isFunction(n)?n(r,e):n,a=i.numbers&&i.numbers[r]||r;return o.replace(/%d/i,a)}var i=this.settings.strings,r=i.prefixAgo,o=i.suffixAgo;this.settings.allowFuture&&0>e&&(r=i.prefixFromNow,o=i.suffixFromNow);var a=Math.abs(e)/1e3,s=a/60,u=s/60,l=u/24,c=l/365,h=45>a&&n(i.seconds,Math.round(a))||90>a&&n(i.minute,1)||45>s&&n(i.minutes,Math.round(s))||90>s&&n(i.hour,1)||24>u&&n(i.hours,Math.round(u))||48>u&&n(i.day,1)||30>l&&n(i.days,Math.floor(l))||60>l&&n(i.month,1)||365>l&&n(i.months,Math.floor(l/30))||2>c&&n(i.year,1)||n(i.years,Math.floor(c));return t.trim([r,h,o].join(" "))},parse:function(e){var n=t.trim(e);return n=n.replace(/\.\d\d\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},datetime:function(e){var n="time"===t(e).get(0).tagName.toLowerCase(),i=n?t(e).attr("datetime"):t(e).attr("title");return o.parse(i)}}),t.fn.timeago=function(){var t=this;t.each(e);var n=o.settings;return n.refreshMillis>0&&setInterval(function(){t.each(e)},n.refreshMillis),t},document.createElement("abbr"),document.createElement("time")}(jQuery),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=e);e>n;n+=1)if(n in this&&this[n]===t)return n;return-1});var m={},v={},c={},URLs={},$x={ensureNamespace:function(t){c[t]||(c[t]={}),v[t]||(v[t]={})},convertPipe:function(t){return t.replace(/&#124;/g,"|")},getOwnPropertiesWithoutMethods:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&"function"!=typeof t[e]&&n.push(e);return n},getOwnProperties:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},cloneWithoutMethods:function(t){return $x.extendOnly({},t,$x.getOwnPropertiesWithoutMethods(t))},extendOnly:function(t,e,n){var i,r;for(i=0;i<n.length;i+=1)r=n[i],t[r]=e[r];return t},extend:function(t,e){return $x.extendOnly(t,e,$x.getOwnProperties(e))},clone:function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],n=0,i=t.length;i>n;++n)e[n]=$x.clone(t[n]);return e}if(t instanceof Object){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=$x.clone(t[r]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},object:function(t){function e(){}e.prototype=t;var n=new e;return n._parent=t,n}},$_x={extend:function(t){var e=function(){e.__super__.constructor.apply(this,arguments)},n=Object.prototype.hasOwnProperty,i=function(){this.constructor=e};for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}},$e={call_and_report_errors:function(t,e){try{t()}catch(n){$e.report_error(n.message,n.stack,e)}},report_error:function(t,e,n,i){try{var r="unknown";if("undefined"!=typeof deconcept){var o=deconcept.SWFObjectUtil.getPlayerVersion();r=o.major+"."+o.minor+"."+o.rev}$.post("/report_client_side_error",{client_type:"Javascript",tag:n,error_message:t,trace:e,version_info:"",flash_version:r})}catch(a){}i||alert("Oops... Something just went wrong!\n\nWe're taking a look at the issue right now.")}},$f={auto_copy_field:function(t,e,n,i){var r=function(){var o=t.val(),a=e.val();o!==a&&(a&&n||e.val(o)),n&&t.unbind("change",r),i&&i()};t.change(r)}},Base={inherit:function(t){var e=$x.extend($x.object(this),t);return e},protocall:function(){var t,e=arguments[0];if(this.hasOwnProperty(e))t=this.prototype_that_defines(e);else{var n=this.prototype_that_defines(e);"undefined"!=typeof n&&(t=n._parent)}if("undefined"!=typeof t){for(var i=[],r=1;r<arguments.length;r+=1)i.push(arguments[r]);return t[e].apply(this,i)}return void 0},prototype_that_defines:function(t){for(var e=this._parent;"undefined"!=typeof e&&!e.hasOwnProperty(t);)e=e._parent;return e},create:function(){var t=$x.object(this);return t.init.apply(t,arguments),t},init:function(){return this}},BaseController=Base.inherit({_ref:null,init:function(t){var e=this;return this.options=t||{},$(document).ready(function(){e.init_elements(),e.init_behaviors(),"undefined"!=typeof e.options.after_initialize&&e.options.after_initialize.call(e,e)}),this},init_elements:function(){this.options.elements?this.set_elements(this.options.elements):this.elements={}},set_elements:function(t){var e=this;return e.elements={},_.each($x.getOwnProperties(t),function(n){e.elements[n]=$(t[n])}),e},init_behaviors:function(){return this}}),BaseView=Base.inherit({init:function(t){this.container="string"==typeof t?$(t):t},show:function(){var t=JSML.transform(this.structure.apply(this,Array.prototype.slice.call(arguments)));this.container.html(""),this.container.get(0).appendChild(t),this.container.show()},structure:function(){},scroll_to:function(t){"undefined"===t&&(t=400);var e=$(this.container).offset();$(window).height();var n=e-20;20>n&&(n=0),$("html,body").animate({scrollTop:n},t)}}),$h={singularize:function(t){return t.match(/(x|z|ch|sh|ss)es$/)?t.substring(0,t.length-2):t.match(/s$/)?t.substring(0,t.length-1):t},pluralize:function(t){return""==t?t:t.match(/(x|z|ch|sh|ss)$/)?t+"es":t.match(/s$/)?t:t+"s"},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},decodeHTML:function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0].nodeValue},encodeHTML:function(t){return $("<div/>").text(t).html()},time_ago_in_words:function(t,e){return"undefined"==typeof e&&(e=!0),$h.distance_of_time_in_words(new Date,t,e)+" ago"},time_to_go_in_words:function(t,e){return"undefined"==typeof e&&(e=!0),"in "+$h.distance_of_time_in_words(new Date,t,e)},distance_of_time_in_words:function(t,e,n){var i=t.getTime(),r=e.getTime(),o=Math.round(Math.abs(i-r)/1e3),a=Math.round(o/60);return 1>=a?n?5>o?"less than 5 seconds":10>o?"less than 10 seconds":20>o?"less than 20 seconds":40>o?"half a minute":60>o?"less than a minute":"1 minute":0===a?"less than a minute":"1 minute":45>a?a+" minutes":90>a?"about 1 hour":1440>a?"about "+Math.round(a/60)+" hours":2880>a?"1 day":43200>a?Math.round(a/1440)+" days":86400>a?"about 1 month":525600>a?Math.round(a/43200)+" months":1051200>a?"about 1 year":"over "+Math.round(a/525600)+" years"},ipad_user:function(){return null!=navigator.userAgent.match(/iPad/i)},formatted_date:function(t){var e=["th","st","nd","rd"];_.isDate(t)||(t=new Date(t));var n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=t.getUTCDate()%100,r=e[(i-20)%10]||e[i]||e[0];return i+r+" "+n[t.getUTCMonth()]},truncate:function(t,e){return t.length>e?t.slice(0,e-3)+"...":t},to_sentence:function(t){switch(t.length){case 0:return"";case 1:return""+t[0];case 2:return""+t[0]+" and "+t[1];default:return""+t.slice(0,-1).join(", ")+" and "+t.slice(-1)}}},Prefs={set_for_user:function(t,e,n,i){e.user_id=t,$("#post-profile-to-facebook").slideUp(),$.post("/set_user_preferences",e,function(t){t.success?n&&n():i?i():document.location="/login"},"json")},simple_set_for_user:function(t,e,n){var i=null,r=null;if(n){var o=$(n);o.find(".saved").hide(),o.find(".failed").hide(),o.find(".saving").show(),o.show(),i=function(){o.find(".saving").hide(),o.find(".saved").show(),o.fadeOut(1e3)},r=function(){o.find(".saving").hide(),o.find(".failed").show(),o.fadeOut(1e3)}}this.set_for_user(t,e,i,r)}};$.fn.flash=function(){this.each(function(){var t=$(this).css("backgroundColor");$(this).animate({backgroundColor:"#FFFF00"},500,"linear",function(){$(this).animate({backgroundColor:t},1e3)})})},$.fn.single_click=function(t){var e=this,n=function(){return!1},i=function(r){var o=this;return e.unbind("click",i),e.click(n),setTimeout(function(){e.unbind("click",n),e.click(i)},1e3),t.call(o,r)};return e.click(i)},$.fn.single_submit=function(t){var e=this,n=e.find("[type=submit]");t||(t=1e3),e.bind("submit",function(){n.attr("disabled",!0),setTimeout(function(){n.attr("disabled",!1)},t)})},$.fn.single_submit_with_callback=function(t){var e,n,i,r=this,o=r.find("[type=submit]");e=function(){r.unbind("submit",i),r.bind("submit",!1),o.attr("disabled",!0)},n=function(){r.unbind("submit",!1),r.bind("submit",i),o.attr("disabled",!1)},i=function(i){return e(),t.call(this,i,n)},r.bind("submit",i)},$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},$.fn.serializeNestedObject=function(){var t=this.serializeObject(),e={};return $.each(t,function(t,n){for(var i=_.compact(t.split(/[\[\]]/)),r=e;i.length>1;)if(part=i.shift(),"undefined"==typeof r[part])r=r[part]={};else{if("object"!=typeof r[part])throw"incorrect nesting!";r=r[part]}part=i.shift(),r[part]=n}),e},$.benchmarkReported={},$.benchmarkedAjax=function(t){var e=null,n=null,i=null,r=null;t.url&&(r=t.url.split("?")[0]);var o=t.beforeSend;t.beforeSend=function(t){n=new Date,o&&o.call(this,t)};var a=t.success;t.success=function(o,s){i=new Date;var u=i-n,l=e.getResponseHeader("X-Runtime");!$.benchmarkReported[r]&&t.benchmarkUrl&&$.ajax({url:t.benchmarkUrl,type:"POST",dataType:"json",data:$.extend(t.benchmarkData,{url:r,response_time:u,render_time:l,_method:"PUT"}),success:function(){$.benchmarkReported[r]=!0}}),a&&a.call(this,o,s)};var s=t.complete;return t.complete=function(t){n=null,i=null,s&&s.call(this,t)},e=$.ajax(t)},function(){var t=[].slice,e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};this.$a={add_csrf_header:function(t){return window.$current_user?t.setRequestHeader("X-Public-Secret",$current_user.public_secret):void 0},is_logged_in:function(){return"undefined"!=typeof $current_user},is_owner:function(){return this.is_logged_in()&&"undefined"!=typeof $viewed_user&&$viewed_user.id===$current_user.id},is_admin:function(){return this.is_logged_in()&&$current_user.admin===!0},has_qanda:function(){return this.is_logged_in()&&$current_user.qa===!0},log:function(){return"undefined"!=typeof console&&console.log&&console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):void 0},admin_log:function(){return this.is_admin()?this.log(arguments):void 0},annotate_out_links:function(t,e){return $(""+t+" a.outlink").each(function(){return $(this).attr("data-properties",e)})},decompose_url:function(e){var n,i,r,o,a,s,u,l;return u=e.split("#"),e=u[0],r=2<=u.length?t.call(u,1):[],i=r.join("#"),n=_.chain(i.split("&")).compact().map(function(t){return t.split("=")}).value(),l=e.split("?"),e=l[0],s=2<=l.length?t.call(l,1):[],a=s.join("?"),o=_.chain(a.split("&")).compact().map(function(t){return t.split("=")}).value(),[e,o,n]},build_url:function(t,e,n){var i,r,o;return o=this.decompose_url(t),t=o[0],r=o[1],i=o[2],e&&(r=r.concat(e)),n&&(i=i.concat(n)),r.length>0&&(t=t+"?"+_(r).map(function(t){return t.join("=")}).join("&")),i.length>0&&(t=t+"#"+_(i).map(function(t){return t.join("=")}).join("&")),t},from_hash_url:function(){var t,e,n;return e=window.location.hash.substring(1),t=_.map(e.split("&"),function(t){return t.split("=")}),n=_.reduce(t,function(t,e){return t[e[0]]=e[1],t},{})},ie6:function(){return $.browser.msie&&$.browser.version.match(/^6/)},ie7:function(){return $.browser.msie&&$.browser.version.match(/^7/)},ie8:function(){return $.browser.msie&&$.browser.version.match(/^8/)},supports_local_storage:function(){var t,e;try{return e="test_storage",localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(n){return t=n,!1}},supports_svg:function(){var t;return t="http://www.w3.org/2000/svg",!!document.createElementNS&&!!document.createElementNS(t,"svg").createSVGRect},whenFirst:function(){var t,e,n,i,r;for(e=[].slice.call(arguments,0),n=new $.Deferred,i=0,r=e.length;r>i;i++)t=e[i],t.then(function(){return n.resolve(arguments)});return n},errors_array:function(t){var e,n,i,r;return _.flatten(function(){var o;o=[];for(n in t)r=t[n],o.push(function(){var t,o,a;for(a=[],t=0,o=r.length;o>t;t++)i=r[t],"base"===n?a.push(i):(e=n[0].toUpperCase()+n.slice(1),a.push(""+e+" "+i));return a}());return o}())},is_touch_device:function(){return e.call(window,"ontouchstart")>=0||!!navigator.msMaxTouchPoints},is_mobile:function(){var t;return t=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},is_element_in_viewport:function(t){var e;return e=t.getBoundingClientRect(),e&&e.bottom>=0&&e.right>=0&&e.top<=$(window).height()&&e.left<=$(window).width()},track_internal_click:function(t,e){var n;return this.internal_link(t.target)?(n={path:"/",domain:"."+$domain,expires:this.seconds_from_now(30)},$.cookie("internal_trackable_click",JSON.stringify(e),n)):void 0},internal_link:function(t){return t.href&&t.hostname&&t.hostname.match(new RegExp($domain+"$"))},seconds_from_now:function(t){var e;return e=new Date,e.setTime(e.getTime()+1e3*t),e}}}.call(this);var $auvid,$request_id,$old_request_id,$old_start_time,Academia={set_gmtoffset:function(t){$(function(){$.post(t,{minutes:(new Date).getTimezoneOffset()})})},analytics:function(){var t="auvid",e=$.cookie(t);if(null==e){var n=Math.random(),i=$.sha1(""+$start_time+n);$.cookie(t,i,{path:"/",expires:30,domain:"."+$domain}),$auvid=i}else $auvid=e;$request_id=null==window.$current_user?$.sha1("r_"+$start_time).substr(0,9):$current_user.request_id,this.record_hit_if_logged_out(),$make_live_connection&&this.socket_connect_and_emit(),$.cookie("from_cache","")},record_hit_if_logged_out:function(){$a.is_logged_in()||this.record_hit({referrer:document.referrer,auvid:$auvid,request_id:$request_id})},record_hit:function(t){$.ajax({type:"POST",url:"/record_hit",data:t})},socket_connect_and_emit:function(){require(["http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.8.4/socket.io.min.js"],function(){if("undefined"!=typeof io){if("development"==$rails_env)var t=io.connect("live."+$domain+":82");else var t=io.connect("live."+$domain);t.on("connect",function(){data={a:$auvid,e:(new Date).getTime()-$start_time},"undefined"!=typeof $current_user&&1==$current_user.admin&&$a.log(data),t.emit("r",data)})}})},in_container_or_all:function(t,e){return"undefined"==typeof e?$(t):$(e).find(t)},magicker_default:function(t){var e=this.in_container_or_all("input.magicker-default",t);e.each(function(){$(this).magicker_default($(this).data("magicker-default"))})},magic_defaults:function(t){this.in_container_or_all("input.magic-default",t).each(function(){var t=$(this),e=t.val();e&&(t.focus(function(){t.val()===e&&(t.trigger("magic-default-off"),t.val(""),t.removeClass("magic-default-on"),t.addClass("magic-default-off"))}),t.blur(function(){""===t.val()&&(t.trigger("magic-default-on"),t.val(e),t.removeClass("magic-default-off"),t.addClass("magic-default-on"))}))}),this.in_container_or_all("textarea.magic-default",t).each(function(){var t=$(this),e=t.text(),n=t.attr("rows");e&&(t.focus(function(){(t.val()===e||t.text()===e)&&(t.trigger("magic-default-off"),t.text(""),t.val(""),t.removeClass("magic-default-on"),t.addClass("magic-default-off"))}),t.blur(function(){""===t.val()&&(t.trigger("magic-default-on"),t.text(e),t.val(e),t.attr("rows",n),t.removeClass("magic-default-off"),t.addClass("magic-default-on"))}))}),this.in_container_or_all("form.clear-magic-default",t).each(function(){var t=$(this);t.submit(function(){t.find(".magic-default").each(function(){var t=$(this);t.hasClass("magic-default-on")&&t.val("")})})})},hoverfix:function(t){this.in_container_or_all(".hoverfix",t).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")})},load_async:function(t){var e=this.in_container_or_all(".load_async",t);e.each(function(t,e){var n=$(e),i=n.data("url");i&&$.ajax({url:i,complete:function(t){(200==t.status||304==t.status)&&(n.html(t.responseText).show(),Academia.all_behaviors(n))}})})},textarea_maxlength:function(t){this.in_container_or_all("textarea",t).each(function(){var t=$(this),e=t.attr("maxlength");e&&e>0&&t.keydown(function(){t.val().length>e&&t.val(t.val().substring(0,e))})})},textarea_enter_trigger:function(t){this.in_container_or_all("textarea.enter-trigger",t).each(function(){var t=$(this);t.keypress(function(e){return 13===e.which?(t.parents("form").submit(),!1):!0})})},first_focus:function(t){this.in_container_or_all("input.first-focus, textarea.first-focus",t).focus()},autoexpand:function(t){var e=this.in_container_or_all("textarea.autoexpand",t),n=this.in_container_or_all("textarea.autoexpand_on_focus",t);e.autosize(),n.on("focus click",function(){$(this).autosize()})},tooltips:function(t){var e=this;req("tooltip",function(){e.in_container_or_all(".tooltip",t).tooltip()})},out_links:function(t){this.in_container_or_all("a.outlink",t).click(function(){return Academia.track_click(this.getAttribute("href"),this.getAttribute("data-properties"),!1),!0})},track_click:function(t,e,n){$.ajax({type:"POST",url:"/out_link",data:{url:t,properties:e},async:!!n})},single_submit:function(t){this.in_container_or_all("form.single_submit",t).single_submit()},time_time_ago_time_ago:function(t){this.in_container_or_all("time.time_ago",t).timeago()},retina_images:function(t){this.in_container_or_all("img.2x",t).retina({suffix:"-2x"})},commaize_int:function(t){if(null==t||""==t)return t;var e=[];t=""+t;var n=(""+t).split("");for(n.reverse();n.length>0;){var i=n.splice(0,3);i.reverse(),e.push(i.join(""))}return e.reverse(),e.join(",")},visible_top_banner:function(){$("#top_banner").is(":visible")&&$("body").css({"background-position":"0px 40px"})},visible_top_panel:function(){$("#top_panel").is(":visible")&&$("body").css({"background-position":"0px 78px"})},format_search_result:function(t){var e="",n=t[0],i=t[1],r=t[3],o=t[4],a=t[7],s=t[8],u=r&&parseInt(r,10)>0,l=a&&$.trim(a).length>0;return"User"==i&&(e+=s?"<img src='"+s+"' style='display: none'>":'<img src="'+'//1.academia-assets.com/images/tiny_no_pic.gif?711c5d3087805f6a1369cab512301405'+'" style="display: none">'),e+=n,u&&o&&(e+=" (",u&&(e+=r+" "+o),e+=")"),l&&(e+=" <span class='ac_tag_class'>"+a+"</span>"),"ResearchInterest"==i&&(i="Research Interest"),"University"!=i&&"User"!=i&&"NavigationSearchResult"!=i&&(e+=" <span class='ac_tag_class' style='display: none'>"+i+"</span>"),e},search_autocomplete_initialized:!1,search_autocomplete:function(){if(!Academia.search_autocomplete_initialized){var t=$("#new_search_field"),e=($("#content div"),$("#top_search_loader .tip"),$("#new_search_box_form"));e.bind("submit",function(t){t.preventDefault()}),t.focus(function(){$("#top_search_loader").show(),t.css({borderColor:"#b3b3b3"})}),t.blur(function(){$("#top_search_loader").hide(),t.css({borderColor:"#000"})}),t.autocomplete("/ac_search",{benchmarkUrl:"/ac_search_benchmark",minChars:3,cacheLength:1,matchSubset:!1,delay:10,max:20,width:200,selectFirst:!0,resultsClass:"top_search_results",formatItem:Academia.format_search_result,distractor:"#top_search_loader_gif",scrollHeight:360,form:e,displayItem:function(t){return $h.decodeHTML(t)}}).result(function(e,n){window.location.href=n[6],t.val(""),t.focus()}),Academia.search_autocomplete_initialized=!0}},radio_buton_xor_text_input:function(t,e){var n=$(t),i=$(e);n.change(function(){n.each(function(){this.checked&&i.val("")})}),i.keyup(function(){""!==i.val()&&n.each(function(){this.checked=!1})})},create_feedback_popup:function(){var t=$("#feedback_link");document.URL,t.click(function(t){t.preventDefault(),$w.boxover({iframe:"/feedback?boxy=iframe&url="+document.URL,title:"Send us Feedback",height:340,width:630})})},all_behaviors:function(t){Academia.magicker_default(t),Academia.magic_defaults(t),Academia.hoverfix(t),Academia.load_async(t),Academia.textarea_maxlength(t),Academia.textarea_enter_trigger(t),Academia.autoexpand(t),Academia.tooltips(t),Academia.first_focus(t),Academia.out_links(t),Academia.single_submit(t),Academia.time_time_ago_time_ago(t),Academia.retina_images(t),Academia.search_autocomplete(),Academia.visible_top_banner(),Academia.visible_top_panel(),Follow.init(t)}};$(document).ready(function(){Academia.all_behaviors(),Academia.analytics()});var JSRouteParser={components:[],callback:null,extraParams:{},create:function(t,e,n){var i=$x.object(this);return i.components=t,i.callback=e,null!==n&&(i.extraParams=n),i},run:function(t){var e=_.compact(t.split(/\//));return this.parse(this.components,e,this.extraParams)},parse:function(t,e,n){var i,r,o,a=1,s=t[0],u=e[0],l=this,c=function(){return l.callback(n),n};if("undefined"==typeof n&&(n={}),0===t.length||0===e.length)return 0===t.length&&0===e.length?c():!1;if(i=s.match(/^(\*{1,2})(\w*)$/))if(o=2===i[1].length,r=i[2],o){if(1===t.length)return"undefined"!=typeof r&&(n[r]=e.join("/")),c()}else"undefined"!=typeof r&&(n[r]=u);else if(s!==u)return!1;return this.parse(t.slice(1,t.length),e.slice(a,e.length),n)}},JSRouteGenerator={components:[],extraParams:{},create:function(t,e){var n=$x.object(this);return n.components=t,null!==e&&(n.extraParams=e),n},run:function(t){var e=$x.cloneWithoutMethods(t),n=$x.cloneWithoutMethods(this.extraParams);return this.generate(this.components,n,e,"")},generate:function(t,e,n,i){var r,o,a,s=t[0],u=function(){return i},l=function(t){i=i+"/"+t};if(0===t.length){var c=$x.getOwnPropertiesWithoutMethods(n),h=$x.getOwnPropertiesWithoutMethods(e);if(0===c.length)return u();if(0===h.length)return!1;var p,_;for(p=0;p<c.length;p++)if(_=c[p],e[_]===n[_])return delete e[_],delete n[_],this.generate([],e,n,i);return!1}if(r=s.match(/^(\*{1,2})(\w*)$/)){if(o=2===r[1].length,a=r[2],"string"===a)return!1;if("undefined"==typeof n[a])return!1;if(l(n[a]),delete n[a],o)return 0===$x.getOwnPropertiesWithoutMethods(n).length?u():!1}else l(s);return this.generate(t.slice(1,t.length),e,n,i)}},JSRoutes={parsers:[],generators:[],listeners:[],last_hash_path_set:null,hash_path_setter:null,register:function(t){t(this.connect)},listen:function(t){this.listeners.push(t)},clear:function(){this.parsers=[],this.generators=[]},connect:function(t,e,n){n||(n={});var i=JSRoutes.splitPathSpec(t);JSRoutes.parsers.push(JSRouteParser.create(i,e,n)),JSRoutes.generators.push(JSRouteGenerator.create(i,n))},splitPathSpec:function(t){var e=_.compact(t.split(/\//));return e},getHashPath:function(){var t=document.location.hash;return t?decodeURIComponent(t.replace(/^\#/,"")):""},setHashPath:function(t){t!==!1&&(JSRoutes.last_hash_path_set=t,null==this.hash_path_setter?document.location.hash="#"+t:this.hash_path_setter(t))},dispatchPath:function(t,e){var n,i,r,o=!1;for(i=0;i<this.parsers.length;i++)if(r=this.parsers[i],o=r.run(t)){n=!0;break}return n?this.callListeners(o,t,!0):e&&e(t),n},dispatch:function(){return this.dispatchPath(this.getHashPath())},dispatchOrCall:function(t){return this.dispatchPath(this.getHashPath(),t)},generatePath:function(t){var e,n,i;for(e=0;e<this.generators.length;e++)if(n=this.generators[e],i=n.run(t),i!==!1)return this.callListeners(t,i,!1),i;return!1},anchor:function(t){this.setHashPath(this.generatePath(t))},callListeners:function(t,e,n){for(var i=0;i<this.listeners.length;i++)this.listeners[i](t,e,n)},go:function(t){this.setHashPath(t),this.dispatch()},dispatchIfChanged:function(){var t=this.getHashPath();this.last_hash_path_set!==t&&this.go(t)}};JSRoutes.parseUri=function(t){for(var e=JSRoutes.parseUri.options,n=e.parser[e.strictMode?"strict":"loose"].exec(t),i={},r=14;r--;)i[e.key[r]]=n[r]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(t,n,r){n&&(i[e.q.name][n]=r)}),i},JSRoutes.parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var Follow={num_followed:0,min_to_follow:0,init:function(t){var e;e=null==t?$(document):t.jquery?t:$(t),e.find(".follow_button").follow_button(),$(".follow_btn, .follow_btn_big, .follow_btn_big_170, .follow_user").hover(function(){var t="#"+$(this).attr("id")+"_hover";$(t).stop(),$(t).show(),$(t).animate({marginLeft:"-306px",opacity:"1.0"},300)},function(){var t="#"+$(this).attr("id")+"_hover";$(t).stop(),$(t).animate({marginLeft:"-300px",opacity:"0.0"},300),$(t).hide()}),e.find(".follow_btn_link").one("click",function(){var t=$(this),e=t.parents(".follow-me-button"),n=e.attr("rel"),i=parseInt(t.attr("rel"),10),r=e.attr("id"),o=e.data("viaship-group-id");return Follow.follow(n,i,$current_user.public_secret,r,null,o)}),e.find(".user_strip .follow_user a").click(function(){var t=$(this),e=t.attr("data-id"),n=t.attr("rel"),i=t.parent().attr("id"),r=t.data("viaship-group-id"),o="#"+i.replace("follow_me_message_","unfollow_me_");return $(o).fadeIn(),Follow.follow(n,e,$current_user.public_secret,i,null,r)}),e.find(".clearfix .unfollow_btn").click(function(){var t=$(this),e=t.attr("data-uid");t.fadeOut(),Follow.unfollow_user(e)}),e.find(".user_strip .unfollow_user a").click(function(){var t=$(this),e=t.attr("data-id"),n=t.parent().attr("id");return n="#"+n.replace("unfollow_me_","follow_me_message_"),Follow.unfollow_user(e,function(){Follow.decrement_num_followed()}),$(n).fadeIn(),t.parent().fadeOut(),!1})},follow:function(t,e,n,i,r,o){return i||(i="follow-me"),r?"fade_in_unfollow"==r?$("#"+i).fadeOut("fast",function(){$(".unfollow_btn_big").fadeIn()}):$("#"+i).hide():$("#"+i).fadeOut("fast"),$.post("/followings",{"following[followee_id]":e,_public_secret:n,viaship_group_id:o},function(t){t.success?Follow.increment_num_followed():(t.message&&alert(t.message),$(".unfollow_btn_big").hide(),$("#"+i).show()),t.redirect&&(document.location=t.redirect)},"json"),!1},unfollow:function(t,e,n){return $w.flash("You are no longer following "+t,{nextTo:$("#"+e)},function(){$("#"+e).fadeOut()}),Follow.unfollow_user(n),!1},follow_user:function(t,e){Follow.post_follow(t,"POST",e)},unfollow_user:function(t,e){Follow.post_follow(t,"DELETE",e)},post_follow:function(t,e,n){$.ajax({url:$r.api_v0_user_following_index_path({user_id:t,subdomain_param:"api"}),type:"POST",data:{_method:e},beforeSend:$a.add_csrf_header,success:function(){n&&n()}})},show_login_or_signup:function(t){return $("#"+t).slideDown("fast"),!1},show_signup_to_follow:function(t,e){$.cookie("follow",t,{path:"/",domain:"."+$domain});var n="//"+$domain+"/signup_wall",i=[];i.push(["user_source","follow"]),$w.boxover({iframe:$a.build_url(n,i),title:"Please sign up to follow "+e,loader_image_url:"/images/friend_finder/loading2.gif"})},show_follow_popover:function(){if(!($a.ie6()||$a.ie7()||$a.ie8()||$a.is_mobile())){var t=$.cookie("saw_follow_popover")||0,e=(new Date).getTime()/1e3;if(!(t>e-864e3)){var n=$(".profile-pop-over"),i=$("#overlay_background");n.show(),i.show(),$.cookie("saw_follow_popover",e,{domain:$domain,path:"/"})}}},hide_follow_popover:function(){var t=$(".profile-pop-over"),e=$("#overlay_background");t.hide(),e.hide(),$("body").removeClass("top_popover")},increment_num_followed:function(){return this.num_followed+=1,this.update_following_progress(),this.num_followed},decrement_num_followed:function(){return this.num_followed-=1,this.update_following_progress(),this.num_followed},update_following_progress:function(){if(0!=this.min_to_follow){var t=$(".following_progress_js.progress"),e=$(".following_progress_js.progress .bar"),n=$(".following_progress_js.progress .message"),i=$("a.next_link");if(e&&i){var r=this.min_to_follow-this.num_followed,o=0==this.num_followed?0:100*(this.num_followed/this.min_to_follow);if(0==this.num_followed&&(o="5"),e.css("width",o+"%"),0>=r)i.removeClass("disabled"),i.unbind("click"),i.prev(),n.text("Continue"),t.addClass("clickable"),t.click(function(){i[0].click()}),i.hasClass("tooltip")&&i.attr("data-original-title","");else{var a=r+" "+(1==r?"person":"people");a=0==this.num_followed?"Select "+a+" to follow":"Just "+r+" more",n.text(a),i.addClass("disabled"),i.click(function(){return!1}),t.removeClass("clickable"),t.unbind("click"),i.hasClass("tooltip")?i.attr("data-original-title",a+" before continuing"):(i.addClass("tooltip"),i.attr("title",a+" before continuing"))}}}}};$(document).on("click","#main-follow-button .follow",function(){if($a.is_logged_in()){var t=$("#main-follow-button"),e=t.find(".follow"),n=t.find(".unfollow");e.fadeOut(),n.show(),Follow.follow_user($viewed_user.id)}else Follow.show_signup_to_follow($viewed_user.id,$viewed_user.first_name)}),$(document).on("click","#main-follow-button .unfollow",function(){var t=$("#main-follow-button"),e=t.find(".follow"),n=t.find(".unfollow");n.fadeOut(),e.show(),Follow.unfollow_user($viewed_user.id)}),function(){var t;t=function(t){var e;return e=t.parents("*[data-hover-menu]").find(".hover_menu_row"),e.removeClass("hovered"),t.addClass("hovered")},$(document).on("hover","*[data-hover-menu]",function(t){var e;return e=$(t.currentTarget),"mouseenter"===t.type?(e.data("hover-menu-on",!0),e.find(".hover_menu").fadeIn(100)):(e.data("hover-menu-on",!1),_.delay(function(){return e.data("hover-menu-on")?void 0:e.find(".hover_menu").fadeOut(100)},200))}),$(document).on("hover","*[data-hover-menu=first]",function(e){var n;return n=$(e.target),n.is(".hover_menu")||n.parents().is(".hover_menu")?void 0:t($($(e.currentTarget).find(".hover_menu_row").get(0)))}),$(document).on("hover","*[data-hover-menu] .hover_menu_row",function(e){return"mouseenter"===e.type?t($(e.currentTarget)):void 0})}.call(this),function(){var t,e;t=function(t,e,n,i){return t.trigger("ajax:success",[e,n,i]),null!=(null!=e?e.redirect:void 0)?document.location=e.redirect:void 0},e=function(e,n){var i;return null==n&&(n={}),i=_.extend({},n,{_public_secret:$current_user.public_secret}),$.ajax({url:e.attr("href"),type:"POST",dataType:"json",data:i,success:function(n,i,r){return t(e,n,i,r)
}})},$(document).on("click","a[data-method='delete']",function(t){var n,i;return n=$(t.currentTarget),i=n.data("confirm")||"Are you sure?",$w.confirm(i,{nextTo:n},function(){return e(n,{_method:"DELETE"})}),!1}),$(document).on("click","a[data-method='post']",function(t){var n,i;return n=$(t.currentTarget),i=n.data("confirm"),i?$w.confirm(i,{nextTo:n},function(){return e(n)}):e(n),!1})}.call(this),function(){var t;t=function(t){var e,n,i;return e=t.closest(t.data("container")),i=e.find(t.data("show")),n=e.find(t.data("hide")),{show:i,hide:n}},$(document).on("click","a[data-more-link-behavior=true]",function(t){var e;return t.preventDefault(),e=$(t.target),e.trigger("show_more")}),$(document).on("show_more","*",function(e){var n,i,r;return e.stopPropagation(),r=t($(e.target)),i=r.show,n=r.hide,n.addClass("hidden"),n.hide(),i.removeClass("hidden"),i.show()}),$(document).on("show_less","*",function(e){var n,i,r;return e.stopPropagation(),r=t($(e.target)),i=r.show,n=r.hide,i.addClass("hidden"),i.hide(),n.removeClass("hidden"),n.show()})}.call(this),function(){var t,e,n,i,r,o,a={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};$x.ensureNamespace("Oauth"),c.Oauth.Button=function(){function t(t,e){this.selector=t,this.options=null!=e?e:{},this.el=$(this.selector),this.redirect_url=this.el.closest(".signup_wall").length>0?parent.location.href:/\/(login|signup)/.test(document.location.pathname)?"/":document.location.href,this.spinner_selector=this.options.spinner_selector?this.options.spinner_selector:this.selector,$(_.bind(this.initialize,this))}return t.prototype.initialize=function(){var t=this;return this.el.click(_.debounce(function(e){return e.preventDefault(),t.handle_click()},2e3,!0))},t.prototype.handle_click=function(){},t.prototype.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.show_spinner=function(){var t;return t=Spinner.small_white_hide_contents($(this.spinner_selector)),$("."+t.el.className).css({left:"",top:"5px"})},t.prototype.provider=function(){},t.prototype.pretty_provider=function(){return this.capitalize(this.provider())},t}(),c.Oauth.Button.Login=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.handle_click=function(){var t=this;return this.prev_html=this.el.html(),this.show_spinner(),NewRegistrationController.oauth_login(this.provider(),function(){return window.parent!==window?window.parent.location.reload():window.location.href=t.redirect_url},function(e){var n,i;return null!=(null!=e?null!=(i=e[1])?i.email:void 0:void 0)?($("input#login").val(e[1].email),n="That email has already been registered, but not "+t.pretty_provider()+"-connected.<br/>                      Please enter the password to login."):n="No matching account registered.<br/>                      Please <a href='/signup'>sign up</a> first.",t.el.closest("[class*=login]").html(n)},{negative_callback:function(){var e;return t.el.html(t.prev_html),e=t.pretty_provider()+" login cancelled. Try again.",$("#connect_error").remove(),$("<p id='connect_error' class=''><i class='icon-warning-sign'/>"+e+"</p>").insertBefore($(".facebook-button-login").parent())}})},n}(c.Oauth.Button),c.Oauth.Button.Login.Facebook=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.provider=function(){return"facebook"},n}(c.Oauth.Button.Login),c.Oauth.Button.Login.Google=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.provider=function(){return"google"},e}(c.Oauth.Button.Login),c.Oauth.Button.Connect=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(){return this.options.track&&(this.notifier=new c.Server.Notification("sutd")),e.__super__.initialize.apply(this,arguments)},e.prototype.handle_click=function(){var t=this;return this.prev_html=this.el.html(),this.show_spinner(),this.notify(this.event_type()),NewRegistrationController.oauth_register(this.provider(),this.redirect_url,this.el,{success_callback:function(){return t.options.track?t.notifier.notify({event_type:t.event_type()+"_complete",auvid:$auvid}):void 0},negative_callback:function(){var e;return t.el.html(t.prev_html),e=t.pretty_provider()+" connect cancelled. Try again.",$("#connect_error").remove(),$("<p id='connect_error' class=''><i class='icon-warning-sign'/>"+e+"</p>").insertBefore($(".facebook-button-connect").parent()),t.notify(t.event_type()+"_cancelled")}})},e.prototype.notify=function(t){return this.options.track?this.notifier.notify({event_type:t,auvid:$auvid}):void 0},e.prototype.event_type=function(){return"oauth_button"},e}(c.Oauth.Button),c.Oauth.Button.Connect.Facebook=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.provider=function(){return"facebook"},e.prototype.event_type=function(){return"fb_connect"},e}(c.Oauth.Button.Connect),c.Oauth.Button.Connect.Google=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.provider=function(){return"google"},e.prototype.event_type=function(){return"google_connect"},e}(c.Oauth.Button.Connect)}.call(this),function(){$(document).on("resize_boxy",function(t,e){var n;return n=_.find(Widgets.Base.open_widgets||[],function(t){return"BoxOver"===t.widget_name}),null!=e&&null!=n?n.set_height(e):void 0})}.call(this),$(function(){$("input[type=checkbox].select_all").each(function(t,e){var n=null;if($(e.className.split(" ")).each(function(t,e){0===e.indexOf("select_all_group_")&&(n=e)}),n){var i=$("input[type=checkbox]."+n).not(e);$(e).change(function(){i.each(function(t,n){n.checked=e.checked})}),i.change(function(){var t=!0;i.each(function(e,n){t=t&&n.checked}),e.checked=t})}})});var $w={flash:function(t,e,n){"undefined"==typeof e&&(e={}),e.message=t;var i=Widgets.Notification.create(e);i.flash(n,e)},confirm:function(t,e,n){"undefined"==typeof e&&(e={});var i;e.message=t,e.onYes=function(){i.fadeOutAndRemove("fast",n)},i=Widgets.YesNo.create(e),i.fadeIn()},boxover:function(t){var e=Widgets.BoxOver.create(t);return $("#overlay_background").fadeTo("fast",.6),e.show(),e},boxover_link:function(t,e,n){var i=$(t),r=i.attr("href");r+=r.match(/\?/)?"&boxy=iframe":"?boxy=iframe";var o=$(window).height(),a=Widgets.BoxOver.DEFAULT_TOP;n>o-2*a&&(a=10,n>o-66&&(n=o-66));var s={title:i.text(),iframe:r,width:e,height:n,top:a,loader_image_url:'//2.academia-assets.com/images/friend_finder/loading2.gif?268dddb59b19d4fd7d0be83e67b419e2'};return $w.boxover(s)},prompt_login:function(t){var e=Widgets.Login.create(t);return e.show(),e},warning_bubble:function(t,e){var n;return e.message=t,n=Widgets.WarningBubble.create(e),n.fadeIn(),n},confirm_bubble:function(){var t,e;return"string"==typeof arguments[0]&&"string"==typeof arguments[1]?(e=arguments[2]||{},e.header=arguments[0],e.message=arguments[1],e.callback=arguments[3]):(e=arguments[1]||{},e.header=arguments[0],e.message=null,e.callback=arguments[2]),t=Widgets.ConfirmBubble.create(e),t.fadeIn(),t}},Widgets={};Widgets.Base={parent:null,open_widgets:[],inherit:function(t){var e=$x.extend($x.object(this),t);return e.parent=this,e},create:function(t){var e=$x.object(this);return e.init(t),e},target_element:null,init:function(t){this.target_element=t.nextTo;var e=t.down||10,n=t.along||0,i=$(this.target_element).offset();this.offset={left:i.left+n,top:i.top+e}},dom_element:null,j_element:null,definition:function(){return["div.base-widget"]},build:function(){this.dom_element=JSML.transform(this.definition()),this.j_element=$(this.dom_element),this.j_element.hide()},insert:function(){document.body.appendChild(this.dom_element)},remove:function(){var t=this.dom_element;t?t.parentNode.removeChild(t):$a.log("el wasn't defined")},position:function(){this.target_element&&this.j_element.css({position:"absolute",left:this.offset.left,top:this.offset.top})},show:function(){this.prepare(),this.j_element.show(),this.add_to_open_widgets()},fadeIn:function(){this.prepare(),this.j_element.fadeIn(),this.add_to_open_widgets()},hide:function(){$("#overlay_background").hide(),this.j_element.hide(),this.cleanup(),this.remove_from_open_widgets(),"function"==typeof this.after_hide_callback&&this.after_hide_callback()},fadeOut:function(){var t=this;this.j_element.fadeOut(function(){t.cleanup(),t.remove_from_open_widgets(),"function"==typeof t.after_hide_callback&&t.after_hide_callback()})},shake:function(t){t="undefined"!=typeof t?t:"5px";var e=this;e.j_element.animate({marginLeft:"-"+t},100,function(){e.j_element.animate({marginLeft:t},100,function(){e.j_element.animate({marginLeft:"0px"},100)})})},hide_all:function(){for(var t=Widgets.Base.open_widgets.slice(),e=0;e<t.length;e++)t[e].hide()},add_to_open_widgets:function(){Widgets.Base.open_widgets.push(this)},remove_from_open_widgets:function(){var t=Widgets.Base.open_widgets.indexOf(this);t>=0&&Widgets.Base.open_widgets.splice(t)},prepare:function(){this.insert(),this.position()},cleanup:function(){this.j_element.html(""),this.remove()},flash:function(t,e){"undefined"==typeof e&&(e={});var n=e.fadeInMS||100,i=e.visibleMS||400,r=e.fadeOutMS||400,o=this;o.prepare(),o.j_element.fadeIn(n,function(){setTimeout(function(){o.j_element.fadeOut(r,function(){o.cleanup(),t&&t()})},i)})},bind_fade_to_events:function(){var t=this,e=$.map(arguments,function(t){return"string"==typeof t[0]?$(t[0]):t[0]}),n=$.map(arguments,function(t){return t[1]}),i=function(){$.each(e,function(t,e){e.unbind(n[t],i)}),"none"!==t.j_element.css("display")&&t.fadeOut()};$.each(e,function(t,e){e.bind(n[t],i)})}},Widgets.Notification=Widgets.Base.inherit({message:"",init:function(t){this.parent.init(t),this.message=t.message,this.build()},definition:function(){return[".notification-widget",[".notification-widget-message",this.message]]}}),Widgets.Login=Widgets.Base.inherit({message:"",init:function(t){this.parent.init(t),this.message=t.message,this.build()},definition:function(){return[".notification-widget",[".notification-widget-message","Please ",["a",{href:"/login"},"log in"]," or ",["a",{href:"/signup"},"sign up"]," ",this.message]]}}),Widgets.WarningBubble=Widgets.Base.inherit({init:function(t){this.parent.init(t),this.message=t.message,this.alignment=t.alignment||"left",this.build()},definition:function(){return[".warning_bubble",["img",{src:'//3.academia-assets.com/images/tiny_arrow.gif?a41c63f469408fefcccd90d0cf558a1b',style:this.alignment+": 10px"}],this.message]},position:function(){var t,e=this.j_element,n=this.target_element,i=this.alignment,r=n.offset().top+n.outerHeight()+9+"px";t="left"===i?n.offset().left+"px":n.offset().left+n.outerWidth()-e.outerWidth()+"px",e.css({display:"none",position:"absolute",left:t,top:r})},shake_it:function(){var t=this.j_element;t.animate({marginLeft:"-5px"},100,function(){t.animate({marginLeft:"5px"},100,function(){t.animate({marginLeft:"0px"},100)})})}}),Widgets.ConfirmBubble=Widgets.Base.inherit({header:"Are you sure?",yes:"Confirm",no:"Cancel",init:function(t){this.parent.init(t),this.header=t.header?[".bubble_header",t.header]:"",this.message=t.message?[".bubble_message",t.message]:"",this.alignment=t.alignment||"left",this.callback=t.callback||function(){},this.build()},definition:function(){var t=this;return[".warning_bubble",["img",{src:'//3.academia-assets.com/images/tiny_arrow.gif?a41c63f469408fefcccd90d0cf558a1b',style:t.alignment+": 10px"}],t.header,t.message,[".confirm_cancel",["a.no",{href:"#",onclick:function(){return t.fadeOut(),!1}},t.no]," ",["a.yes",{href:"#",onclick:function(){return t.fadeOut(),t.callback(),!1}},t.yes]]]},position:function(){var t,e=this.j_element,n=this.target_element,i=this.alignment,r=n.offset().top+n.outerHeight()+9+"px";t="left"===i?n.offset().left+"px":n.offset().left+n.outerWidth()-e.outerWidth()+"px",e.css({display:"none",position:"absolute",left:t,top:r})}}),Widgets.BoxOver=Widgets.Base.inherit({widget_name:"BoxOver",url:null,internal_definition:null,type:null,title:null,width:null,height:null,top:null,positioning:null,loader_image_url:null,loader_image:null,DEFAULT_TOP:75,DEFAULT_WIDTH:500,DEFAULT_HEIGHT:300,init:function(t){"undefined"!=typeof t.ajax&&(this.type="ajax",this.url=t.ajax),"undefined"!=typeof t.iframe&&(this.type="iframe",this.url=t.iframe),"undefined"!=typeof t.dynamic&&(this.type="dynamic",this.internal_definition=t.dynamic),"undefined"!=typeof t.title&&(this.title=t.title),this.width="undefined"!=typeof t.width?parseInt(t.width,10):this.DEFAULT_WIDTH,this.height="undefined"!=typeof t.height?parseInt(t.height,10):this.DEFAULT_HEIGHT,this.top="undefined"!=typeof t.top?parseInt(t.top,10):this.DEFAULT_TOP,"undefined"!=typeof t.loader_image_url&&(this.loader_image_url=t.loader_image_url,this.loader_image=$(new Image),this.loader_image.attr("src",this.loader_image_url)),"undefined"!=typeof t.after_hide&&(this.after_hide_callback=t.after_hide),this.onclose="undefined"!=typeof t.onclose?t.onclose:function(){},"absolute"==t.positioning?(this.positioning="absolute",this.top+=$(window).scrollTop()):this.ensure_all_visible(),this.build()},ensure_all_visible:function(){var t=$(window).scrollTop(),e=$(window).height(),n=this.j_element,i=n?n.offset().top-t:this.top,r=n?n.height():this.height;i+r>e?(this.positioning="absolute",this.top+=t):this.positioning="fixed",this.j_element&&this.j_element.css({position:this.positioning,top:this.top})},content_width:function(){return this.width},content_height:function(){return this.height},set_height:function(t,e,n){var i=this,r=i.j_element.find(".container_title_bar").height();this.height=t,e||(e="fast");var o=function(){i.j_element.height(t+r),"fixed"==i.positioning&&i.ensure_all_visible(),n&&"function"==typeof n&&n()};"iframe"===this.type?i.j_element.find("iframe").animate({height:""+i.height+"px"},e,function(){i.j_element.css({height:""+i.height+"px"}),i.j_element.find("table").css({height:""+i.height+"px"}),o()}):i.j_element.animate({height:""+i.height+"px"},e,o)},position:function(){var t=this.j_element.width();this.width&&(t=this.width);var e=$(document).width();this.j_element.css({position:this.positioning,zIndex:100,left:""+(e-t)/2+"px",top:""+this.top+"px",height:""+this.height+"px",width:""+t+"px"}),"iframe"===this.type&&(this.j_element.find("table").css({width:""+this.width+"px",height:""+this.height+"px"}),this.j_element.find("iframe").css({width:""+this.content_width()+"px",height:""+this.height+"px"}))},show:function(){var t=this,e=$("#overlay_background");if("ajax"===t.type)t.j_element.find(".container_content").html(""),$.get(t.url,function(n){var i=document.createElement("div");i.innerHTML=n,t.j_element.find(".container_content").append(i),t.j_element.find(".boxover_widget_close").click(function(){return e.fadeOut("fast"),t.hide(),t.onclose(),!1}),t.j_element.find(".boxover_widget_close_and_dispatch").click(function(){return t.hide(),JSRoutes.dispatchPath(this.href.replace(/^.*\#/,"")),!0}),t.prepare(),t.position(),t.j_element.show(),t.add_to_open_widgets()});else if("iframe"===t.type){t.j_element.find(".container_content").html("");var n=$(document.createElement("iframe"));n.attr("src",t.url),t.j_element.find(".container_content").append(n),t.j_element.find(".boxover_widget_close").click(function(){return e.fadeOut("fast"),t.hide(),t.onclose(),!1}),t.prepare(),t.position(),t.j_element.show(),t.add_to_open_widgets(),t.loader_image_url&&(t.show_wait_view(),n.load(function(){t.show_content_view()}))}else"dynamic"===t.type&&(t.j_element.find(".boxover_widget_close").click(function(){return e.fadeOut(),t.hide(),t.onclose(),!1}),t.prepare(),t.position(),$("html,body").animate({scrollTop:0},400),t.j_element.show(),t.add_to_open_widgets())},show_wait_view:function(){var t=this;t.j_element.find(".container_content").hide();var e=t.j_element.find(".container_wait_content");e.css({height:""+t.height+"px","background-color":"#ffffff"});var n=this.loader_image.height()||12,i=this.loader_image.width()||40;e.append(this.loader_image),this.loader_image.css({"padding-top":""+t.content_height()/2-n/2+"px","padding-left":""+t.content_width()/2-i/2+"px"}),e.show()},show_content_view:function(){var t=this;t.j_element.find(".container_wait_content").hide(),t.j_element.find(".container_content").show()},definition:function(){var t=this,e=function(){var e="";return t.internal_definition&&(e=t.internal_definition),null!==t.title?["div.container_center",{valign:"top"},[".container_title_bar",[".container_close.boxover_widget_close",["i",{"class":"icon icon-remove icon-dark"},""]],[".container_title",t.title]],[".container_content",e],[".container_wait_content",""]]:["div.container_content",{valign:"top"},e]};return["#boxover_widget",e()]},hide_all_and_redirect_to:function(t){this.hide_all(),document.location=t}}),Widgets.YesNo={message:"Are you sure?",yes:"Confirm",no:"Cancel",create:function(t){function e(){}e.prototype=this;var n=new e;if(t.message&&(n.message=t.message),t.yes&&(n.yes=t.yes),t.no&&(n.no=t.no),t.onYes&&(n.onYes=t.onYes),t.onNo&&(n.onNo=t.onNo),t.nextTo){n.target=t.nextTo;var i=t.down||20,r=t.along||0,o=$(n.target).offset();n.offset={left:o.left+r,top:o.top+i}}else if(t.inCenterOf){n.target=t.inCenterOf;var a=$(n.target),o=a.offset();n.dimensions={width:a.width()/2,height:a.height()/2},n.offset={left:o.left+(a.width()-n.dimensions.width)/2,top:o.top+(a.height()-n.dimensions.height)/2}}return n.raw_el=JSML.transform(["div.yes-no-widget",["div.yes-no-widget-message",n.message],["div.yes-no-widget-buttons",["img.yes-no-spinner",{src:'//0.academia-assets.com/images/spinner.gif?03ce3dcc84af110e9da8699a841e5200',style:"display: none;"}]," ",["a.no",{href:"#",onclick:function(){return n.onNo.apply(n),!1}},n.no]," ",["a.yes",{href:"#",onclick:function(){return n.onYes.apply(n),!1}},n.yes]]]),n.j_el=$(n.raw_el),n.j_el.css({position:"absolute",left:n.offset.left,top:n.offset.top,"z-index":1e5}),n.dimensions&&n.j_el.css({width:""+n.dimensions.width+"px",height:""+n.dimensions.height+"px"}),n.j_el.hide(),document.body.appendChild(n.raw_el),n},waiting:function(t){t?this.j_el.find(".yes-no-spinner").show():this.j_el.find(".yes-no-spinner").hide()},onNo:function(){return this.fadeOutAndRemove("fast"),!1},fadeIn:function(){this.j_el.fadeIn("fast")},fadeOutAndRemove:function(t,e){var n=this.j_el;n.fadeOut(t,function(){n.remove()}),e&&e()}};var JSML={transform:function(t){var e,n,i=t.shift();i=i.replace(/#([^.]+)/,function(t,n){return e=n,""}),i=i.replace(/\.([^#]+)/,function(t,e){return n=e.replace("."," ","g"),""}),""===i&&(i="div");var r=document.createElement(i);e&&r.setAttribute("id",e),n&&(r.setAttribute("class",n),r.setAttribute("className",n));for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];if(a.constructor===String)r.appendChild(document.createTextNode(a));else if(a.constructor===Array)r.appendChild(JSML.transform(a));else for(var s in a){var u=a[s];if(u.constructor===Function)r[s]=u;else if(u.constructor===String)r.setAttribute(s,a[s]),"class"===s?r.setAttribute("className",a[s]):"style"===s&&r.style&&r.style.setAttribute&&r.style.setAttribute("cssText",a[s]);else{var l="";for(var c in u)l+=c+": "+u[c]+"; ";r.setAttribute(s,l)}}}return r}};(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=[].slice;$w.modal_box=function(t,e){return null==e&&(e={}),new Widgets.ModalBox(t).show(e)},Widgets.ModalBox=function(){function n(t){this._handle_window_keyup=e(this._handle_window_keyup,this);var n=this;this.title=t.title||"",this.contents=t.contents||"",this.width=t.width||"600px",this.after_show=t.after_show,this.close_on_esc=null!=t.close_on_esc?t.close_on_esc:!0,this._adjust_top_margin_throttled=_.throttle(function(){return n._adjust_top_margin()},200)}return n.prototype.template=_.template("    <div class=modal_overlay>      <div class=modal_overlay_box>        <div class=modal_title_bar>          <%= title %>          <i class='icon icon-remove'></i>        </div>        <div class='modal_contents clearfix'></div>      </div>    </div>"),n.prototype.show=function(e){var n=this;return $("#overlay_background").fadeIn(100,function(){return n.$el=$(n.template({title:t(n.title,e)})),n.$el.find(".modal_contents").append(t(n.contents,e)),n.$el.find(".modal_overlay_box").css({width:n.width}),$(window).on("keyup",n._handle_window_keyup),$(window).on("resize",n._adjust_top_margin_throttled),$("body").addClass("no_scroll"),$("body").append(n.$el),n._adjust_top_margin(),n._bind_events(),"function"==typeof n.after_show?n.after_show(n):void 0}),this},n.prototype.hide=function(){var t=this;return this.$el.hide(),$("#overlay_background").fadeOut(200,function(){return t.$el.remove(),$(window).off("keyup",t._handle_window_keyup),$(window).off("resize",t._adjust_top_margin_throttled),$("body").removeClass("no_scroll")})},n.prototype._handle_window_keyup=function(t){return 27===t.keyCode&&this.close_on_esc?(t.preventDefault(),t.stopPropagation(),this.hide()):void 0},n.prototype._adjust_top_margin=function(){var t,e,n,i;return t=this.$el.find(".modal_overlay_box"),e=t.outerHeight(),i=$(window).height(),0===e?setTimeout(this._adjust_top_margin,200):(n=Math.max((i-e)/2,50),t.css({marginTop:""+n+"px"}))},n.prototype._bind_events=function(){var t=this;return this.$el.on("click",function(e){return $(e.target).is(t.$el)?t.hide():void 0}),this.$el.on("click",".modal_title_bar i",function(){return t.hide()}),this.$el.on("resize_modal",function(e){return e.stopPropagation(),t._adjust_top_margin()}),this.$el.on("hide_modal",function(e){return e.stopPropagation(),t.hide()})},n}(),t=function(){var t,e;return e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],"function"==typeof e?e.apply(null,t):e}}).call(this),function(){this._Base=function(){function t(){}return t.prototype.on=function(t,e){return null==this._events&&(this._events={}),this._events[t]?this._events[t].push(e):this._events[t]=[e]},t.prototype.notify=function(t){return null==this._events&&(this._events={}),this._events[t]?_.each(this._events[t],function(t){return t()}):void 0},t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};this._BaseController=function(t){function n(t){var e=this;this.options=null!=t?t:{},$(function(){return _.defaults(e.options,e.default_options),e._events={},e._init_container(e.options.container),e._init_elements(e.options.elements),e._init_listeners(e.options.listeners),e.initialize(),null!=e.options.after_initialize?e.options.after_initialize.call(e,e):void 0})}return e(n,t),n.prototype._init_container=function(t){return this.container=_.isString(t)?$(t):t},n.prototype._init_elements=function(t){var e=this;return this.elements={},null!=t?_.each(t,function(t,n){return e.elements[n]=null!=e.container?e.container.find(t):$(t)}):void 0},n.prototype._init_listeners=function(t){var e=this;return _.each(t,function(t,n){return e.on(n,t)})},n.prototype.default_options={},n.prototype.initialize=function(){},n}(_Base)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};this._BaseModel=function(t){function n(t){this.data=null!=t?t:{},_.defaults(this.data,this.default_data),this._dirty=[],this.initialize()}return e(n,t),n.prototype.update=function(t,e){var n,i=this;return _.isString(t)&&(n={},n[t]=e,t=n),_.each(t,function(t,e){return i.data[e]=t,i._dirty.push(e)}),this.data},n.prototype.mark_clean=function(){return this._dirty=[],!0},n.prototype.dirty=function(t){return _.contains(this._dirty,t)},n.prototype.dirty_data=function(){var t,e=this;return t={},_.each(this.data,function(n,i){return e.dirty(i)?t[i]=n:void 0}),t},n.prototype.default_data={},n.prototype.initialize=function(){},n}(_Base)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};this._BaseView=function(t){function n(t,e){this.options=null!=t?t:{},this.data=null!=e?e:{},_.defaults(this.options,this.default_options),_.defaults(this.data,this.default_data),this._events={},this._template=_.template(this.template),this.id=_.uniqueId(this.options.id_prefix+"_"),this.init_container(),this.initialize()}return e(n,t),n.prototype.init_container=function(){return this._container=_.template(this.options.container.template,{id:this.id,tag:this.options.container.tag}),this.container=$(this._container)},n.prototype.initialize=function(){},n.prototype.template="",n.prototype.default_options={id_prefix:"_view",container:{tag:"div",template:"<<%= tag %> id='<%= id %>'></<%= tag %>>"}},n.prototype.default_data={},n.prototype.update=function(t,e){var n;return _.isString(t)&&(n={},n[t]=e,t=n),_.extend(this.data,t),this.render()},n.prototype.render=function(){return this.container.html(this._template(this.data))},n.prototype.show=function(){return this.container.show()},n.prototype.hide=function(){return this.container.hide()},n.prototype.scroll_to=function(t){var e,n,i,r;return null==t&&(t=400),n=this.container.offset(),r=$(window).height(),e=20,i=n-e,0>i&&(i=0),$("html, body").animate({scrollTop:i},t)},n}(_Base)}.call(this),function(){this.Facebook={is_ready:!1,ready_listeners:[],connected_url:"/auth/connect",disconnected_url:"/auth/disconnect",check_url:"/auth/check",academia_facebook_contacts_path:"/FriendFinder/FacebookContacts",default_permissions:"email,user_education_history,user_work_history",scope:function(){return this.default_permissions},run_ready_listeners:function(){var t,e;for(this.is_ready=!0,t=void 0,e=[];t=this.ready_listeners.shift();)e.push(t());return e},when_ready:function(t){return this.is_ready?t():this.ready_listeners.push(t)},call_with_auth_response:function(t,e){return null==e&&(e={}),Facebook.when_ready(function(){return FB.getLoginStatus(function(n){return n.authResponse?t(n.authResponse):"function"==typeof e.negative_callback?e.negative_callback():void 0})})},call_with_auth_response2:function(t,e){var n=this;return null==e&&(e={}),Facebook.when_ready(function(){return FB.login(function(n){return n.authResponse?t(n.authResponse):"function"==typeof e.negative_callback?e.negative_callback():void 0},{scope:n.scope()})})},get_login_status:function(t){return Facebook.when_ready(function(){return FB.getLoginStatus(t)})},show_contacts_or_login:function(t){var e=this;return this.call_with_auth_response(function(){return t===!1?e.register_connected_and_call(function(){return e.show_contacts()}):e.show_contacts()},{negative_callback:function(){return $("#connected_but_not_logged_in").show()}})},show_contacts:function(){return $("#connected_but_not_logged_in").hide(),$("#successful_connection, .loading").show(),Facebook.load_facebook_contacts_from_academia("#contacts_container"),$(".registration_inner_content h4").html("Follow your friends to see their work in your News Feed"),$(".next_link").addClass("button blue"),$(".next_link").text("Save and Continue")},register_connected_and_call:function(t,e){var n,i=this;return"undefined"==typeof e&&(e=!1),n=function(e){return $.post(Facebook.connected_url,{provider:"facebook",_public_secret:$current_user.public_secret,uid:e.userID,"oauth[token]":e.accessToken,"oauth[expires]":e.expiresIn},function(){return $("#registering_spinner").hide(),$("#not_connected").hide(),t()})},$("#registering_spinner").show(),this.call_with_auth_response(function(t){return e?i.check_user_exists(t.userID,function(t){return $("#not_connected").html("<div class='info'>"+t.message+"</div>")},function(){return n(t)}):n(t)})},check_user_exists:function(t,e,n){return $.post(Facebook.check_url,{_public_secret:$current_user.public_secret,provider:"facebook",uid:t},function(t){return t.exists?e(t):n(t)},"json")},register_connected_and_redirect_to:function(t){return this.register_connected_and_call(function(){return window.location=t},!0)},deregister_connected_and_reload:function(){return FB.login(function(t){return $("#registering_spinner").show(),t.authResponse?FB.api({method:"auth.revokeAuthorization",params:{uid:t.authResponse.userID}},function(){return $.post(Facebook.disconnected_url,{_public_secret:$current_user.public_secret,provider:"facebook"},function(){return $("#registering_spinner").hide(),window.location.reload(!0)})}):void 0})},load_facebook_contacts_from_academia:function(t,e){var n;return n=$(t),n.find("img.spinner").show(),n.show(),n.load(this.academia_facebook_contacts_path+(e?"?recheck=true":""))}}}.call(this),function(){this.Google={authorized:!1,disconnect_api_url:"https://accounts.google.com/o/oauth2/revoke?token=",disconnect_url:"auth/disconnect",connect_url:"auth/connect",my_scopes:function(){return Google.scopes},authorize:function(t,e){var n;return null==e&&(e={}),n={client_id:Google.client_id,scope:this.my_scopes(),immediate:!1},gapi.auth.authorize(n,function(n){return n?t(n):"function"==typeof e.negative_callback?e.negative_callback():void 0})},get_user_info:function(t){return this.authorize(function(){return gapi.client.load("oauth2","v2",function(){var e;return e=gapi.client.oauth2.userinfo.get({userId:"me"}),e.execute(t)})})},register_and_reload:function(){return this.authorize(function(t){var e;return t?e=gapi.client.load("oauth2","v2",function(){var e;return e=gapi.client.oauth2.userinfo.get({userId:"me"}),e.execute(function(e){return $.post(Google.connect_url,{provider:"google",_public_secret:$current_user.public_secret,uid:e.id,"oauth[token]":t.access_token,"oauth[expires]":t.expires_in},function(){return window.location.reload()})})}):void 0})},deregister_connected_and_reload:function(){return this.authorize(function(t){var e;return t?(e=Google.disconnect_api_url+t.access_token,$.ajax({type:"GET",url:e,async:!1,contentType:"application/json",dataType:"jsonp",success:function(){return $.post(Google.disconnect_url,{provider:"google",_public_secret:$current_user.public_secret,"oauth[token]":t.access_token,"oauth[expires]":t.expires_in},function(){return window.location.reload()})},failure:function(t){return $a.log(t)}})):void 0})}}}.call(this),function(){$.fn.extend({follow_button:function(){var t;return t=$.fn.follow_button,$(this).each(function(e,n){return t.init($(n))})}}),$.extend($.fn.follow_button,{follow_buttons:[],init:function(t){var e=this;return this.follow_buttons.push(t),t.unbind("click").click(function(n){var i,r;return n.preventDefault(),window.$current_user?(r=t.data("uid"))?e.follow_user(r):void 0:(i=t.data("fname"),alert("Please log in or sign up to follow "+i+"'s work"))})},follow_user:function(t){var e,n=this;return e={},e["following[followee_id]"]=t,e._public_secret=$current_user.public_secret,$.post("/followings",e,function(e){return e&&e.success?_.chain(n.follow_buttons).select(function(e){return e.data("uid")===t}).each(function(t){return t.fadeOut()}):void 0},"json")}})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};this.NavigationController=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.initialize=function(){var t;return this.init_objects(),this.init_dropdowns(),this.init_menu(),t=this.options.local_store&&this.supports_local_storage(),this.options.nav_open&&this.elements.counters.select("*[data-type=normal]").click(),this.add_notification_count_to_title()},n.prototype.init_objects=function(){return this.all_containers=[this.elements.normal_container,this.elements.account_menu]},n.prototype.add_notification_count_to_title=function(){var t;return t=this.elements.counters.find("a").text(),t>0?(t="("+t+") ",document.title=t+document.title):void 0},n.prototype.init_dropdowns=function(){var t=this;return _.each(this.all_containers,function(t){return t.click(function(t){return t.stopPropagation()})}),$(document).keydown(function(e){return 27===e.keyCode?t.hide_all():void 0}),this.elements.counters.click(function(e){return e.preventDefault(),t.handle_counter_click(e),!1})},n.prototype.init_menu=function(){var t,e,n,i=this;return n=this.elements,t=n.account_link,e=n.account_menu,this.options.ios?t.click(function(){return e.toggle()}):_.each([t,e],function(n){return n.hover(function(){return e.data("hovered",!0),t.hasClass("account_open")?void 0:(i.hide_all(),e.fadeIn(200),t.addClass("account_open"))},function(){return e.data("hovered",!1),_.delay(function(){return e.data("hovered")?void 0:(e.fadeOut(200),t.removeClass("account_open"))},1e3)})})},n.prototype.handle_counter_click=function(t){var e,n,i,r,o,a,s=this;return this.get_notification_content(!1),e=$(t.currentTarget),n=e.find("a"),a=e.data("type"),r=e.data("count"),r&&n.html()<=5&&(n.html(r),e.data("count",null)),i=this.elements.normal_container,i.is(":hidden")?(this.hide_all(),o=this.elements.navigation_container.position().left-385+e.width()/2,i.css({left:""+o+"px"}),i.fadeIn(200),this.mark_as_read(e,i),$("body").click(function(){return s.hide_all()
})):(this.mark_as_read(e,i),this.hide_all())},n.prototype.mark_as_read=function(t,e){return t.find("a").html("0"),document.title=document.title.replace(/^.*?(?=[A-Z][a-z])/g,""),t.addClass("zero"),e.find(".notification_message").addClass("read")},n.prototype.get_notification_content=function(t){return t&&localStorage.notifications&&!this.options.unread_messages?this.local_load_notification_content():this.lazy_load_notification_content(t)},n.prototype.local_load_notification_content=function(){var t;return $a.is_logged_in&&$current_user.admin&&$a.log("Getting notifications from localStorage!"),t=jQuery.parseJSON(localStorage.notifications),this.populate_notification_content(t)},n.prototype.lazy_load_notification_content=function(t){var e=this;return $.get("/notifications.json",{},function(n){var i;return t&&(localStorage.notifications=n),$.post("/notifications/clear/normal"),i=jQuery.parseJSON(n),e.populate_notification_content(i)})},n.prototype.populate_notification_content=function(t){var e,n,i;return i=this.elements,n=i.normal_container,e=i.counters,n.data("loaded")!==!0?(n.html(t),Follow.init(n)):void 0},n.prototype.hide_all=function(){return _.each(this.all_containers,function(t){return t.hide()}),this.elements.account_link.removeClass("account_open"),$("body").unbind("click")},n.prototype.supports_local_storage=function(){var t;try{return null!==window.localStorage&&localStorage}catch(e){return t=e,!1}},n}(_BaseController),this.LoggedOutNavigationController=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){var t,e,n,i,r,o;return o=this.elements,r=o.link,t=o.background,i=o.form,n=o.field,e=o.close,r.click(function(e){return $.browser.msie?void 0:(e.preventDefault(),t.fadeIn(100,function(){return i.fadeIn(100,function(){return n.focus()})}))}),e.click(function(e){return e.preventDefault(),i.fadeOut(200,function(){return t.fadeOut(300)})})},n}(_BaseController),this.Navigation=NavigationController}.call(this);var AncientResource={set_create_url:function(t){this.create_url=t},set_url:function(t){this.url=t},set_xsrf_token:function(t){this.xsrf_token=t},init:function(t,e){var n=$x.object(this);return n.set_url(t),n.set_xsrf_token(e),n},init_collection:function(t,e){var n=$x.object(this);return n.set_create_url(t),n.set_xsrf_token(e),n},send:function(t,e,n,i,r){var o=this;o.xsrf_token&&(n._public_secret=o.xsrf_token),$.ajax({type:t,url:e,data:n,dataType:"json",async:!r,success:function(t){i.apply(null,t)},error:function(){i.apply(null,o.fatal_error_data())}})},create:function(t,e,n){this.send("POST",this.create_url,t,e,n)},destroy:function(t,e){this.send("POST",this.url,{_method:"delete"},t,e)},fatal_error_data:function(){return[!1,null,[["fatal",""]]]},is_fatal_error:function(t){return 1===t.length&&"fatal"===t[0][0]}},AncientResourceController=BaseController.inherit({init:function(t){return t.xsrf_token&&(this.xsrf_token=t.xsrf_token),t.collection_url&&this.init_collection(t.collection_url),t.instance_url&&this.init_instance(t.instance_url),this.create_params=t.create_params?t.create_params:{},this.protocall("init",t),this},init_instance:function(t){return this.instance=AncientResource.init(t,this.xsrf_token),this},init_collection:function(t){return this.collection=AncientResource.init_collection(t,this.xsrf_token),this},make:function(t){var e=this;return e.collection&&e.collection.create(e.create_params,t),e},unmake:function(t){var e=this;return e.instance&&e.instance.destroy(t),e}});(function(){window.BoxyLoginController=BaseController.inherit({init_behaviors:function(){return this.init_links(),this.init_spinners(),this.init_reset_form()},init_links:function(){var t=this;return this.elements.reset_link.click(function(e){return e.preventDefault(),t.elements.login_form.hide(),t.elements.reset_form.show(),$(document).trigger("set_iframe_size")}),this.elements.cancel_link.click(function(e){return e.preventDefault(),t.elements.reset_form.hide(),t.elements.login_form.show(),$(document).trigger("set_iframe_size")})},init_spinners:function(){var t=this;return this.elements.container.find("form").submit(function(){return t.elements.spinners.show()})},submit_url:function(){var t;return t=this.elements.reset_form.attr("action"),$.support.cors?t:t.replace(/^https/,"http")},init_reset_form:function(){var t=this;return this.elements.reset_form.submit(function(e){return e.preventDefault(),$.ajax({type:"POST",url:t.submit_url(),data:{email:t.elements.reset_email.val()},dataType:"json",success:function(e){var n,i,r;return r=e[0],n=e[1],i=e[2],t.elements.spinners.hide(),r?null!=n.message?(t.elements.reset_text.text(n.message),t.elements.reset_text.css({color:"green"})):window.location.reload():null!=i.message?(t.elements.reset_text.text(i.message),t.elements.reset_text.css({color:"red"})):null!=i.redirect?window.location=i.redirect:void 0}})})}})}).call(this),function(){$x.ensureNamespace("Server"),c.Server.CsrfTokenRetriever=function(){function t(){this.csrf_token=null}return t._instance=null,t.instance=function(){return null==this._instance&&(this._instance=new this),this._instance},t.prototype._callCallback=function(t){var e=this;return window.setTimeout(function(){return t(e.csrf_token)},0)},t.prototype.withToken=function(t){return this._callCallback(t)},t}()}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};$x.ensureNamespace("Documents"),this.c.Documents.Download=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.default_options={loader_img:'//2.academia-assets.com/images/friend_finder/loading2.gif?268dddb59b19d4fd7d0be83e67b419e2',boxy_height:"250px",title:"You must be logged in to download"},i.prototype.initialize=function(){var t,e=this;return this.set_feature_flags(),"undefined"!=typeof $current_user&&null!==$current_user||(null!=(t=$(this.options.selector).data("download"))?t.always_allow_download:void 0)||$a.ie6()||this.ab_test_june_2012_5||this.options.track!==!1&&(this.options.track=!0,this.notifier=new c.Server.Notification("sutd")),$(document).on("click",this.options.selector,function(t){var n,i,r;return n=$(t.currentTarget),i=n.data("download"),i?"undefined"!=typeof $current_user&&null!==$current_user||i.always_allow_download||$a.ie6()||$a.is_mobile()||e.ab_test_june_2012_5?!0:(e.options.track&&($(window).on("unload.sutd",function(){return e.notifier.notify({event_type:"unload",auvid:$auvid})}),e.notifier.notify({event_type:"download",location:e.options.button_location,auvid:$auvid,attachment_id:e.options.attachment_id,work_id:e.options.work_id})),"function"==typeof(r=e.options).onopen_boxy&&r.onopen_boxy(),e.show_boxy(i),!1):void 0})},i.prototype.set_feature_flags=function(){var t=this;return this.ab_test_june_2012_5=jQuery.cookie("ab_test_june_2012_5"),null!=this.ab_test_june_2012_5&&(this.ab_test_june_2012_5="true"===this.ab_test_june_2012_5),null==this.ab_test_june_2012_5?jQuery.ajax({url:$r.api_v0_feature_flags_path({subdomain_param:"api"}),dataType:"json",success:function(e){var n;return t.ab_test_june_2012_5=e.ab_test_june_2012_5,jQuery.cookie("ab_test_june_2012_5",null!=(n=e.ab_test_june_2012_5)?n:!1,{domain:$domain,path:"/",expires:365})}}):void 0},i.prototype.show_boxy=function(t){var e;return $("#sutd_html").length>0?this.show_html_sutd():(e=this.build_url(t),this.create_boxy(e))},i.prototype.show_html_sutd=function(){var t=this;return UserSource.remember("download"),$("#sutd_html").show(),$("#overlay_background").css({opacity:".6"}),$("#overlay_background").fadeIn(),$(".close_sutd_html").click(function(){return t.options.track&&($(window).off("unload.sutd"),t.notifier.notify({event_type:"download_closed",auvid:$auvid})),$("#sutd_html").fadeOut(),$("#overlay_background").fadeOut()})},i.prototype.build_url=function(t){var e,n;return e="//"+$domain+"/signup_wall",n=[],t.redirect_to&&n.push(["cp",encodeURIComponent(t.redirect_to)]),n.push(["a_id",t.attachment_id]),n.push(["boxy","iframe"]),n.push(["user_source","download"]),t.button_location&&n.push(["button_location",t.button_location]),n.push(["random",String(Math.floor(1e9*Math.random()))]),$a.build_url(e,n,[["a_id",t.attachment_id]])},i.prototype.create_boxy=function(t){var e=this;return this.boxy&&this.boxy.hide_all(),this.boxy=$w.boxover({iframe:t,title:this.options.title,top:"100px",width:"512px",height:this.options.boxy_height,loader_image_url:this.options.loader_img,onclose:function(){return e.options.track?($(window).off("unload.sutd"),e.notifier.notify({event_type:"download_closed",auvid:$auvid})):void 0}})},i}(_BaseController)}.call(this);var FormErrorsView=BaseView.inherit({structure:function(t,e){var n="Sorry, there ";n+=t.length>1?"were some problems:":"was a problem:";for(var i=["div",["p.error_headline",n]],r=0;r<t.length;r++){var o="";e&&(o+=$h.capitalize(t[r][0])+" "),o+=t[r][1]+".",i.push(["p.error_message",o])}return i}}),FormController=BaseController.inherit({init_behaviors:function(){var t=this;this.elements.form.single_submit(),this.elements.form.submit(function(){return t.show_submitting(),t.submit_form(),!1}),this.init_form_behaviors()},show_submitting:function(){this.elements.form.find(".submit_spinner").show()},hide_submitting:function(){this.elements.form.find(".submit_spinner").hide()},init_form_behaviors:function(){},submit_form:function(){var t=this;this.elements.form.ajaxSubmit({dataType:"json",error:function(e,n,i){t.hide_submitting(),t.handle_service_error(e,n,i)},success:function(e){t.hide_submitting(),e[0]?t.handle_success(e[1]):t.handle_error(e[1],e[2])}})},handle_service_error:function(t,e){$e.report_error(e,"","")},handle_error:function(t,e){if(this.highlight_error_fields(e),this.elements.errors_container){var n=FormErrorsView.create(this.elements.errors_container);n.show(e,!this.options.custom_error_messages),n.scroll_to()}},handle_success:function(t){this.options.in_boxy?window.parent.on_boxover_success&&window.parent.on_boxover_success(t):t.url&&(document.location.href=t.url)},highlight_error_fields:function(){}}),FailsafeFormController=Base.inherit({init:function(t){return this.form_element=t,this},failsafe_submit:function(t){var e=this;return $w.confirm(t,{nextTo:e.form_element},function(){e.form_element.appendChild(JSML.transform(["input",{type:"hidden",name:"_do_it",value:"now"}])),e.form_element.submit()}),!1}});if(function(){var t;t=0,this.GlobalIncrementor={next:function(){return++t}}}.call(this),function(){$h.windowAddEventListener=function(t,e,n){return window.addEventListener?window.addEventListener(t,e,n):window.attachEvent("on"+t,e)}}.call(this),jade=function(t){function e(t){return null!=t}/*!
 * Jade - runtime
 * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */
return Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),t.merge=function(t,n){var i=t["class"],r=n["class"];(i||r)&&(i=i||[],r=r||[],Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]),i=i.filter(e),r=r.filter(e),t["class"]=i.concat(r).join(" "));for(var o in n)"class"!=o&&(t[o]=n[o]);return t},t.attrs=function(e,n){var i=[],r=e.terse;delete e.terse;var o=Object.keys(e),a=o.length;if(a){i.push("");for(var s=0;a>s;++s){var u=o[s],l=e[u];"boolean"==typeof l||null==l?l&&(r?i.push(u):i.push(u+'="'+u+'"')):0==u.indexOf("data")&&"string"!=typeof l?i.push(u+"='"+JSON.stringify(l)+"'"):"class"==u&&Array.isArray(l)?i.push(u+'="'+t.escape(l.join(" "))+'"'):n&&n[u]?i.push(u+'="'+t.escape(l)+'"'):i.push(u+'="'+l+'"')}}return i.join(" ")},t.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.rethrow=function(t,e,n){if(!e)throw t;var i=3,r=require("fs").readFileSync(e,"utf8"),o=r.split("\n"),a=Math.max(n-i,0),s=Math.min(o.length,n+i),i=o.slice(a,s).map(function(t,e){var i=e+a+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Jade")+":"+n+"\n"+i+"\n\n"+t.message,t},t}({}),function(){this.MongoLog=function(){function t(t,e){this.method=t,this.args=e,this.notifier=new c.Server.Notification("mongo_log")}return t.prototype.start=function(){return this.started=new Date},t.prototype.finish=function(t){var e;return e=new Date-this.started,this.notifier.notify({method:this.method,arguments:this.args,result:t,duration:e/1e3})},t}()}.call(this),function(){this.NewRegistrationController=BaseController.inherit({init_behaviors:function(){return NewRegistrationController._ref=this,this.init_provided_fields(),this.resource=new ResourceController({collection:{url:this.submit_url()},xhr_fields:{withCredentials:!0}}),this.notifier=new c.Server.Notification("sutd"),this.init_form(),this.init_link()},init_provided_fields:function(){var t=this;return _.each(this.options.fields,function(e,n){var i;return i=$(n),null!=e&&i.val(e),t.options.track?i.on("keypress.tracker",function(e){return i.off("keypress.tracker"),t.notifier.notify({event_type:"started_typing",location:e.target.id,auvid:$auvid})}):void 0})},init_form:function(){var t=this;return this.elements.form.single_submit_with_callback(function(e,n){return t.handle_submission(e,n)})},submit_url:function(){var t;return t=this.elements.form.attr("action"),$.support.cors?t:t.replace(/^https/,"http")},handle_submission:function(t,e){var n=this;return this.options.track&&this.notifier.notify({event_type:"attempted_submit",auvid:$auvid}),this.resource.create_params=this.elements.form.serializeObject(),this.resource.create_params.user_source=UserSource.last(),this.resource.make(function(t,i,r){return n.elements.spinner.hide(),e(),t&&n.options.parent_redirect?parent.location.href="/StartRegPath":t?document.location.href="/StartRegPath":n.resource.collection.is_fatal_error(r)?alert("Oops... Something just went wrong! We're taking a look at the issue right now. Please try again in a few minutes."):($(".inline_error").remove(),_.each(r,function(t){var e,n,i,r;return r=t[0],n=t[1],e="<p class='inline_error'>"+n+"</p>",i=$("input[name='"+r+"']"),i.addClass("input_error"),i.after(e)}),n.elements.facebook_success.hide(),$(document).trigger("set_iframe_size"),n.notifier.notify({event_type:"validation_failure",error:JSON.stringify(r),auvid:$auvid}))}),this.elements.spinner.show(),!1},init_link:function(){var t=this;return this.elements.show_form_link.click(function(e){return e.preventDefault(),t.elements.connect_buttons.hide(),t.elements.show_form_link.hide(),t.elements.form.show(),$(document).trigger("set_iframe_size"),t.options.track?t.notifier.notify({event_type:"no_fb",auvid:$auvid}):void 0})},oauth_register:function(t,e,n,i){var r,o,a;return null==i&&(i={}),a=this.shared_register_callbacks(e,n,i),o=a[0],r=a[1],this.oauth_post_shared(o,r,t,"/registrations",{doc_id:n.attr("data-doc_id"),negative_callback:i.negative_callback})},oauth_login:function(t,e,n,i){return null==i&&(i={}),this.oauth_post_shared(e,n,t,"/sessions",_.extend({},i))},shared_register_callbacks:function(t,e,n){var i,r,o;return null==n&&(n={}),i=document.location.href,o=function(e){var i,r,o,a;return a=e[0],i=e[1],r=e[2],"function"==typeof n.success_callback&&n.success_callback(),i&&i.redirect?parent.location.href=i.redirect:(o=null!=t?t:parent.location,window.parent!==window?window.parent.location.reload():window.location.reload())},r=function(t){var n,r,o,a;return a=t[0],n=t[1],r=t[2],o=[["login",n.email],["email_was_taken",!0]],location.href=e.hasClass("standalone")?$a.build_url("/login",o):$a.build_url(i,o),new c.Server.Notification("sutd").notify({event_type:"email_was_taken",auvid:$auvid})},[o,r]},oauth_post_shared:function(t,e,n,i,r){var o,a;switch(null==r&&(r={}),a=r.negative_callback,null!=r.negative_callback&&delete r.negative_callback,o=function(o){var a,s;return a={user_source:UserSource.last(),provider:n,oauth:{token:o.access_token||o.accessToken,expires:o.expires_in||o.expiresIn,scopes:Google.my_scopes()}},a=_.extend({},a,r),s=$login_protocol+"://"+window.location.host+i,$.ajax({type:"POST",url:s,data:a,xhrFields:{withCredentials:!0},success:function(n){return n[0]?"function"==typeof t?t(n):void 0:"function"==typeof e?e(n):void 0},dataType:"json"})},n){case"google":return Google.authorize(o,{negative_callback:a});case"facebook":return Facebook.call_with_auth_response2(o,{negative_callback:a})}}})}.call(this),$.browser.msie&&$.browser.version<=7){var supersleight=function(){var t=!1,e=!0,n='//1.academia-assets.com/images/x.gif?325472601571f31e1bf00674c368d335',i=function(){t=t?document.getElementById(t):document;for(var n=t.all.length-1,i=null;i=t.all[n];n--)null!==i.currentStyle.backgroundImage.match(/\.png/i)&&r(i),"IMG"==i.tagName&&null!==i.src.match(/\.png$/i)&&o(i),!e||"A"!=i.tagName&&"INPUT"!=i.tagName||""!==i.style.position||(i.style.position="relative")},r=function(t){var e="scale",i=t.currentStyle.backgroundImage,r=i.substring(5,i.length-2);"no-repeat"==t.currentStyle.backgroundRepeat&&(e="crop"),t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+r+"', sizingMethod='"+e+"')",t.style.backgroundImage="url("+n+")"},o=function(t){var e=t.src;t.style.width=t.width+"px",t.style.height=t.height+"px",t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",t.src=n},a=function(t){var e=window.onload;window.onload="function"!=typeof window.onload?t:function(){e&&e(),t()}};return{init:function(){a(i)},limitTo:function(e){t=e},run:function(){i()}}}();supersleight.init()}(function(){var t,e,n,i,r,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=function(){function t(t,e){this.url=t,null!=e.xsrf_token&&(this.xsrf_token=e.xsrf_token),null!=e.xhr_fields&&(this.xhr_fields=e.xhr_fields),null!=e.actions&&(this.actions=e.actions)}return t.prototype.send=function(t,e,n,i,r){var o=this;return null!=this.xsrf_token&&(n._public_secret=this.xsrf_token),$.ajax({type:t,url:e,data:n,dataType:"json",async:!r,xhrFields:this.xhr_fields||{},success:function(t){return i.apply(null,t)},error:function(){return i.apply(null,o.fatal_error_data())}})},t.prototype.call=function(t,e,n,i){var r,o,a;if(null!=this.actions&&(r=this.actions[t])&&(a=r.url))return o=(r.method||"get").toLowerCase(),"post"!==o&&"get"!==o&&(e._method=o,o="POST"),this.send(o.toUpperCase(),a,e,n,i);throw"No such custom action: "+t},t.prototype.fatal_error_data=function(){return[!1,null,[["fatal",""]]]},t.prototype.is_fatal_error=function(t){return 1===t.length&&"fatal"===t[0][0]},t}(),t=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.create=function(t,e,n){return this.send("POST",this.url,t,e,n)},e}(n),e=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.destroy=function(t,e){return this.send("POST",this.url,{_method:"delete"},t,e)},e}(n),window.Resource=n,window.InstanceResource=e,window.CollectionResource=t}).call(this),function(){this.ResourceController=function(){function t(t){null!=t.xsrf_token&&(this.xsrf_token=t.xsrf_token),null!=t.xhr_fields&&(this.xhr_fields=t.xhr_fields),null!=t.collection&&this.init_collection(t.collection),null!=t.instance&&this.init_instance(t.instance),this.create_params=null!=t.create_params?t.create_params:{}}return t.prototype.init_instance=function(t){return null!=t.url?this.instance=new InstanceResource(t.url,{xsrf_token:this.xsrf_token,xhr_fields:this.xhr_fields,actions:t.actions}):void 0},t.prototype.init_collection=function(t){return null!=t.url?this.collection=new CollectionResource(t.url,{xsrf_token:this.xsrf_token,xhr_fields:this.xhr_fields,actions:t.actions}):void 0},t.prototype.call_on_instance=function(t,e,n,i){return null!=this.instance?this.instance.call(t,e,n,i):void 0},t.prototype.call_on_collection=function(t,e,n,i){return null!=this.collection?this.collection.call(t,e,n,i):void 0},t.prototype.make=function(t,e){return null!=this.collection?this.collection.create(this.create_params,t,e):void 0},t.prototype.unmake=function(t,e){return null!=this.instance?this.instance.destroy(t,e):void 0},t}()}.call(this),function(){$x.ensureNamespace("Server"),c.Server.Benchmarker=function(){function t(t,e,n){var i,r=this;this.name=t,this.data=e,this.timeout_ms=n,this.start_epoch=(new Date).getTime(),null!=this.timeout_ms&&(i=function(){return r.finished({timedout:!0})},this.timer=setTimeout(i,this.timeout_ms))}return t.prototype.finished=function(t){var e,n;if(null==t&&(t={}),clearTimeout(this.timer),!this.done){this.done=!0,this.data.duration=(new Date).getTime()-this.start_epoch,this.data.started_at=this.start_epoch;for(e in t)n=t[e],this.data[e]=n;return new c.Server.Notification(this.name).notify(this.data)}},t}()}.call(this),function(){$x.ensureNamespace("Server"),c.Server.Notification=function(){function t(t,e){this.name=t,this.options=null!=e?e:{},this.token_retriever=c.Server.CsrfTokenRetriever.instance()}return t.prototype.notify=function(t){var e=this;return null==t&&(t={}),this.token_retriever.withToken(function(){return jQuery.ajax({url:$r.api_v0_active_support_notifications_path({subdomain_param:"api"}),data:jQuery.extend(t,{name:e.name}),type:"POST",statusCode:{401:function(){return e.options._second_try?void 0:new c.Server.Notification(e.name,jQuery.extend(e.options,{_second_try:!0})).notify(t)}}})})},t.prototype.instrument=function(t,e){var n=this;return null==e&&(e={}),jQuery(t).single_click(function(){return n.notify(e)})},t}()}.call(this),function(){this.SignupWallController=BaseController.inherit({init_behaviors:function(){return this.notifier=new c.Server.Notification("sutd"),this.init_resize(),this.elements.signup_container&&this.init_signup_and_login_buttons(),this.options.resize_on_load&&this.trigger_resize(),this.options.show_login_on_load?this.show_login():void 0},init_signup_and_login_buttons:function(){var t=this;return this.elements.login_button.click(function(e){return e.preventDefault(),t.elements.signup_container.hide(),t.elements.login_container.show(),t.trigger_resize(),t.notifier.notify({event_type:"login",auvid:$auvid})}),this.elements.signup_button.click(function(e){return e.preventDefault(),t.elements.login_container.hide(),t.elements.signup_container.show(),t.trigger_resize(),t.notifier.notify({event_type:"sign_up",auvid:$auvid})})},init_resize:function(){var t=this;return $(document).bind("set_iframe_size",function(){return t.trigger_resize()})},trigger_resize:function(){return top.$(top.document).trigger("resize_boxy",this.new_height())},show_login:function(){return this.elements.login_button.click()},new_height:function(){var t;return t=90,$("body").height()+t}})}.call(this),/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function(t,e){t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var r=["opacity",e,~~(100*t),n,i].join("-"),o=.01+100*(n/i),a=Math.max(1-(1-t)/e*(100-o),t),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),u=s&&"-"+s+"-"||"";return h[r]||(p.insertRule("@"+u+"keyframes "+r+"{"+"0%{opacity:"+a+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+a+"}"+"}",p.cssRules.length),h[r]=1),r}function i(t,e){var n,i,r=t.style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<c.length;i++)if(n=c[i]+e,void 0!==r[n])return n}function r(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function a(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function s(t){return"undefined"==typeof this?new s(t):(this.opts=o(t||{},s.defaults,_),void 0)}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,i){function o(){return r(n("group",{coordsize:l+" "+l,coordorigin:-u+" "+-u}),{width:l,height:l})}function a(t,a,s){e(h,e(r(o(),{rotation:360/i.lines*t+"deg",left:~~a}),e(r(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:s}),n("fill",{color:i.color,opacity:i.opacity}),n("stroke",{opacity:0}))))}var s,u=i.length+i.width,l=2*u,c=2*-(i.width+i.length)+"px",h=r(o(),{position:"absolute",top:c,left:c});if(i.shadow)for(s=1;s<=i.lines;s++)a(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=i.lines;s++)a(s);return e(t,h)},s.prototype.opacity=function(t,e,n,i){var r=t.firstChild;i=i.shadow&&i.lines||0,r&&e+i<r.childNodes.length&&(r=r.childNodes[e+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var l,c=["webkit","Moz","ms","O"],h={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),_={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};s.defaults={},o(s.prototype,{spin:function(e){this.stop();var n,i,o=this,s=o.opts,u=o.el=r(t(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),c=s.radius+s.length+s.width;if(e&&(e.insertBefore(u,e.firstChild||null),i=a(e),n=a(u),r(u,{left:("auto"==s.left?i.x-n.x+(e.offsetWidth>>1):parseInt(s.left,10)+c)+"px",top:("auto"==s.top?i.y-n.y+(e.offsetHeight>>1):parseInt(s.top,10)+c)+"px"})),u.setAttribute("role","progressbar"),o.lines(u,o.opts),!l){var h,p=0,_=(s.lines-1)*(1-s.direction)/2,d=s.fps,f=d/s.speed,m=(1-s.opacity)/(f*s.trail/100),g=f/s.lines;!function v(){p++;for(var t=0;t<s.lines;t++)h=Math.max(1-(p+(s.lines-t)*g)%f*m,s.opacity),o.opacity(u,t*s.direction+_,h,s);o.timeout=o.el&&setTimeout(v,~~(1e3/d))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,o){function a(e,n){return r(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*u+o.rotate)+"deg) translate("+o.radius+"px"+",0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var s,u=0,c=(o.lines-1)*(1-o.direction)/2;u<o.lines;u++)s=r(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:l&&n(o.opacity,o.trail,c+u*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(s,r(a("#000","0 0 4px #000"),{top:"2px"})),e(i,e(s,a(o.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var d=r(t("group"),{behavior:"url(#default#VML)"});return!i(d,"transform")&&d.adj?u():l=i(d,"animation"),s}),function(){var t,e;Spinner.small_black=function(e){var n;return n=new Spinner(_.extend({},t,{color:"#000"})),n.spin(null!=e?e.get(0):void 0)},Spinner.small_white_hide_contents=function(e){return Spinner.hide_contents(e,_.extend({},t,{color:"#fff"}))},Spinner.tiny_black_adjacent=function(t){return Spinner.adjacent(t,_.extend({},e,{color:"#000"}))},Spinner.hide_contents=function(t,e){var n,i;return null==e&&(e={}),i=new Spinner(e),t.hide_contents(),i.spin(null!=t?t.get(0):void 0),n=i.stop,i.stop=function(){return n.call(this),t.show_contents()},i},Spinner.adjacent=function(t,e){var n,i,r;return null==e&&(e={}),r=new Spinner(_.extend({top:"-9px",left:"4px"},e)),n=$("<div style='display: inline-block'/>"),t.after(n),r.spin(n.get(0)),i=r.stop,r.stop=function(){return i.call(this),n.remove()},r},t={lines:7,length:1,width:3,radius:3,corners:1,rotate:0,trail:24,speed:1.3,direction:1},e={lines:5,length:0,width:3,radius:2,corners:1,rotate:56,trail:60,speed:2,direction:1}}.call(this),function(){var t=[].slice;Academia.split={start_and_record:function(){var e,n,i;return e=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],$.cookie(e)?$.cookie(e):(i=this.parse_and_return(n),$.cookie(e,i,{domain:$domain,path:"/"}),this.record_split(e,!1,n),i)},start:function(){var e,n,i;return e=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],$.cookie(e)?$.cookie(e):(i=this.parse_and_return(n),$.cookie(e,i,{domain:$domain,path:"/"}),i)},parse_and_return:function(t){var e,n,i,r,o,a,s,u,l,c,h,p;if(!$.isArray(t[0]))return i=t.length,o=Math.floor(Math.random()*i),s=t[o];for(i=0,u=[],n=0,s="",l=0,h=t.length;h>l;l++)e=t[l],i+=e[1],u.push([e[0],e[1]+n]),n+=e[1];for(r=Math.floor(Math.random()*i),c=0,p=u.length;p>c;c++)if(a=u[c],r<a[1])return a[0]},record_split:function(t,e,n){var i;return(i=$.cookie(t))?$.post("/record_split",{ab_test_name:t,test:i,options:n,finish:e}):void 0},end_split:function(t){return $.cookie(t,null,{domain:$domain,path:"/"})}}}.call(this),function(){Academia.swp={timed_popover:function(t){var e,n;return n=new c.Server.Notification("sutd"),this.should_show_popover()&&(e=function(){var t;return t=jQuery.cookie("ab_test_june_2012_5"),null!=t&&(t="true"===t),t?void 0:(Academia.swp.show_popover(),n.notify({event_type:"popover_show",auvid:$auvid}))},setTimeout(e,1e3*t)),$("#download_popover .doc_download").click(function(){return $("#download_popover").hide()}),$("#download_popover i").click(function(){return $("#download_popover").fadeOut(),$("#overlay_background").fadeOut(),n.notify({event_type:"popover_close",auvid:$auvid})})},should_show_popover:function(){return $a.ie6()||$a.ie7()||$a.is_mobile()?!1:document.referrer?!!document.referrer.match(/https?:\/\/([^.]+\.)?(google|bing|yahoo|twitter|facebook|linkedin)\./):!0},show_popover:function(){return $("#download_popover").fadeIn(),$("#overlay_background").css({opacity:".6"}),$("#overlay_background").fadeIn()}}}.call(this),function(){this.UserSource={sources:["unknown"],remember:function(t){return this.sources.push(t)},last:function(){return _.last(this.sources)}}}.call(this),function(){var t;t=function(t,e){return _.debounce(e,t)},this.WorkViewCounts={pending_ids:[],queue:function(t,e){return this.pending_ids.push({work_id:t,callback:e}),this.retrieve()},retrieve:t(100,function(){var t,e;return e=this.pending_ids,t=_.uniq(_.pluck(e,"work_id")),$.ajax({url:$r.api_v0_works_views_url({work_ids:t}),dataType:"jsonp",success:function(t){return _.each(t.views,function(t,n){var i;return n=parseInt(n),i=_.select(e,function(t){return t.work_id===n}),_.each(i,function(e){return e.callback(t)})})}}),this.pending_ids=[]})}}.call(this);