(function(a){a.fn.tab=function(c,b){if(typeof c==="object"){b=c}b=a.extend({defaultOpen:(c&&typeof c==="number"&&c>0)?--c:0,tabKeyword:"tab",tabHiddenClass:"tab-hidden",tabListClass:"tab-list",tabActiveClass:"tab-active",tabEvent:"click",timer:0,animateUserAction:true,paginate:false,pause:false,cloneHeading:false,autopause:{selector:""},fx:{change:"standard",duration:"normal"}},b||{});return this.each(function(){var g=null;var q=a(this).find("."+b.tabKeyword);var l=a("<ul>");l.addClass(b.tabListClass);if(b.paginate===true){var d=a('<li class="'+b.tabKeyword+"-paginate "+b.tabKeyword+'-back">Back</li>').bind(b.tabEvent,function(i){clearInterval(m);j(-1,i)});var p=a('<li class="'+b.tabKeyword+"-paginate "+b.tabKeyword+'-forward">Forward</li>').bind(b.tabEvent,function(i){clearInterval(m);j(1,i)});l.append(d)}var r=[];q.each(function(){var x=a(this);var v=a('<li id="'+b.tabKeyword+"-"+x.attr("id")+'"><a href="#'+x.attr("id")+'">'+x.html()+"</a></li>");v.find("a").bind(b.tabEvent,function(z){clearInterval(m);j(this,z)});l.append(v);var w=a("<div>");var u=x.get()[0];if(b.cloneHeading===true){var y=a(x).clone().attr("id",function(){return this.id+"-tab-heading"});w.append(y)}while(u.nextSibling&&u.nextSibling.nodeName!==u.nodeName){w.append(a(u.nextSibling))}var i=x.attr("id");x.remove();try{w.attr("id",i).addClass(b.tabKeyword);r.push(w)}catch(t){console.log("jQuery.tab: You probably did not specify IDs on your heading elements: "+t)}});if(b.paginate===true){l.append(p)}if(b.pause===true){var f=a('<li class="'+b.tabKeyword+'-pause">Pause</li>').bind(b.tabEvent,function(i){h(i)});l.append(f)}a(this).append(l);for(var k=0,o=r.length;k<o;k++){if(b.defaultOpen!==k){r[k].addClass(b.tabHiddenClass)}a(this).append(r[k])}l.find("li[id*="+b.tabKeyword+"-]").each(function(i){if(i===b.defaultOpen){g=MAGNET.dom.storage.activateElement(a(this).get()[0],g,b.tabActiveClass)}});var m=null;if(b.timer>0){m=setInterval(function(){j(1)},b.timer*1000)}var j=function(v,z){if(typeof v==="number"){var i=l.find("li."+b.tabActiveClass).eq(0);switch(v){case -1:v=a(i).prev().find("a").attr("href");if(typeof v==="undefined"){v=a(l).find("li[id*="+b.tabKeyword+"-]").filter(":last").find("a").attr("href")}break;case 1:v=a(i).next().find("a").attr("href");if(typeof v==="undefined"){v=a(l).find("li[id*="+b.tabKeyword+"-]").filter(":first").find("a").attr("href")}break;default:console.log("jQuery.tab: theLink is a number, but it is not -1 or 1, which are the only two allowed values.");break}}var x=v.toString().split("#");var y=x[1];var B=a("#"+y);var w=g.toString().split("#")[1];if(b.autopause.selector!==""&&a(b.autopause.selector,B).length>0){clearInterval(m)}if(n.hasOwnProperty(b.fx.change)){if(!z||(z&&b.animateUserAction===true)){n[b.fx.change](w,B)}else{n.standard(w,B)}}else{n.standard(w,B)}var A=null;l.find("li[id*="+b.tabKeyword+"-]").each(function(C,D){if(a(D).hasClass(b.tabActiveClass)){A=D}});MAGNET.dom.storage.deactivateElement(A,g,b.tabActiveClass);var u=b.tabKeyword+"-"+B.attr("id");var t=document.getElementById(u);setTimeout(function(){jQuery(".features ol").css("counter-reset","item")},1);g=MAGNET.dom.storage.activateElement(t,g,b.tabActiveClass);if(z){z.preventDefault();z.stopPropagation()}};var h=function(u){var i=a(u.target);clearInterval(m);i.unbind().text("Play").attr("class","tab-play");i.bind(b.tabEvent,function(t){e(t);return false})};var e=function(u){var i=a(u.target);m=null;j(1);if(b.timer>0){m=setInterval(function(){j(1)},b.timer*1000)}i.unbind().text("Pause").attr("class","tab-pause");i.bind(b.tabEvent,function(t){h(t);return false})};var n={standard:function(i,t){a("div."+b.tabKeyword).attr("style","");a("#"+i).addClass(b.tabHiddenClass);t.removeClass(b.tabHiddenClass)},crossfade:function(i,t){a("#"+i).animate({opacity:0},b.fx.duration,function(){a(this).addClass(b.tabHiddenClass)});t.animate({opacity:1},b.fx.duration,function(){a(this).removeClass(b.tabHiddenClass)})},textfade:function(t,u){var i=["rubric","feature-header","feature-blurb-text","byline"];a(window).trigger("CN.customEvents.rotator.slidechange");u.fadeIn(b.fx.duration,function(){a(".rotator-content").fadeIn("slow",function(){a.each(i,function(v,w){setTimeout(function(){a(".rotator-content ."+i[v],u).fadeIn("slow")},600*v)})})}).removeClass(b.tabHiddenClass);a("#"+t).fadeOut(b.fx.duration,function(){a(this).addClass(b.tabHiddenClass);a(".rotator-content",a(this)).children().css("display","none")})}}})}})(jQuery);
/*!
* @file cn.most.js
* @version 1.0.5
* @author Paul Bronshteyn
* @comment Built by a geek loaded on caffeine ...
* @copyright (c) Conde Nast Digital
*
* ETF info: http://wiki.conde-dev.com/display/CND/Event+Tracking+Framework+%28ETF%29+Savvis+Migration+Notes
* jquery.ajax issue in jquery-1.4.2-require.js: the call back is not able to access the properties other the context
*/
if(typeof CN==="undefined"||!CN||typeof jQuery==="undefined"||!jQuery){throw ("CN and/or jQuery library is missing!")}CN.most=(function(d){var a=function(k){this.global=k===true;this.enabled=true,this.env=CN.site.env;this.site=CN.site.code;this.url="";this.urlPath="/spring/event/most.go";this.count=10;this.days=5;this.hours=0;this.type="all";this.container="";this.timeout=15000},j=new a(true),b={viewed:new a(),emailed:new a()},c=function(l,k){CN.debug.info("CN.most request",[l,k]);var m={env:k.env,site:k.site,type:k.type,event:"most_"+l,num:k.count,day:k.days};if(k.hour){m.hour=k.hour;m.day=Math.ceil(m.hour/24)}d.jsonp({type:"GET",cache:true,callbackParameter:"callback",callback:m.event,global:true,url:(k.url||window.location.protocol+"//"+((k.env!=="PROD")?"stag-":"")+"result."+CN.site.tld)+k.urlPath,context:{container:k.container},data:m,timeout:k.timeout,success:h,error:e})},h=function(n){var p,q=(this.container)?this.container:this.context.container,l="",o=[],k,m;CN.debug.info("CN.most response",[q,n]);d.each(n,function(){p=this.contentTitle.replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),contenttype=this.contentType.toLowerCase();if(p&&this.contentUrl&&this.contentId!=true){if(CN.site&&CN.site.eventAllowedDomains){o=CN.site.eventAllowedDomains.split(",")}m=0;for(var t=0;t<o.length;t++){if(this.contentUrl.indexOf(o[t])>=0){m=1}}var r;if(this.imgUrl!=null){r='<span class="img"><span>'+this.rank+'</span><img src="'+this.imgUrl+'" alt="" /></span><span class="m-title"><span class=" m-'+contenttype+'"></span>'+p+"</span>"}else{r=p}if(m==1){l+='<li><a href="'+this.contentUrl+'">'+r+"</a></li>"}else{l+='<li><a href="'+this.contentUrl.replace(/^.*\.\w+\/+/g,"/")+'">'+r+"</a></li>"}}});if(l){d(q).html("<ol>"+l+"</ol>").find("li:first").addClass("first").end().find("li:last").addClass("last")}},e=function(){},g=function(k){return{setEnabled:function(l){k.set("enabled",l===true);return this},setEnabled:function(l){k.set("timeout",CN.utils.intval(l)||30);return this},setEnv:function(l){k.set("env",l);return this},setUrl:function(l){k.set("url",l);return this},setUrlPath:function(l){k.set("urlPath",l);return this},setSite:function(l){k.set("site",l);return this},setType:function(l){k.set("type",l);return this},setCount:function(l){k.set("count",CN.utils.intval(l)||5);return this},setDays:function(l){k.set("days",CN.utils.intval(l)||0);return this},setHours:function(l){k.set("hours",CN.utils.intval(l)||0);return this}}},f=(g(j));a.prototype.set=function(k,m){this[k]=m||this[k];if(this.global){for(var l in b){b[l].set(k,m)}}};f.init=function(l){l=l||{};j=d.extend(j,l);if(j.enabled){for(var k in b){this[k].init(l[k]||b[k])}}return this};for(var i in b){f[i]=(function(m,k){var l=(g(k));l.init=function(n){k=d.extend(k,n||{});if(!k.container){this.setContainer()}if(k.enabled){if(d(k.container).length){c(m,k)}}else{}return this};l.setContainer=function(n){k.set("container",n||"#most-"+m);return this};l.end=function(){return f};return l})(i,b[i])}return f})(jQuery);(function(ac){function ae(){}function J(a){af=[a]}function U(a,d,c,b){try{b=a&&a.apply(d.context||d,c)}catch(e){b=!1}return b}function V(a){return/\?/.test(a)?"&":"?"}var T="async",M="charset",Q="",N="error",K="insertBefore",O="_jqjsp",E="on",ab=E+"click",Y=E+N,S=E+"load",G=E+"readystatechange",ag="readyState",P="removeChild",Z="<script>",F="success",R="timeout",ad=window,ah=ac.Deferred,aa=ac("head")[0]||document.documentElement,H={},W=0,af,X={callback:O,url:location.href},I=ad.opera;function L(q){q=ac.extend({},X,q);var t=q.success,l=q.error,u=q.complete,c=q.dataFilter,a=q.callbackParameter,k=q.callback,b=q.cache,v=q.pageCache,r=q.charset,p=q.url,x=q.data,i=q.timeout,m,e=0,g=ae,j,n,w,y,o,f;ah&&ah(function(z){z.done(t).fail(l);t=z.resolve;l=z.reject}).promise(q);q.abort=function(){!(e++)&&g()};if(U(q.beforeSend,q,[q])===!1||e){return q}p=p||Q;x=x?((typeof x)=="string"?x:ac.param(x,q.traditional)):Q;p+=x?(V(p)+x):Q;a&&(p+=V(p)+encodeURIComponent(a)+"=?");!b&&!v&&(p+=V(p)+"_"+(new Date()).getTime()+"=");p=p.replace(/=\?(&|$)/,"="+k+"$1");function d(z){if(!(e++)){g();v&&(H[p]={s:[z]});c&&(z=c.apply(q,[z]));U(t,q,[z,F]);U(u,q,[q,F])}}function h(z){if(!(e++)){g();v&&z!=R&&(H[p]=z);U(l,q,[q,z]);U(u,q,[q,z])}}if(v&&(m=H[p])){m.s?d(m.s[0]):h(m)}else{ad[k]=J;y=ac(Z)[0];y.id=O+W++;if(r){y[M]=r}I&&I.version()<11.6?((o=ac(Z)[0]).text="document.getElementById('"+y.id+"')."+Y+"()"):(y[T]=T);if(G in y){y.htmlFor=y.id;y.event=ab}y[S]=y[Y]=y[G]=function(A){if(!y[ag]||!/i/.test(y[ag])){try{y[ab]&&y[ab]()}catch(z){}A=af;af=0;A?d(A[0]):h(N)}};y.src=p;g=function(z){f&&clearTimeout(f);y[G]=y[S]=y[Y]=null;aa[P](y);o&&aa[P](o)};aa[K](y,(w=aa.firstChild));o&&aa[K](o,w);f=i>0&&setTimeout(function(){h(R)},i)}return q}L.setup=function(a){ac.extend(X,a)};ac.jsonp=L})(jQuery);var CN=CN||{};(function(b){var a=(function(){var e=null,q=null,n=[],d=[],t=0,m=false,j=null,h={slideClass:"rotator-ad-item",fx:"jQueryFadeOut",tabHiddenClass:"tab-hidden",activeSlide:0,photoSpeed:5000,adSpeed:3000,animDuration:600,isIE:false};function r(v,u){if(u&&typeof u==="object"){h=k(h,u)}e=b(v);d=e.find(".rotator-ad-item");t=h.activeSlide;o();c();i()}function c(){b(q).click(function(u){p(u)});e.mouseover(function(){window.clearTimeout(j)});e.mouseout(function(){i()})}function p(v){if(m===false){var u,w=d.length;if(v.target.tagName==="LI"){window.clearTimeout(j);u=parseInt(b(v.target).index(),10);switch(u){case 0:f("prev");break;case w+1:f("next");break;default:f(u-1)}}}}function o(){var y=l("ul",{className:"tab-list"}),u={li:"li",tabClass:"tab-pagi"},v,x,w;q=l("div",{className:"tab-list-wrap"});v=l(u.li,{className:u.tabClass+" tab-prev"});y.appendChild(v);for(x=d.length-1;x>=0;x--){w="pagitab slide"+x;if(n.length===t){w+=" is-active"}v=l(u.li,{className:w});n[n.length]=v;y.appendChild(v)}v=l(u.li,{className:u.tabClass+" tab-next"});y.appendChild(v);q.appendChild(y);e.append(q)}function l(u,v){var x=document.createElement(u);for(var w in v){x[w]=v[w]}return x}function i(){var u=0;window.clearTimeout(j);if(d[t].className.indexOf("sponsor")!==-1){u=h.adSpeed}else{u=h.photoSpeed}j=window.setTimeout(function(){f("next")},u)}function f(u){var u=u,v;if(m===false){m=true;if(u==="next"){v=t+1<=d.length-1?t+1:0}else{if(typeof u==="number"){v=u}else{v=t-1<0?d.length-1:t-1}}b(n[t]).removeClass("is-active");b(n[v]).addClass("is-active");g[h.fx](v);t=v;i()}}function k(w,v){for(var u in v){if(w[u]!=="undefined"||obj[u]!==""){w[u]=v[u]}}return w}var g={cssAnimation:function(u){b(d[t]).removeClass("tab-shown").addClass("tab-hidden");b(d[u]).removeClass("tab-hidden").addClass("tab-shown")},jQueryFadeOut:function(u){b(d[t]).animate({opacity:0},h.animDuration,function(){b(this).css("display","none")});b(d[u]).css("display","block").animate({opacity:1},h.animDuration,function(){m=false})}};return{init:r,changeSlide:f,fx:g}})();CN.rotatorAd=a})(jQuery);CN.socialmedia=CN.socialmedia||{};CN.socialmedia=(function(h){var e={status:true,cookie:true,xfbml:true},k=h("#blogs_body .hentry.entry, #blogs .hentry.entry, #blogs-body .hentry.entry"),i=(k.length>0&&!k.hasClass("single")),c=function(n){var m=(typeof n.tag==="undefined")?"":(CN.page.config.url.indexOf("?")>-1?"&"+n.tag:"?"+n.tag);return(i)?h(".entry-title a",n.obj.parents(".entry")).attr("href")+m:CN.page.config.url+m},g=function(m){return/^http/.test(m)?m:/^\/\//.test(m)?location.protocol+m:/\//.test(m)?location.protocol+"//"+location.host+m:location.protocol+"//"+location.host+location.pathname+"/"+m+location.search},f=function(m){return(i)?h(".entry-title a",m.parents(".entry")).html():CN.page.config.title},l=function(n){var m=h("img:first",n.parents(".entry")).attr("src")||h("img:first",n.parents("#content")).attr("src")||h("meta[property='og:image']").attr("content");return m?g(m):""},j=function(){return(typeof CN.page.config.tweet.source!=="undefined"&&CN.page.config.tweet.source!=="")?'data-via="'+CN.page.config.tweet.source+'"':""},b=function(){var m=h(".utility-tweet iframe.twitter-share-button");if(m.length===0){m.remove()}},d=function(m){var n={version:"2.0.1",login:m.login,apiKey:m.apiKey,longUrl:m.url};if(location.protocol==="http:"){h.getJSON("http://api.bit.ly/shorten?"+h.param(n)+"&format=json&callback=?",function(o){h(window).trigger("CN.customEvents.bitlyShortenUrl",[o])})}},a=function(){h(window).trigger("CN.customEvents.FDBSDKLoaded");if(CN.stats&&CN.stats.omniture){FB.Event.subscribe("edge.create",function(m){CN.stats.omniture.trackAction("facebook-like",this);CN.socialmediaeventFBTracker(CN.socialMediaData.facebook_event)});FB.Event.subscribe("edge.remove",function(m){CN.stats.omniture.trackAction("facebook-unlike",this)})}};isScriptIncluded=function(m){var n=false;if(m){h("script").each(function(){if((h(this).attr("src")!==undefined)&&(h(this).attr("src")!==null)&&(h(this).attr("src")!=="")&&((h(this).attr("src")).indexOf(m)!==-1)){n=true}})}return n},includePinitScript=function(){if(!isScriptIncluded("//assets.pinterest.com/js/pinit.js")){h("script").eq(0).before("<script type='text/javascript' src='//assets.pinterest.com/js/pinit.js'><\/script>")}},normalizeURL=function(m){return(m.toLowerCase().charAt(0)==="/")?location.protocol+"//"+location.host+m:m};CN.socialmediaeventFBTracker=function(o){var m,n=window.CN||window.CNP;n.site=n.site||{};n.site.eventTrackingList=new EventList("eventListHolder");n.site.eventTrackingList.setBaseUrl(CN.socialMediaData.collectorBaseURL+"/");n.site.eventTrackingEvent=new EventObject(CN.socialMediaData.currentSiteCode,o);n.site.eventTrackingEvent.setEnvironment(CN.socialMediaData.environment);n.site.eventTrackingEvent.setContentId(CN.socialMediaData.trackingPageId);n.site.eventTrackingEvent.setContentType(CN.socialMediaData.pageContentType);n.site.eventTrackingEvent.setFullUrl(CN.socialMediaData.trackingURL);n.site.eventTrackingEvent.setContentTitle(document.title);n.site.eventTrackingEvent.setProperty(CN.socialMediaData.formattedDate);n.site.eventTrackingEvent.setLocation(CN.socialMediaData.imageUrl);n.site.eventTrackingEvent.setSearchResultCount(CN.socialMediaData.keyword);m=CN.socialMediaData.trackingURL.substring(0,8);if((m.indexOf("http")===-1&&m.indexOf("https")===-1)){n.site.eventTrackingList.addEvent(n.site.eventTrackingEvent);n.site.eventTrackingList.writeImageTags()}};return{trackCount:0,getTweet:function(){CN.page.config.tweet=CN.page.config.tweet||{layout:"horizontal"};h(".utilities .utility-tweet").each(function(){h(this).html("");h('<a href="http://twitter.com/share" class="twitter-share-button" '+j()+'data-text="'+f(h(this))+'" data-url="'+c({obj:h(this)})+'" data-count="'+CN.page.config.tweet.layout+'" data-counturl="'+c({obj:h(this)})+'">Tweet</a>').appendTo(h(this))});h.getScript(window.location.protocol+"//platform.twitter.com/widgets.js",function(){if(twttr){twttr.events.bind("tweet",function(){CN.socialmediaeventFBTracker("most_tweeted")})}setTimeout(function(){b()},20000)});return this},loadFBSDK:function(){if(typeof FB==="undefined"){if(h("#fb-root").length===0){h("body").prepend('<div id="fb-root"></div>')}window.fbAsyncInit=function(){if(typeof CN.page.config.facebook.appId!=="undefined"){h.extend(true,e,{appId:CN.page.config.facebook.appId})}FB.init(e);a()};(function(){var m=document.createElement("script");m.async=true;m.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";document.getElementById("fb-root").appendChild(m)}())}},getFacebookLike:function(){if(h(".utilities .utility-like").length>0){CN.page.config.facebook.like=CN.page.config.facebook.like||{width:400,showfaces:false,layout:"standard",action:"like"};h(".utilities .utility-like").each(function(){var m=h(this);m.html("").show();h('<fb:like href="'+c({obj:m})+'" colorscheme="light" width="'+CN.page.config.facebook.like.width+'" show_faces="'+CN.page.config.facebook.like.showfaces+'" layout="'+CN.page.config.facebook.like.layout+'" action="'+CN.page.config.facebook.like.action+'" ref="social_fblike"></fb:like>').appendTo(m)});CN.socialmedia.loadFBSDK()}else{if(h(".utilities .utility-like-sm").length>0){CN.page.config.facebook.like_sm=CN.page.config.facebook.like_sm||{width:400,showfaces:false,layout:"button_count",action:"like"};h(".utilities .utility-like-sm").each(function(){var m=h(this);m.find("iframe").html("").attr({src:window.location.protocol+"//www.facebook.com/plugins/like.php?href="+c({obj:m})+"&layout="+CN.page.config.facebook.like_sm.layout+"&show_faces="+CN.page.config.facebook.like_sm.showfaces+"&width="+CN.page.config.facebook.like_sm.width+"&action="+CN.page.config.facebook.like_sm.action+"&colorscheme=light&height=40"})});CN.socialmedia.loadFBSDK()}}return this},getFacebookShare:function(){if(h(".utilities .utility-fb-share").length>0){CN.page.config.facebook.share=CN.page.config.facebook.share||{width:170,type:"button_count",action:"share"};h(".utilities .utility-fb-share").each(function(){var m=h(this);m.html("").show();h('<fb:share-button href="'+c({obj:m})+'" type="'+CN.page.config.facebook.share.type+'"width="'+CN.page.config.facebook.share.width+'""></fb:share-button>').appendTo(m)});CN.socialmedia.loadFBSDK()}return this},getFbRecommend:function(){if(h(".utility-fb-recommend").length>0){var p,o,t,q,m,u,r,n;CN.page.config.facebook.recommend=CN.page.config.facebook.recommend||{url:location.href,send:"false",layout:"button_count",width:"450",showFaces:"true",action:"recommend",colorScheme:"light",height:21};p=CN.page.config.facebook.recommend.url||location.href;o=CN.page.config.facebook.recommend.send||"false";t=CN.page.config.facebook.recommend.layout||"button_count";q=CN.page.config.facebook.recommend.width||"450";m=CN.page.config.facebook.recommend.showFaces||"true";u=CN.page.config.facebook.recommend.action||"recommend";r=CN.page.config.facebook.recommend.colorScheme||"light";n=CN.page.config.facebook.recommend.height||21;h(".utility-fb-recommend").html('<iframe src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(p)+"&amp;send="+o+"&amp;layout="+t+"&amp;width="+q+"&amp;show_faces="+m+"&amp;action="+u+"&amp;colorscheme="+r+"&amp;font&amp;height="+n+'" scrolling="no" frameborder="0" allowTransparency="true"></iframe>')}return this},getTumblr:function(){h(".utilities .utility-tumblr").each(function(){h(this).html("");h('<a target="_blank" href="http://www.tumblr.com/share/photo?source='+encodeURIComponent(l(h(this)))+"&caption="+encodeURIComponent(f(h(this)))+"&clickthru="+encodeURIComponent(c({obj:h(this)}))+'" title="Share on Tumblr" class="tumblr-share">Share on Tumblr</a>').appendTo(h(this))});h.getScript(document.location.protocol+"//platform.tumblr.com/v1/share.js");return this},getStumbleUpon:function(){if(h(".utility-stumble-upon").length>0){var o=false,p=document.createElement("su:badge"),n,m;p.setAttribute("layout","1");h(".utility-stumble-upon").html(p);if(!isScriptIncluded("//platform.stumbleupon.com/1/widgets.js")){m=document.getElementsByTagName("script")[0];n=document.createElement("script");n.type="text/javascript";n.async=true;n.src="//platform.stumbleupon.com/1/widgets.js";m.parentNode.insertBefore(n,m)}}return this},getRedditShare:function(){if(h(".utility-reddit-share").length>0){h(".utility-reddit-share").each(function(){h(this).html('<iframe width="120" scrolling="no" height="22" frameborder="0" src="//www.reddit.com/static/button/button1.html?width=120&amp;url='+encodeURIComponent(c({obj:h(this)}))+"&amp;title="+f(h(this))+'"></iframe>')})}return this},getGooglePlusOne:function(){h(".utility-gplusone").each(function(){var m=this.getElementsByTagName("g:plusone");if(m&&m.length>0){for(var n=0;n<m.length;n++){m[n].setAttribute("href",c({obj:h(this)}))}}});(function(){var m,n;if(h("#gplus-script").length===0){m=document.createElement("script");m.type="text/javascript";m.async=true;m.id="gplus-script";m.src=document.location.protocol+"//apis.google.com/js/plusone.js";n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(m,n)}}());return this},getLinkedInShare:function(){if(jQuery(".utility-in-share").length>0){var m=document.createElement("script");m.type="text/javascript";m.src=document.location.protocol+"//platform.linkedin.com/in.js";m.async=true;jQuery(".utility-in-share").prepend(m)}return this},getPinit:function(){if(h(".utility-pinit").length>0){var p,n,m,o;CN.page.config.pinit=CN.page.config.pinit||{url:location.href,imageURL:h("body img").eq(0).attr("src"),description:h("head title").html(),countLayout:"horizontal"};p=CN.page.config.pinit.url||CN.page.config.url||location.href;n=normalizeURL(CN.page.config.pinit.imageURL||h("body img").eq(0).attr("src"));m=CN.page.config.pinit.description||h("head title").html();o=CN.page.config.pinit.countLayout||"horizontal";h(".utility-pinit").html('<a href="http://pinterest.com/pin/create/button/?url='+encodeURIComponent(p)+"&media="+encodeURIComponent(n)+"&description="+encodeURIComponent(m)+'" count-layout="'+o+'" target="_blank"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>');includePinitScript()}return this},refresh:function(m){CN.page.config.url=m;CN.socialmedia.getFacebookLike().getFbRecommend().getTweet().getTumblr().getStumbleUpon().getRedditShare().getPinit().getLinkedInShare();FB.XFBML.parse()}}}(jQuery));(function(D){var t="colorbox",q="hover",z=true,R=false,W,o=!D.support.opacity,T=o&&!window.XMLHttpRequest,A="cbox_open",L="cbox_load",w="cbox_complete",K="cbox_cleanup",p="cbox_closed",O="resize.cbox_resize",I,U,V,d,B,l,b,H,c,P,F,h,g,u,k,n,M,m,J,v,X,j,f,a,r,i,C,Q,y,N,E={transition:"elastic",speed:350,width:R,height:R,innerWidth:R,innerHeight:R,initialWidth:"400",initialHeight:"400",maxWidth:R,maxHeight:R,scalePhotos:z,scrolling:z,inline:R,html:R,iframe:R,photo:R,href:R,title:R,rel:R,opacity:0.9,preloading:z,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:R,overlayClose:z,slideshow:R,slideshowAuto:z,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:R,onLoad:R,onComplete:R,onCleanup:R,onClosed:R};function G(Y,Z){Z=Z==="x"?P.width():P.height();return(typeof Y==="string")?Math.round((Y.match(/%/)?(Z/100)*parseInt(Y,10):parseInt(Y,10))):Y}function x(Y){Y=D.isFunction(Y)?Y.call(r):Y;return Q.photo||Y.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function S(){for(var Y in Q){if(D.isFunction(Q[Y])&&Y.substring(0,2)!=="on"){Q[Y]=Q[Y].call(r)}}Q.rel=Q.rel||r.rel;Q.href=Q.href||r.href;Q.title=Q.title||r.title}function e(Y){r=Y;Q=D(r).data(t);S();if(Q.rel&&Q.rel!=="nofollow"){c=D(".cboxElement").filter(function(){var Z=D(this).data(t).rel||this.rel;return(Z===Q.rel)});C=c.index(r);if(C<0){c=c.add(r);C=c.length-1}}else{c=D(r);C=0}if(!y){y=z;N=z;i=r;i.blur();D(document).bind("keydown.cbox_close",function(Z){if(Z.keyCode===27){Z.preventDefault();W.close()}}).bind("keydown.cbox_arrows",function(Z){if(c.length>1){if(Z.keyCode===37){Z.preventDefault();J.click()}else{if(Z.keyCode===39){Z.preventDefault();m.click()}}}});if(Q.overlayClose){I.css({cursor:"pointer"}).one("click",W.close)}D.event.trigger(A);if(Q.onOpen){Q.onOpen.call(r)}I.css({opacity:Q.opacity}).show();Q.w=G(Q.initialWidth,"x");Q.h=G(Q.initialHeight,"y");W.position(0);if(T){P.bind("resize.cboxie6 scroll.cboxie6",function(){I.css({width:P.width(),height:P.height(),top:P.scrollTop(),left:P.scrollLeft()})}).trigger("scroll.cboxie6")}}n.add(J).add(m).add(M).add(k).hide();v.html(Q.close).show();W.slideshow();W.load()}W=D.fn.colorbox=function(Y,aa){var Z=this;if(!Z.length){if(Z.selector===""){Z=D("<a/>");Y.open=z}else{return this}}Z.each(function(){var ab=D.extend({},D(this).data(t)?D(this).data(t):E,Y);D(this).data(t,ab).addClass("cboxElement");if(aa){D(this).data(t).onComplete=aa}});if(Y&&Y.open){e(Z)}return this};W.init=function(){function Y(Z){return D('<div id="cbox'+Z+'"/>')}P=D(window);U=D('<div id="colorbox"/>');I=Y("Overlay").hide();V=Y("Wrapper");d=Y("Content").append(F=Y("LoadedContent").css({width:0,height:0}),g=Y("LoadingOverlay"),u=Y("LoadingGraphic"),k=Y("Title"),n=Y("Current"),M=Y("Slideshow"),m=Y("Next"),J=Y("Previous"),v=Y("Close"));V.append(D("<div/>").append(Y("TopLeft"),B=Y("TopCenter"),Y("TopRight")),D("<div/>").append(l=Y("MiddleLeft"),d,b=Y("MiddleRight")),D("<div/>").append(Y("BottomLeft"),H=Y("BottomCenter"),Y("BottomRight"))).children().children().css({"float":"left"});h=D("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>");D("body").prepend(I,U.append(V,h));if(o){U.addClass("cboxIE");if(T){I.css("position","absolute")}}d.children().bind("mouseover mouseout",function(){D(this).toggleClass(q)}).addClass(q);X=B.height()+H.height()+d.outerHeight(z)-d.height();j=l.width()+b.width()+d.outerWidth(z)-d.width();f=F.outerHeight(z);a=F.outerWidth(z);U.css({"padding-bottom":X,"padding-right":j}).hide();m.click(W.next);J.click(W.prev);v.click(W.close);d.children().removeClass(q);D(".cboxElement").live("click",function(Z){if(Z.button!==0&&typeof Z.button!=="undefined"){return z}else{e(this);return R}})};W.position=function(ad,aa){var ac,Z=P.height(),ab=Math.max(Z-Q.h-f-X,0)/2+P.scrollTop(),Y=Math.max(document.documentElement.clientWidth-Q.w-a-j,0)/2+P.scrollLeft();ac=(U.width()===Q.w+a&&U.height()===Q.h+f)?0:ad;V[0].style.width=V[0].style.height="9999px";function ae(af){B[0].style.width=H[0].style.width=d[0].style.width=af.style.width;u[0].style.height=g[0].style.height=d[0].style.height=l[0].style.height=b[0].style.height=af.style.height}U.dequeue().animate({width:Q.w+a,height:Q.h+f,top:ab,left:Y},{duration:ac,complete:function(){ae(this);N=R;V[0].style.width=(Q.w+a+j)+"px";V[0].style.height=(Q.h+f+X)+"px";if(aa){aa()}},step:function(){ae(this)}})};W.resize=function(ac){if(!y){return}var ad,ab,Z,af,aj,Y,ah,aa=Q.transition==="none"?0:Q.speed;P.unbind(O);if(!ac){ah=setTimeout(function(){var ak=F.wrapInner("<div style='overflow:auto'></div>").children();Q.h=ak.height();F.css({height:Q.h});ak.replaceWith(ak.children());W.position(aa)},1);return}F.remove();F=D('<div id="cboxLoadedContent"/>').html(ac);function ag(){Q.w=Q.w||F.width();Q.w=Q.mw&&Q.mw<Q.w?Q.mw:Q.w;return Q.w}function ae(){Q.h=Q.h||F.height();Q.h=Q.mh&&Q.mh<Q.h?Q.mh:Q.h;return Q.h}F.hide().appendTo(h).css({width:ag(),overflow:Q.scrolling?"auto":"hidden"}).css({height:ae()}).prependTo(d);D("#cboxPhoto").css({cssFloat:"none"});if(T){D("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(K,function(){this.style.visibility="inherit"})}function ai(ak){W.position(ak,function(){if(!y){return}if(o){if(Y){F.fadeIn(100)}U[0].style.removeAttribute("filter")}if(Q.iframe){F.append("<iframe id='cboxIframe'"+(Q.scrolling?" ":"scrolling='no'")+" name='iframe_"+new Date().getTime()+"' frameborder=0 src='"+Q.href+"' "+(o?"allowtransparency='true'":"")+" />")}F.show();k.show().html(Q.title);if(c.length>1){n.html(Q.current.replace(/\{current\}/,C+1).replace(/\{total\}/,c.length)).show();m.html(Q.next).show();J.html(Q.previous).show();if(Q.slideshow){M.show()}}g.hide();u.hide();D.event.trigger(w);if(Q.onComplete){Q.onComplete.call(r)}if(Q.transition==="fade"){U.fadeTo(aa,1,function(){if(o){U[0].style.removeAttribute("filter")}})}P.bind(O,function(){W.position(0)})})}if((Q.transition==="fade"&&U.fadeTo(aa,0,function(){ai(0)}))||ai(aa)){}if(Q.preloading&&c.length>1){ab=C>0?c[C-1]:c[c.length-1];af=C<c.length-1?c[C+1]:c[0];aj=D(af).data(t).href||af.href;Z=D(ab).data(t).href||ab.href;if(x(aj)){D("<img />").attr("src",aj)}if(x(Z)){D("<img />").attr("src",Z)}}};W.load=function(){var Z,Y,ab,aa=W.resize;N=z;r=c[C];Q=D(r).data(t);S();D.event.trigger(L);if(Q.onLoad){Q.onLoad.call(r)}Q.h=Q.height?G(Q.height,"y")-f-X:Q.innerHeight?G(Q.innerHeight,"y"):R;Q.w=Q.width?G(Q.width,"x")-a-j:Q.innerWidth?G(Q.innerWidth,"x"):R;Q.mw=Q.w;Q.mh=Q.h;if(Q.maxWidth){Q.mw=G(Q.maxWidth,"x")-a-j;Q.mw=Q.w&&Q.w<Q.mw?Q.w:Q.mw}if(Q.maxHeight){Q.mh=G(Q.maxHeight,"y")-f-X;Q.mh=Q.h&&Q.h<Q.mh?Q.h:Q.mh}Z=Q.href;g.show();u.show();if(Q.inline){D('<div id="cboxInlineTemp" />').hide().insertBefore(D(Z)[0]).bind(L+" "+K,function(){D(this).replaceWith(F.children())});aa(D(Z))}else{if(Q.iframe){aa(" ")}else{if(Q.html){aa(Q.html)}else{if(x(Z)){Y=new Image();Y.onload=function(){var ac;Y.onload=null;Y.id="cboxPhoto";D(Y).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(Q.scalePhotos){ab=function(){Y.height-=Y.height*ac;Y.width-=Y.width*ac};if(Q.mw&&Y.width>Q.mw){ac=(Y.width-Q.mw)/Y.width;ab()}if(Q.mh&&Y.height>Q.mh){ac=(Y.height-Q.mh)/Y.height;ab()}}if(Q.h){Y.style.marginTop=Math.max(Q.h-Y.height,0)/2+"px"}aa(Y);if(c.length>1){D(Y).css({cursor:"pointer"}).click(W.next)}if(o){Y.style.msInterpolationMode="bicubic"}};Y.src=Z}else{D("<div />").appendTo(h).load(Z,function(ac,ad){if(ad==="success"){aa(this)}else{aa(D("<p>Request unsuccessful.</p>"))}})}}}}};W.next=function(){if(!N){C=C<c.length-1?C+1:0;W.load()}};W.prev=function(){if(!N){C=C>0?C-1:c.length-1;W.load()}};W.slideshow=function(){var Z,Y,aa="cboxSlideshow_";M.bind(p,function(){M.unbind();clearTimeout(Y);U.removeClass(aa+"off "+aa+"on")});function ab(){M.text(Q.slideshowStop).bind(w,function(){Y=setTimeout(W.next,Q.slideshowSpeed)}).bind(L,function(){clearTimeout(Y)}).one("click",function(){Z();D(this).removeClass(q)});U.removeClass(aa+"off").addClass(aa+"on")}Z=function(){clearTimeout(Y);M.text(Q.slideshowStart).unbind(w+" "+L).one("click",function(){ab();Y=setTimeout(W.next,Q.slideshowSpeed);D(this).removeClass(q)});U.removeClass(aa+"on").addClass(aa+"off")};if(Q.slideshow&&c.length>1){if(Q.slideshowAuto){ab()}else{Z()}}};W.close=function(){D.event.trigger(K);if(Q.onCleanup){Q.onCleanup.call(r)}y=R;D(document).unbind("keydown.cbox_close keydown.cbox_arrows");P.unbind(O+" resize.cboxie6 scroll.cboxie6");I.css({cursor:"auto"}).fadeOut("fast");U.stop(z,R).fadeOut("fast",function(){D("#colorbox iframe").attr("src","about:blank");F.remove();U.css({opacity:1});try{i.focus()}catch(Y){}D.event.trigger(p);if(Q.onClosed){Q.onClosed.call(r)}})};W.element=function(){return D(r)};W.settings=E;D(W.init)}(jQuery));(function(c){var d=[];c.tools=c.tools||{};c.tools.tooltip={version:"1.1.3",conf:{effect:"toggle",fadeOutSpeed:"fast",tip:null,predelay:0,delay:30,opacity:1,lazy:undefined,position:["top","center"],offset:[0,0],cancelDefault:true,relative:false,oneInstance:true,events:{def:"mouseover,mouseout",input:"focus,blur",widget:"focus mouseover,blur mouseout",tooltip:"mouseover,mouseout"},api:false},addEffect:function(e,g,f){b[e]=[g,f]}};var b={toggle:[function(e){var f=this.getConf(),g=this.getTip(),h=f.opacity;if(h<1){g.css({opacity:h})}g.show();e.call()},function(e){this.getTip().hide();e.call()}],fade:[function(e){this.getTip().fadeIn(this.getConf().fadeInSpeed,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};function a(f,g){var p=this,k=c(this);f.data("tooltip",p);var l=f.next();if(g.tip){l=c(g.tip);if(l.length>1){l=f.nextAll(g.tip).eq(0);if(!l.length){l=f.parent().nextAll(g.tip).eq(0)}}}function o(v){var u=g.relative?f.position().top:f.offset().top,t=g.relative?f.position().left:f.offset().left,w=g.position[0];u-=l.outerHeight()-g.offset[0];t+=f.outerWidth()+g.offset[1];var q=l.outerHeight()+f.outerHeight();if(w=="center"){u+=q/2}if(w=="bottom"){u+=q}w=g.position[1];var r=l.outerWidth()+f.outerWidth();if(w=="center"){t-=r/2}if(w=="left"){t-=r}return{top:u,left:t}}var i=f.is(":input"),e=i&&f.is(":checkbox, :radio, select, :button"),h=f.attr("type"),n=g.events[h]||g.events[i?(e?"widget":"input"):"def"];n=n.split(/,\s*/);if(n.length!=2){throw"Tooltip: bad events configuration for "+h}f.bind(n[0],function(r){if(g.oneInstance){c.each(d,function(){this.hide()})}var q=l.data("trigger");if(q&&q[0]!=this){l.hide().stop(true,true)}r.target=this;p.show(r);n=g.events.tooltip.split(/,\s*/);l.bind(n[0],function(){p.show(r)});if(n[1]){l.bind(n[1],function(){p.hide(r)})}});f.bind(n[1],function(q){p.hide(q)});if(!c.browser.msie&&!i&&!g.predelay){f.mousemove(function(){if(!p.isShown()){f.triggerHandler("mouseover")}})}if(g.opacity<1){l.css("opacity",g.opacity)}var m=0,j=f.attr("title");if(j&&g.cancelDefault){f.removeAttr("title");f.data("title",j)}c.extend(p,{show:function(r){if(r){f=c(r.target)}clearTimeout(l.data("timer"));if(l.is(":animated")||l.is(":visible")){return p}function q(){l.data("trigger",f);var u=o(r);if(g.tip&&j){l.html(f.data("title"))}r=r||c.Event();r.type="onBeforeShow";k.trigger(r,[u]);if(r.isDefaultPrevented()){return p}u=o(r);l.css({position:"absolute",top:u.top,left:u.left});var t=b[g.effect];if(!t){throw'Nonexistent effect "'+g.effect+'"'}t[0].call(p,function(){r.type="onShow";k.trigger(r)})}if(g.predelay){clearTimeout(m);m=setTimeout(q,g.predelay)}else{q()}return p},hide:function(r){clearTimeout(l.data("timer"));clearTimeout(m);if(!l.is(":visible")){return}function q(){r=r||c.Event();r.type="onBeforeHide";k.trigger(r);if(r.isDefaultPrevented()){return}b[g.effect][1].call(p,function(){r.type="onHide";k.trigger(r)})}if(g.delay&&r){l.data("timer",setTimeout(q,g.delay))}else{q()}return p},isShown:function(){return l.is(":visible, :animated")},getConf:function(){return g},getTip:function(){return l},getTrigger:function(){return f},bind:function(q,r){k.bind(q,r);return p},onHide:function(q){return this.bind("onHide",q)},onBeforeShow:function(q){return this.bind("onBeforeShow",q)},onShow:function(q){return this.bind("onShow",q)},onBeforeHide:function(q){return this.bind("onBeforeHide",q)},unbind:function(q){k.unbind(q);return p}});c.each(g,function(q,r){if(c.isFunction(r)){p.bind(q,r)}})}c.prototype.tooltip=function(e){var f=this.eq(typeof e=="number"?e:0).data("tooltip");if(f){return f}var g=c.extend(true,{},c.tools.tooltip.conf);if(c.isFunction(e)){e={onBeforeShow:e}}else{if(typeof e=="string"){e={tip:e}}}e=c.extend(true,g,e);if(typeof e.position=="string"){e.position=e.position.split(/,?\s/)}if(e.lazy!==false&&(e.lazy===true||this.length>20)){this.one("mouseover",function(h){f=new a(c(this),e);f.show(h);d.push(f)})}else{this.each(function(){f=new a(c(this),e);d.push(f)})}return e.api?f:this}})(jQuery);(function(d){var c=d.tools.tooltip;c.plugins=c.plugins||{};c.plugins.dynamic={version:"1.1.0",conf:{api:false,classNames:"top right bottom left"}};function b(i,e){var f=e?d(e):d("body");var h=f.width()+f.offset().left;var g=f.height()+f.offset().top;return[i.offset().top<=f.offset().top,h<=i.offset().left+i.width(),g<=i.offset().top+i.height(),i.offset().left<=f.offset().left]}function a(f){var e=f.length;while(e--){if(f[e]){return false}}return true}d.fn.dynamic=function(g){var h=d.extend({},c.plugins.dynamic.conf),f;if(typeof g=="number"){g={speed:g}}g=d.extend(h,g);var e=g.classNames.split(/\s/),i;this.each(function(){if(d(this).tooltip().jquery){throw"Lazy feature not supported by dynamic plugin. set lazy: false for tooltip"}var j=d(this).tooltip().onBeforeShow(function(n,o){var m=this.getTip(),l=this.getConf();if(!i){i=[l.position[0],l.position[1],l.offset[0],l.offset[1],d.extend({},l)]}d.extend(l,i[4]);l.position=[i[0],i[1]];l.offset=[i[2],i[3]];m.css({position:"absolute",top:o.top,left:o.left}).show();var k=b(m,g.viewport||null);if(!a(k)){if(k[2]){if(g.top){l.offset[0]=g.top.offset}l.position[0]="top";m.addClass(e[0])}if(k[3]){if(g.right){l.offset[1]=g.right.offset}l.position[1]="right";m.addClass(e[1])}if(k[0]){if(g.bottom){l.offset[0]=g.bottom.offset}l.position[0]="bottom";m.addClass(e[2])}if(k[1]){if(g.left){l.offset[1]=g.left.offset}l.position[1]="left";m.addClass(e[3])}if((k[0]||k[2])&&this.weChangedZero){l.offset[0]*=-1;this.weChangedZero=true}if((k[1]||k[3])&&this.weChangedOne){l.offset[1]*=-1;this.weChangedOne=true}}m.css({visibility:"visible"}).hide()});j.onShow(function(){var l=this.getConf(),k=this.getTip();l.position=[i[0],i[1]];l.offset=[i[2],i[3]]});j.onHide(function(){var k=this.getTip();k.removeClass(g.classNames)});f=j});return g.api?f:this}})(jQuery);(function(b){var a=b.tools.tooltip;a.effects=a.effects||{};a.effects.slide={version:"1.0.0"};b.extend(a.conf,{direction:"up",bounce:false,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!b.browser.msie});var c={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.tools.tooltip.addEffect("slide",function(d){var f=this.getConf(),g=this.getTip(),h=f.slideFade?{opacity:f.opacity}:{},e=c[f.direction]||c.up;h[e[1]]=e[0]+"="+f.slideOffset;if(f.slideFade){g.css({opacity:0})}g.show().animate(h,f.slideInSpeed,d)},function(e){var g=this.getConf(),i=g.slideOffset,h=g.slideFade?{opacity:0}:{},f=c[g.direction]||c.up;var d=""+f[0];if(g.bounce){d=d=="+"?"-":"+"}h[f[1]]=d+"="+i;this.getTip().animate(h,g.slideOutSpeed,function(){b(this).hide();e.call()})})})(jQuery);(function(b){b.tools=b.tools||{};b.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var c;function a(o,m){var r=this,p=b(this),d=!m.vertical,e=o.children(),k=0,i;if(!c){c=r}b.each(m,function(t,u){if(b.isFunction(u)){p.bind(t,u)}});if(e.length>1){e=b(m.items,o)}function l(u){var t=b(u);return m.globalNav?t:o.parent().find(u)}o.data("finder",l);var f=l(m.prev),h=l(m.next),g=l(m.prevPage),n=l(m.nextPage);b.extend(r,{getIndex:function(){return k},getClickIndex:function(){var t=r.getItems();return t.index(t.filter("."+m.activeClass))},getConf:function(){return m},getSize:function(){return r.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/m.size)},getPageIndex:function(){return Math.ceil(k/m.size)},getNaviButtons:function(){return f.add(h).add(g).add(n)},getRoot:function(){return o},getItemWrap:function(){return e},getItems:function(){return e.children(m.item)},getVisibleItems:function(){return r.getItems().slice(k,k+m.size)},seekTo:function(t,x,u){if(t<0){t=0}if(k===t){return r}if(b.isFunction(x)){u=x}if(t>r.getSize()-m.size){return m.loop?r.begin():this.end()}var v=r.getItems().eq(t);if(!v.length){return r}var w=b.Event("onBeforeSeek");p.trigger(w,[t]);if(w.isDefaultPrevented()){return r}if(x===undefined||b.isFunction(x)){x=m.speed}function y(){if(u){u.call(r,t)}p.trigger("onSeek",[t])}if(d){e.animate({left:-v.position().left},x,m.easing,y)}else{e.animate({top:-v.position().top},x,m.easing,y)}c=r;k=t;w=b.Event("onStart");p.trigger(w,[t]);if(w.isDefaultPrevented()){return r}f.add(g).toggleClass(m.disabledClass,t===0);h.add(n).toggleClass(m.disabledClass,t>=r.getSize()-m.size);return r},move:function(v,u,t){i=v>0;return this.seekTo(k+v,u,t)},next:function(u,t){return this.move(1,u,t)},prev:function(u,t){return this.move(-1,u,t)},movePage:function(x,w,v){i=x>0;var t=m.size*x;var u=k%m.size;if(u>0){t+=(x>0?-u:m.size-u)}return this.move(t,w,v)},prevPage:function(u,t){return this.movePage(-1,u,t)},nextPage:function(u,t){return this.movePage(1,u,t)},setPage:function(u,v,t){return this.seekTo(u*m.size,v,t)},begin:function(u,t){i=false;return this.seekTo(0,u,t)},end:function(u,t){i=true;var v=this.getSize()-m.size;return v>0?this.seekTo(v,u,t):r},reload:function(){p.trigger("onReload");return r},focus:function(){c=r;return r},click:function(v){var w=r.getItems().eq(v),t=m.activeClass,u=m.size;if(v<0||v>=r.getSize()){return r}if(u==1){if(m.loop){return r.next()}if(v===0||v==r.getSize()-1){i=(i===undefined)?true:!i}return i===false?r.prev():r.next()}if(u==2){if(v==k){v--}r.getItems().removeClass(t);w.addClass(t);return r.seekTo(v,time,fn)}if(!w.hasClass(t)){r.getItems().removeClass(t);w.addClass(t);var y=Math.floor(u/2);var x=v-y;if(x>r.getSize()-u){x=r.getSize()-u}if(x!==v){return r.seekTo(x)}}return r},bind:function(t,u){p.bind(t,u);return r},unbind:function(t){p.unbind(t);return r}});b.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(t,u){r[u]=function(v){return r.bind(u,v)}});f.addClass(m.disabledClass).click(function(){r.prev()});h.click(function(){r.next()});n.click(function(){r.nextPage()});if(r.getSize()<=m.size){h.add(n).addClass(m.disabledClass)}g.addClass(m.disabledClass).click(function(){r.prevPage()});var j=m.hoverClass,q="keydown."+Math.random().toString().substring(10);r.onReload(function(){if(j){r.getItems().hover(function(){b(this).addClass(j)},function(){b(this).removeClass(j)})}if(m.clickable){r.getItems().each(function(t){b(this).unbind("click.scrollable").bind("click.scrollable",function(u){if(b(u.target).is("a")){return}return r.click(t)})})}if(m.keyboard){b(document).unbind(q).bind(q,function(t){if(t.altKey||t.ctrlKey){return}if(m.keyboard!="static"&&c!=r){return}var u=m.keyboardSteps;if(d&&(t.keyCode==37||t.keyCode==39)){r.move(t.keyCode==37?-u:u);return t.preventDefault()}if(!d&&(t.keyCode==38||t.keyCode==40)){r.move(t.keyCode==38?-u:u);return t.preventDefault()}return true})}else{b(document).unbind(q)}});r.reload()}b.fn.scrollable=function(d){var e=this.eq(typeof d=="number"?d:0).data("scrollable");if(e){return e}var f=b.extend({},b.tools.scrollable.conf);d=b.extend(f,d);d.keyboardSteps=d.keyboardSteps||d.size;this.each(function(){e=new a(b(this),d);b(this).data("scrollable",e)});return d.api?e:this}})(jQuery);(function(b){var a=b.tools.scrollable;a.plugins=a.plugins||{};a.plugins.autoscroll={version:"1.0.1",conf:{autoplay:true,interval:3000,autopause:true,steps:1,api:false}};b.fn.autoscroll=function(d){if(typeof d=="number"){d={interval:d}}var e=b.extend({},a.plugins.autoscroll.conf),c;b.extend(e,d);this.each(function(){var g=b(this).scrollable();if(g){c=g}var i,f,h=true;g.play=function(){if(i){return}h=false;i=setInterval(function(){g.move(e.steps)},e.interval);g.move(e.steps)};g.pause=function(){i=clearInterval(i)};g.stop=function(){g.pause();h=true};if(e.autopause){g.getRoot().add(g.getNaviButtons()).hover(function(){g.pause();clearInterval(f)},function(){if(!h){f=setTimeout(g.play,e.interval)}})}if(e.autoplay){setTimeout(g.play,e.interval)}});return e.api?c:this}})(jQuery);(function(b){var a=b.tools.scrollable;a.plugins=a.plugins||{};a.plugins.circular={version:"0.5.1",conf:{api:false,clonedClass:"cloned"}};b.fn.circular=function(e){var d=b.extend({},a.plugins.circular.conf),c;b.extend(d,e);this.each(function(){var i=b(this).scrollable(),n=i.getItems(),k=i.getConf(),f=i.getItemWrap(),j=0;if(i){c=i}if(n.length<k.size){return false}n.slice(0,k.size).each(function(o){b(this).clone().appendTo(f).click(function(){i.click(n.length+o)}).addClass(d.clonedClass)});var l=b.makeArray(n.slice(-k.size)).reverse();b(l).each(function(o){b(this).clone().prependTo(f).click(function(){i.click(-o-1)}).addClass(d.clonedClass)});var m=f.children(k.item);var h=k.hoverClass;if(h){m.hover(function(){b(this).addClass(h)},function(){b(this).removeClass(h)})}function g(o){var p=m.eq(o);if(k.vertical){f.css({top:-p.position().top})}else{f.css({left:-p.position().left})}}g(k.size);b.extend(i,{move:function(t,r,p,q){var v=j+t+k.size;var u=v>i.getSize()-k.size;if(v<=0||u){var o=j+k.size+(u?-n.length:n.length);g(o);v=o+t}if(q){m.removeClass(k.activeClass).eq(v+Math.floor(k.size/2)).addClass(k.activeClass)}if(v===j+k.size){return self}return i.seekTo(v,r,p)},begin:function(p,o){return this.seekTo(k.size,p,o)},end:function(p,o){return this.seekTo(n.length,p,o)},click:function(p,r,q){if(!k.clickable){return self}if(k.size==1){return this.next()}var t=p-j,o=k.activeClass;t-=Math.floor(k.size/2);return this.move(t,r,q,true)},getIndex:function(){return j},setPage:function(p,q,o){return this.seekTo(p*k.size+k.size,q,o)},getPageAmount:function(){return Math.ceil(n.length/k.size)},getPageIndex:function(){if(j<0){return this.getPageAmount()-1}if(j>=n.length){return 0}var o=(j+k.size)/k.size-1;return o},getVisibleItems:function(){var o=j+k.size;return m.slice(o,o+k.size)}});i.onStart(function(p,o){j=o-k.size;return false});i.getNaviButtons().removeClass(k.disabledClass)});return d.api?c:this}})(jQuery);(function(b){b.fn.wheel=function(e){return this[e?"bind":"trigger"]("wheel",e)};b.event.special.wheel={setup:function(){b.event.add(this,d,c,{})},teardown:function(){b.event.remove(this,d,c)}};var d=!b.browser.mozilla?"mousewheel":"DOMMouseScroll"+(b.browser.version<"1.9"?" mousemove":"");function c(e){switch(e.type){case"mousemove":return b.extend(e.data,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY});case"DOMMouseScroll":b.extend(e,e.data);e.delta=-e.detail/3;break;case"mousewheel":e.delta=e.wheelDelta/120;break}e.type="wheel";return b.event.handle.call(this,e,e.delta)}var a=b.tools.scrollable;a.plugins=a.plugins||{};a.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};b.fn.mousewheel=function(f){var g=b.extend({},a.plugins.mousewheel.conf),e;if(typeof f=="number"){f={speed:f}}f=b.extend(g,f);this.each(function(){var h=b(this).scrollable();if(h){e=h}h.getRoot().wheel(function(i,j){h.move(j<0?1:-1,f.speed||50);return false})});return f.api?e:this}})(jQuery);(function(b){var a=b.tools.scrollable;a.plugins=a.plugins||{};a.plugins.navigator={version:"1.0.2",conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:false,api:false,idPrefix:null}};b.fn.navigator=function(d){var e=b.extend({},a.plugins.navigator.conf),c;if(typeof d=="string"){d={navi:d}}d=b.extend(e,d);this.each(function(){var i=b(this).scrollable(),f=i.getRoot(),l=f.data("finder").call(null,d.navi),g=null,k=i.getNaviButtons();if(i){c=i}i.getNaviButtons=function(){return k.add(l)};function j(){if(!l.children().length||l.data("navi")==i){l.empty();l.data("navi",i);for(var m=0;m<i.getPageAmount();m++){l.append(b("<"+(d.naviItem||"a")+" href='#' />"))}g=l.children().each(function(n){var o=b(this);o.click(function(p){i.setPage(n);return p.preventDefault()});if(d.indexed){o.text(n)}if(d.idPrefix){o.attr("id",d.idPrefix+n)}})}else{g=d.naviItem?l.find(d.naviItem):l.children();g.each(function(n){var o=b(this);o.click(function(p){i.setPage(n);return p.preventDefault()})})}g.eq(0).addClass(d.activeClass)}i.onStart(function(o,n){var m=d.activeClass;g.removeClass(m).eq(i.getPageIndex()).addClass(m)});i.onReload(function(){j()});j();var h=g.filter("[href="+location.hash+"]");if(h.length){i.move(g.index(h))}});return d.api?c:this}})(jQuery);(function(b){b.fn.jcarousel=function(d){return this.each(function(){new a(this,d)})};var c={vertical:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null};b.jcarousel=function(h,f){this.options=b.extend({},c,f||{});this.locked=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?"left":"top";var m="",k=h.className.split(" ");for(var g=0;g<k.length;g++){if(k[g].indexOf("jcarousel-skin")!=-1){b(h).removeClass(k[g]);var m=k[g];break}}if(h.nodeName=="UL"||h.nodeName=="OL"){this.list=b(h);this.container=this.list.parent();if(this.container.hasClass("jcarousel-clip")){if(!this.container.parent().hasClass("jcarousel-container")){this.container=this.container.wrap("<div></div>")}this.container=this.container.parent()}else{if(!this.container.hasClass("jcarousel-container")){this.container=this.list.wrap("<div></div>").parent()}}}else{this.container=b(h);this.list=b(h).find(">ul,>ol,div>ul,div>ol")}if(m!=""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1){this.container.wrap('<div class=" '+m+'"></div>')}this.clip=this.list.parent();if(!this.clip.length||!this.clip.hasClass("jcarousel-clip")){this.clip=this.list.wrap("<div></div>").parent()}this.buttonPrev=b(".jcarousel-prev",this.container);if(this.buttonPrev.size()==0&&this.options.buttonPrevHTML!=null){this.buttonPrev=this.clip.before(this.options.buttonPrevHTML).prev()}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=b(".jcarousel-next",this.container);if(this.buttonNext.size()==0&&this.options.buttonNextHTML!=null){this.buttonNext=this.clip.before(this.options.buttonNextHTML).prev()}this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip"));this.list.addClass(this.className("jcarousel-list"));this.container.addClass(this.className("jcarousel-container"));var j=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var l=this.list.children("li");var n=this;if(l.size()>0){var d=0,g=this.options.offset;l.each(function(){n.format(this,g++);d+=n.dimension(this,j)});this.list.css(this.wh,d+"px");if(!f||f.size===undefined){this.options.size=l.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){n.next()};this.funcPrev=function(){n.prev()};this.funcResize=function(){n.reload()};if(this.options.initCallback!=null){this.options.initCallback(this,"init")}if(b.browser.safari&&b.browser.version<500){this.buttons(false,false);b(window).bind("load",function(){n.setup()})}else{this.setup()}};var a=b.jcarousel;a.fn=a.prototype={jcarousel:"0.2.3"};a.fn.extend=a.extend=b.extend;a.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.tail=null;this.inTail=false;if(this.locked){return}this.list.css(this.lt,this.pos(this.options.offset)+"px");var d=this.pos(this.options.start);this.prevFirst=this.prevLast=null;this.animate(d,false);b(window).unbind("resize",this.funcResize).bind("resize",this.funcResize)},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");if(this.options.initCallback!=null){this.options.initCallback(this,"reset")}this.setup()},reload:function(){if(this.tail!=null&&this.inTail){this.list.css(this.lt,a.intval(this.list.css(this.lt))+this.tail)}this.tail=null;this.inTail=false;if(this.options.reloadCallback!=null){this.options.reloadCallback(this)}if(this.options.visible!=null){var f=this;var g=Math.ceil(this.clipping()/this.options.visible),e=0,d=0;b("li",this.list).each(function(h){e+=f.dimension(this,g);if(h+1<f.first){d=e}});this.list.css(this.wh,e+"px");this.list.css(this.lt,-d+"px")}this.scroll(this.first,false)},lock:function(){this.locked=true;this.buttons()},unlock:function(){this.locked=false;this.buttons()},size:function(d){if(d!=undefined){this.options.size=d;if(!this.locked){this.buttons()}}return this.options.size},has:function(f,g){if(g==undefined||!g){g=f}if(this.options.size!==null&&g>this.options.size){g=this.options.size}for(var d=f;d<=g;d++){var h=this.get(d);if(!h.length||h.hasClass("jcarousel-item-placeholder")){return false}}return true},get:function(d){return b(".jcarousel-item-"+d,this.list)},add:function(h,o){var k=this.get(h),f=0,n=0;var m,k=this.create(h),g=a.intval(h);while(m=this.get(--g)){if(g<=0||m.length){g<=0?this.list.prepend(k):m.after(k);break}}k.removeClass(this.className("jcarousel-item-placeholder"));typeof o=="string"?k.html(o):k.empty().append(o);var l=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var d=this.dimension(k,l)-f;if(h>0&&h<this.first){this.list.css(this.lt,a.intval(this.list.css(this.lt))+"px")}this.list.css(this.wh,a.intval(this.list.css(this.wh))+d+"px");this.list.children("li").each(function(e){this.className=this.className.replace(/jcarousel-item-\d+/g,"jcarousel-item-"+(e+1));this.setAttribute("jcarouselindex",e+1)});return k},remove:function(f){var g=this.get(f);if(!g.length||(f>=this.first&&f<=this.last)){return}var h=this.dimension(g);if(f<this.first){this.list.css(this.lt,a.intval(this.list.css(this.lt))+h+"px")}g.remove();this.list.css(this.wh,a.intval(this.list.css(this.wh))-h+"px")},next:function(){this.stopAuto();if(this.tail!=null&&!this.inTail){this.scrollTail(false)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!=null&&this.last==this.options.size)?1:this.first+this.options.scroll+1)}},prev:function(){this.stopAuto();if(this.tail!=null&&this.inTail){this.scrollTail(true)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!=null&&this.first==1)?this.options.size:this.first-this.options.scroll+1)}},scrollTail:function(d){if(this.locked||this.animating||!this.tail){return}var e=a.intval(this.list.css(this.lt));!d?e-=this.tail:e+=this.tail;this.inTail=!d;this.prevFirst=this.first;this.prevLast=this.last;this.animate(e)},scroll:function(e,d){if(this.locked||this.animating){return}this.animate(this.pos(e),d)},pos:function(B){if(this.locked||this.animating){return}if(this.options.wrap!="circular"){this.options.size=this.list.children().length;B=B<2?1:(this.options.size&&B>this.options.size?this.options.size:B-1)}var y=this.first>B;var h=a.intval(this.list.css(this.lt));var C=this.options.wrap!="circular"&&this.first<=1?1:this.first;var F=y?this.get(C):this.get(this.last);var A=y?C:C-1;var D=null,z=0,u=false,E=0;while(y?--A>=B:++A<B){D=this.get(A);u=!D.length;if(D.length==0){D=this.create(A).addClass(this.className("jcarousel-item-placeholder"));F[y?"before":"after"](D)}F=D;E=this.dimension(D);if(u){z+=E}if(this.first!=null&&(this.options.wrap=="circular"||(A>=1&&(this.options.size==null||A<=this.options.size)))){h=y?h+E:h-E}}var q=this.clipping();var t=[];var g=0,A=B,r=0;var F=this.get(B-1);while(++g){D=this.get(A);u=!D.length;if(D.length==0){D=this.create(A).addClass(this.className("jcarousel-item-placeholder"));F.length==0?this.list.prepend(D):F[y?"before":"after"](D)}F=D;var E=this.dimension(D);if(E==0){alert("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");return 0}if(this.options.wrap!="circular"&&this.options.size!==null&&A>this.options.size){t.push(D)}else{if(u){z+=E}}r+=E;if(r>=q){break}A++}for(var o=0;o<t.length;o++){t[o].remove()}if(z>0){this.list.css(this.wh,this.dimension(this.list)+z+"px");if(y){h-=z;this.list.css(this.lt,a.intval(this.list.css(this.lt))-z+"px")}}var n=B+g-1;if(this.options.wrap!="circular"&&this.options.size&&n>this.options.size){n=this.options.size}if(A>n){g=0,A=n,r=0;while(++g){var D=this.get(A--);if(!D.length){break}r+=this.dimension(D);if(r>=q){break}}}var k=n-g+1;if(this.options.wrap!="circular"&&k<1){k=1}if(this.inTail&&y){h+=this.tail;this.inTail=false}this.tail=null;if(this.options.wrap!="circular"&&n==this.options.size&&(n-g+1)>=1){var w=a.margin(this.get(n),!this.options.vertical?"marginRight":"marginBottom");if((r-w)>q){this.tail=r-q-w}}while(B-->k){h+=this.dimension(this.get(B))}this.prevFirst=this.first;this.prevLast=this.last;this.first=k;this.last=n;return h},animate:function(g,d){if(this.locked||this.animating){return}this.animating=true;var e=this;var f=function(){e.animating=false;if(g==0){e.list.css(e.lt,0)}if(e.options.wrap=="both"||e.options.wrap=="last"||e.options.size==null||e.last<e.options.size){e.startAuto()}e.buttons();e.notify("onAfterAnimation")};this.notify("onBeforeAnimation");if(!this.options.animation||d==false){this.list.css(this.lt,g+"px");f()}else{var h=!this.options.vertical?{left:g}:{top:g};this.list.animate(h,this.options.animation,this.options.easing,f)}},startAuto:function(e){if(e!=undefined){this.options.auto=e}if(this.options.auto==0){return this.stopAuto()}if(this.timer!=null){return}var d=this;this.timer=setTimeout(function(){d.next()},this.options.auto*1000)},stopAuto:function(){if(this.timer==null){return}clearTimeout(this.timer);this.timer=null},buttons:function(f,e){if(f==undefined||f==null){var f=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="first")||this.options.size==null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!=null&&this.last>=this.options.size){f=this.tail!=null&&!this.inTail}}if(e==undefined||e==null){var e=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="last")||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!=null&&this.first==1){e=this.tail!=null&&this.inTail}}var d=this;this.buttonNext[f?"bind":"unbind"](this.options.buttonNextEvent,this.funcNext)[f?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",f?false:true);this.buttonPrev[e?"bind":"unbind"](this.options.buttonPrevEvent,this.funcPrev)[e?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",e?false:true);if(this.buttonNext.length>0&&(this.buttonNext[0].jcarouselstate==undefined||this.buttonNext[0].jcarouselstate!=f)&&this.options.buttonNextCallback!=null){this.buttonNext.each(function(){d.options.buttonNextCallback(d,this,f)});this.buttonNext[0].jcarouselstate=f}if(this.buttonPrev.length>0&&(this.buttonPrev[0].jcarouselstate==undefined||this.buttonPrev[0].jcarouselstate!=e)&&this.options.buttonPrevCallback!=null){this.buttonPrev.each(function(){d.options.buttonPrevCallback(d,this,e)});this.buttonPrev[0].jcarouselstate=e}},notify:function(d){var e=this.prevFirst==null?"init":(this.prevFirst<this.first?"next":"prev");this.callback("itemLoadCallback",d,e);if(this.prevFirst!==this.first){this.callback("itemFirstInCallback",d,e,this.first);this.callback("itemFirstOutCallback",d,e,this.prevFirst)}if(this.prevLast!==this.last){this.callback("itemLastInCallback",d,e,this.last);this.callback("itemLastOutCallback",d,e,this.prevLast)}this.callback("itemVisibleInCallback",d,e,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",d,e,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(h,l,d,j,g,f,e){if(this.options[h]==undefined||(typeof this.options[h]!="object"&&l!="onAfterAnimation")){return}var m=typeof this.options[h]=="object"?this.options[h][l]:this.options[h];if(!b.isFunction(m)){return}var n=this;if(j===undefined){m(n,d,l)}else{if(g===undefined){this.get(j).each(function(){m(n,this,j,d,l)})}else{for(var k=j;k<=g;k++){if(k!==null&&!(k>=f&&k<=e)){this.get(k).each(function(){m(n,this,k,d,l)})}}}}},create:function(d){return this.format("<li></li>",d)},format:function(g,f){var d=b(g).addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+f));d.attr("jcarouselindex",f);return d},className:function(d){return d+" "+d+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(i,j){var h=i.jquery!=undefined?i[0]:i;var g=!this.options.vertical?h.offsetWidth+a.margin(h,"marginLeft")+a.margin(h,"marginRight"):h.offsetHeight+a.margin(h,"marginTop")+a.margin(h,"marginBottom");if(j==undefined||g==j){return g}var f=!this.options.vertical?j-a.margin(h,"marginLeft")-a.margin(h,"marginRight"):j-a.margin(h,"marginTop")-a.margin(h,"marginBottom");b(h).css(this.wh,f+"px");return this.dimension(h)},clipping:function(){return !this.options.vertical?this.clip[0].offsetWidth-a.intval(this.clip.css("borderLeftWidth"))-a.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-a.intval(this.clip.css("borderTopWidth"))-a.intval(this.clip.css("borderBottomWidth"))},index:function(d,e){if(e==undefined){e=this.options.size}return Math.round((((d-1)/e)-Math.floor((d-1)/e))*e)+1}});a.extend({defaults:function(e){return b.extend(c,e||{})},margin:function(i,h){if(!i){return 0}var g=i.jquery!=undefined?i[0]:i;if(h=="marginRight"&&b.browser.safari){var f={display:"block","float":"none",width:"auto"},d,j;b.swap(g,f,function(){d=g.offsetWidth});f.marginRight=0;b.swap(g,f,function(){j=g.offsetWidth});return j-d}return a.intval(b.css(g,h))},intval:function(d){d=parseInt(d);return isNaN(d)?0:d}})})(jQuery);
/*!
* @file jquery.history.js
* @description jQuery History Plugin
* @author Paul Bronshteyn
* @comment Built by a geek loaded on caffeine ...
* @copyright (c) Conde Nast Digital
*/
(function(d){var c,j,a,h=300,i=/^.*#/,f=location,e=function(){return f.hash.replace(i,"")},g={iframe:null,getHash:function(){try{return this.iframe.contentWindow.document.location.hash.replace(i,"")}catch(k){return""}},setHash:function(l){d(this.iframe).one("load",{hash:l},this.onSetHash);try{this.iframe.contentWindow.newdoc()}catch(k){}},onSetHash:function(k){this.contentWindow.document.location.hash=k.data.hash}},b=function(){var m=g.iframe?g.getHash():e(),k=e();if(m!==c){c=m;if(g.iframe){f.hash=c}var l=c;d.event.trigger("history",[l,j]);CN.debug.info("Firing History Change",[l,j]);j=l}else{if(g.iframe&&m!==k){d.history.add(k);var l=c;d.event.trigger("history",[l,j]);CN.debug.info("Firing Manual History Change",[m,k,l,j]);j=l}}};d.history={add:function(l){l=l.replace(i,"");if(c!==l){var k=c;f.hash=c=l;if(g.iframe){g.setHash(c)}d.event.trigger("historyadd",[c,k]);CN.debug.info("History Add",[c,k]);j=k}if(!a){a=setInterval(b,h)}}};d.fn.history=function(k){d(this).bind("history",k)};d.fn.historyadd=function(k){d(this).bind("historyadd",k)};d(function(){c=e();if(!d.support.cssFloat){g.iframe=d('<iframe src="/nocount/historyhelper.html" width="0" height="0" />').one("load",function(){g.setHash(c);c=g.getHash();if(!a){a=setInterval(b,h)}CN.debug.info("Creating history iFrame")}).prependTo(document.body)[0]}})})(jQuery);if(typeof CN==="undefined"||!CN){var CN={}}CN.ajaxNewsletters=(function(h){window.pageTracker._trackEvent=window.pageTracker._trackEvent||[];window.optimizely=window.optimizely||[];var d=false,j=h(this),e="Newsletter sign-up: Enter e-mail address",c=[],b,i=function(o){var m=h(o),l=m.find('input[name="email"]'),n=0;if(l.val()==e||l.val()==""){h("#newsletter-message").addClass("error").html("Please enter a valid email address.").show();return false}m.find("input:checkbox:visible:checked").each(function(){n++});if(!n){h("#newsletter-message").addClass("error").html("Please select a newsletter preference.").show();return false}return true},g=function(){h("#newsletter-message").html("").hide()},f=function(q){var n=h(q),l=CN.user.username(),p={},m=n.find('input[name="email"]').val(),o=new Array(),r=new Array();n.find("input:checkbox:visible:checked").each(function(t){o[t]=this.value.replace("newsletter.","")});n.find('input:checkbox:visible[checked="false"]').each(function(t){r[t]=this.value.replace("newsletter.","")});p={username:l,email:m,newsletterIds:o,missedNewsLetterIds:r,application:"newsletter",applicationId:"NONE PROVIDED",formName:"shortForm"};c=o;b=n;d=true;NewsletterAjaxHandler.signUpNewsletters(p,function(t){a(t)})},k=function(){var n=0,m="",l="right rail";if(j.attr("id")==="newsletter-form-content-well"){l="below blog"}for(n;n<c.length;n++){if(typeof c[n]==="string"){switch(c[n]){case"217":m="weekly";break;case"442":m="cartoons";break;case"5122":m="daily";break;case"5129":m="borowitz";break}}window.optimizely.push(["trackEvent",m+" email signup"]);window.pageTracker._trackEvent("newsletter",m+" email signup",l,0,false)}},a=function(l){d=false;switch(l){case"Success":window.optimizely.push(["trackEvent","newsletter signup"]);CN.stats.omniture.trackAction("event12",this);k();h("#newsletter-message").removeClass("error").html('<span class="newsletter-thankyou">Thank you</span>We hope you enjoy<br/> our newsletters.').show();h(j).hide();break;case"SuccessEmailTaken":window.optimizely.push(["trackEvent","newsletter signup"]);CN.stats.omniture.trackAction("event12",this);k();h("#newsletter-message").removeClass("error").html('<span class="newsletter-thankyou">Thank you</span>We hope you enjoy<br/> our newsletters.').show();h(j).hide();break;case"ErrorEmail":h("#newsletter-message").addClass("error").html("Please enter a valid email address.").show();break;case"Error":window.optimizely.push(["trackEvent","newsletter signup error"]);window.pageTracker._trackEvent(["_trackEvent","newsletter","signup error"]);h("#newsletter-message").addClass("error").html("An error occured while processing your request.").show();break;default:}};return{onFormSubmit:function(l){var m=l||window.event;m.preventDefault();j=h(m.target);console.log(m.target);if(!h("#newsletter-message").length){h(m.target).parent().prepend('<h1 id="newsletter-message"></h1>')}if(d){return false}g();if(!i(m.target)){return false}else{f(m.target)}return false}}})(jQuery);(function(c){var a,b;a=function(){var e={key:"share|pink",value:""},d=new RegExp("(\\?|\\&){1}("+e.key+")=([^\\&]+)"),f;f=location.search;e.value=d.exec(f);if(e.value!==null){e.value={share:e.value[3],queryStr:f}}return e.value};b=function(e){var d="Social Share";if(e!==null){s.prop56=d;s.prop57=e.queryStr;s.eVar56=d;s.eVar57=e.queryStr}if(c("body").hasClass("abstractOnly")){CN.stats.omniture.setContentType("Abstract")}CN.stats.omniture.doPageTracking("track")};c(function(){b(a())})}(jQuery));function RegisteredGateway(b,e,c){var a=this,d='<a href="'+b+'" class="lnkLogin reglayer-login" title="Login">Log In</a> or <a href="'+e+'" class="lnkRegister reglayer-register" title="Register">register</a>';this.boxWidth="";this.aLoginMessages={log:d+" to log this tip.",rating:d+" to post your rating.",comment:d+" to post your comment.",favorites:d+" now to add this tip to your favorites.",favorites_generic:d+" to save this to your list of favorites.",product_page:"We can't save products to your list if we don't know who you are! "+d+" to save and share your favorite finds now.",recommendation:d+" to recommend this tip.",abuse:d+" to report this comment.","default":d+" to use this program."};this.signinUrl=b;this.gatewayUrl=e;RegisteredGateway.prototype.init=function(){a.createRegisterDiv()};RegisteredGateway.prototype.createRegisterDiv=function(){if(!jQuery("#reglayer").length){jQuery('<div id="reglayer"/>').addClass("regblurb").append(jQuery('<a href="#"/>').addClass("closebtn").html("&times;").bind("click",function(){jQuery(this).parent().hide();return false}),jQuery('<p id="regtxt"/>')).appendTo("body");jQuery(".closebtn").trigger("click")}CN.debug.info("firing CN.customEvents.pluckRegLayer event");jQuery(window).trigger("CN.customEvents.pluckRegLayer")};RegisteredGateway.prototype.getGatewayUrl=function(){return this.gatewayUrl};RegisteredGateway.prototype.setLoginText=function(f){return jQuery("#regtxt").html(f).length>0?true:false};RegisteredGateway.prototype.loginHandler=function(f,k){var k=jQuery(k),g=jQuery("#reglayer");var j=jQuery(window);jQuery(window).bind("resize",{layer:g,target:k},this.onResize);var i=k.offset().top,h=k.offset().left+(k.width()/2)-(g.width()/2);if(CN.site.mobilecompatible){if((CN.mobile.detectIPad()||CN.mobile.detectIPhone())){i=j.scrollTop()+(j.height()/4);h=j.width()/2-(jQuery("div.regblurb").width()*2)}}g.css({top:i,left:h}).find("#regtxt").html(this.aLoginMessages[f]).end().show();return false};RegisteredGateway.prototype.onResize=function(g){var f=jQuery(window);g.data.layer.css({top:f.scrollTop()+(f.height()/4),left:f.width()/2-(jQuery("div.regblurb").width()*2)})}}jQuery(window).bind("CN.customEvents.pluckRegLayerHide",function(){jQuery("#reglayer").hide()});CN.livefyre=CN.livefyre||{};CN.livefyre.main=(function(c,t,b){var u=b.mostpopularEntries,e=b.mostpopularAge,k=b.lfCookieName,m="amg_user",i=[k,m,"at","amg_user_identity","amg_user_partner","amg_user_record","fyre-livecount"],d=CN.cookie.get(k),r=b.pageConfig,y=b.network,h=new t.conv.RemoteAuthDelegate(),v={encode:false,path:"/",expires:-1},j={encode:false,path:"/",expires:365*300},w=365*300,f=false,x,l,n,q=b.moderatorFlagText||"moderator",p=(typeof RegisteredGateway==="function")?new RegisteredGateway("/user/login","/user/registration"):undefined,g=function(A){var B={moderator:q};if(typeof r==="object"){if(Array.isArray(r)===false){r=[r]}for(var z=0;z<r.length;z++){r[z].XX_UseSeamlessEditor=true}r.disableAvatars=true}if(A&&typeof A.renderCallback==="function"){CN.livefyre.main.renderCallback=A.renderCallback}t.conv.load({network:y,authDelegate:h,strings:B},r,function(C){n=C;v.domain=j.domain="."+CN.site.domain;if(f){CN.livefyre.main.doLivefyreAuth()}else{CN.cookie.del(k,v)}C.on("commentCountUpdated",CN.livefyre.commentCountSyncReplace);C.on("commentPosted",function(){CN.livefyre.main.updateCommenterTags();CN.stats.omniture.trackAction("comment",this,{events:"event22"});c(".fyre-post-to-selected").each(function(){if(c(this).parent().parent().is(".fyre-post-to-facebook")){CN.stats.omniture.trackActionEvar("fbcomment",this,"eVar37","facebook")}else{if(c(this).parent().parent().is(".fyre-post-to-twitter")){CN.stats.omniture.trackActionEvar("fbcomment",this,"eVar37","twitter")}}})});C.on("initialRenderComplete",function(){CN.livefyre.main.doLFLoadInit();CN.livefyre.main.onFocusTracking();if(typeof CN.livefyre.main.renderCallback==="function"){CN.livefyre.main.renderCallback()}});CN.livefyre.main.changeConv=function(D){f=a(m);x=o();if(D){if(typeof D.renderCallback==="function"){CN.livefyre.main.renderCallback=D.renderCallback}C.changeCollection(D.pageConfig)}}});h.login=function(C){l=C;if(!f){if(A&&typeof A.doCustomLightRegLogin==="function"){A.doCustomLightRegLogin()}else{CN.lightReg.showForm("Login")}}else{d=CN.cookie.get(k);CN.cookie.del(k,v);CN.cookie.set(k,d,j);CN.livefyre.main.doLivefyreAuth();return true}};h.logout=function(){var D=jQuery("#"+CN.livefyre.configOptions.pageConfig.el);for(var C=0;C<i.length;C++){CN.cookie.del(i[C],v)}if(D.length!==0){D.append('<iframe id="livefyre_logout_submit" src="/user/logout" onload="window.location.reload();" name="livefyre_logout_submit" width="200" border="0" height="300"></iframe>')}return true};h.editProfile=function(){window.location="/user/update?returnTo="+document.location.href;return true}},a=function(C){var B=C+"=";var z=document.cookie.split(";");for(var A=0;A<z.length;A++){var D=z[A];while(D.charAt(0)===" "){D=D.substring(1,D.length)}if(D.indexOf(B)===0){return true}}return false},o=function(){return CN.url.domain()};return{loadLivefyre:function(z){g(z);return this},setPageConfig:function(z){if(typeof z==="object"){r=z}return this},loader:function(){f=a(m);x=o();if(p){p.init()}return this},onFocusTracking:function(){var z=navigator.userAgent.toLowerCase();setTimeout(function(){if(z.indexOf("msie")!==-1?true:false){c(".fyre-editor-editable").bind("mousedown",function(){CN.stats.omniture.trackAction("commentFocus",this,{events:"event29"})})}else{c(".fyre-editor-editable iframe").contents().bind("click",function(A){CN.stats.omniture.trackAction("commentFocus",this,{events:"event29"})})}},500)},doLivefyreAuth:function(){var A=CN.cookie.get(k);if(A){try{t.conv.login(A);if(l){l.success()}}catch(z){}}},getDelegateObj:function(){return l},getLFWidgetObj:function(){return n},updateCommenterTags:function(){c(".fyre .fyre-comment-author-tag-power_commenter .fyre-comment-username").each(function(){var z=c(this).parent().find(".fyre-power-commenter");if(z.length===0){c(this).after("<span class='fyre-power-commenter'><div class='arrow-pointer'></div>Top Commenter</span>")}});c(".fyre .fyre-comment-author-tag-editorial .fyre-comment-username").each(function(){var z=c(this).parent().find(".fyre-moderator");if(z.length===0){c(this).after("<span class='fyre-user-level fyre-glm-mod-custom fyre-moderator'>"+q+"</span>")}});return this},doLFLoadInit:function(){var z=setInterval(function(){var C=c(".fyre .fyre-comment-count span").html(),D,A=/comment/gi;if(C&&A.test(C)){var B=c(".commentCountValue").eq(0).html();D=C.split(" ");if(D[0]===B){clearInterval(z)}else{c(".commentCountValue").html(D[0])}}},500);CN.livefyre.main.updateCommenterTags();return this}}}(jQuery,fyre,CN.livefyre.configOptions));CN.livefyre.commentCountSyncReplace=function(b){var a=CN.livefyre.commentCountAbbreviate(b);jQuery(".commentCountValue").html(a)};CN.livefyre.commentCountAbbreviate=function(f){var e=f;try{var g=0;if(e>999){g=2}g=Math.pow(10,g);var a=["k","m","b","t"];for(var c=a.length-1;c>=0;c--){var b=Math.pow(10,(c+1)*3);if(b<=e){e=Math.round(e*g/b)/g;e+=a[c];break}}}catch(d){e=f}return e};function getContainer(){var b=this,a=(typeof b.tarDiv==="string"&&b.tarDiv.length>0?(document.getElementById(b.tarDiv)||false):(b.tarDiv.selector?b.tarDiv.get(0):false));return a}function renderToContainer(a){if(getContainer().selector){getContainer().html(a)}else{getContainer().innerHTML=a}}function showContainer(){getContainer().style.display="block";getContainer().className.replace(/\s+(hidden)(?!\S)\s*|^(hidden)(?!\S)/g,"")}function discoveryArticle(a){var b=CN.livefyre.trendingUrl+"&number="+CN.livefyre.mostCommentedEntries;jQuery.ajax({dataType:"jsonp",url:b,success:function(c){a.cbHandler(c.data)}})}function mostCommentedHTML(f,b){var a="",e="",d,c;if(f.title!==null&&f.articleId!=="true"){d=f.title.replace(/^\s+|\s+$/g,"");c="odd";if(b%2===0){c="even"}a+='<li class="row-'+b+" "+c+'">';e=f.url;if(d!==""&&f.url!==""){a+='<a href="'+e+'"> '+decodeURIComponent(d)+"</a>"}a+="</li>"}return a}CN.livefyre.commentCountStyle=function(){LF.CommentCount({replacer:function(a,b){a.innerHTML='<div class="comments-button">Comment'+(b===1?"":"s")+'</div><div class="bubble"> <div class="commentCountValue">'+CN.livefyre.commentCountAbbreviate(b)+'</div><div class="bubble-arrow-border"></div> <div class="bubble-arrow"></div></div>'}})};CN.livefyre.widgets=function(b){var c=this,a=false;c.tarDiv=b};CN.livefyre.widgets.prototype.init=function(){if(!document.domain){document.domain=CN.url.domain()}return this};CN.livefyre.widgets.prototype.discoveryArticle=function(a){discoveryArticle(a)};CN.livefyre.widgets.prototype.mostCommented=function(){var b=this,a={activity:"Commented",resultCount:CN.livefyre.mostCommentedEntries,cbHandler:b.renderCommentedRail,resultAge:CN.livefyre.mostCommentedEntries};discoveryArticle(a)};CN.livefyre.widgets.prototype.renderCommentedRail=function(d){if(getContainer()){var c="<ol>",b=0,a=d.length||0,e;for(b;b<a&&b<CN.livefyre.mostCommentedEntries;b++){e=d[b];e.url=(e.url||"").replace(/https?:\/\/[^\/]*/,"");if(e.title&&/\w+/.test(e.title)){c+=mostCommentedHTML(e,b)}}c+="</ol>";renderToContainer(c);showContainer()}else{return false}};CN.page.config=CN.page.config||{};CN.page.config.slideshowIntroShowCallback=function(a){CN.dart.refresh();CN.stats.omniture.setPaginationValue("intro_show").trackAjaxPage()};CN.page.config.slideshowIntroHideCallback=function(a){CN.dart.refresh();CN.stats.omniture.setPaginationValue("intro_hide").trackAjaxPage()};CN.page.config.slideshowViewLargerCallback=function(b,a){var c=function(){if(b.slides[b.currentSlideIndex].getLabel()==="slide"){b.$el.find(".item").each(function(){if(!this.className.match(/item(A|B)/)){jQuery(this).addClass("item"+CN.schemaParser.getInstance().parse(b.data[b.currentSlideIndex].item).pageType())}})}try{b.$el.find(".item-inner").jScrollPane({scrollbarWidth:14,showArrows:true})}catch(d){}};b.onInterstitialShow.subscribe(function(){var d=CN.config.get("slideshowDartConfig");if(b.slide.getLabel()==="dartinterstitial"){try{CN.dart.call(d.name,d)}catch(f){CN.debug.warn("Tried to perform dart request but failed. Perhaps no interstitial exists")}}});b.onSlideChangeComplete.subscribe(function(){c();if(b.slide.getLabel()==="slide"){CN.stats.omniture.setPaginationValue("slide"+(b.currentSlideIndex+1)).trackAjaxPage()}else{if(b.slide.getLabel()==="domslide"){CN.stats.omniture.setPaginationValue("slideshow_offer").trackAjaxPage()}}});c();jQuery('<div id="slideshow-cm-replay-larger" class="slideshow-replay"><a href="#">Replay</a></div>').insertAfter("#slideshow-cm-replay").click(function(){a.jumpToSlideCommand.execute(1);return false})};CN.page.config.slideshowViewLargerCloseCallback=function(a){jQuery("#slideshow-cm-replay-larger").remove()};CN.site.newyorker.behaviors=function(){var c,f,h,e;c={addRule:function(i){i.each(function(){jQuery(this).append("<div class='hr'></div>")})},adjustMargins:function(k,i,j){var l={};l["margin-"+i]=j;jQuery(k).each(function(){jQuery(this).css(l)})},createLinkDropdowns:function(i){i.each(function(){jQuery(this).find(".feature").each(function(){jQuery(this).find(".links-header").each(function(){jQuery(this).add(jQuery(this).next()).wrapAll('<div class="links-has-dropdown"></div>')});jQuery(this).find(".links-has-dropdown").each(function(){var j=jQuery(this);try{j.find(".links").width(j.width()-22).hide();j.find(".links-header").click(function(){j.find(".links").slideToggle()})}catch(k){CN.debug.info("Creating link dropdowns failed: "+k.message)}})})})},adjustFeatureHeights:function(i){i.each(function(){var j=0,k=145;jQuery(this).find(".feature").each(function(){var l=jQuery(this).height();if(jQuery(this).find("img").length&&jQuery(this).find("img").height()<1){l+=k}if(l>j){j=l}});jQuery(this).find(".feature").each(function(){jQuery(this).height(j)})})},buildFeatureCarousel:function(i){i.each(function(){var j=0;jQuery(this).find(".feature").each(function(){var k=jQuery(this).height();if(k>j){j=k}});jQuery(this).find(".feature").wrapAll('<div class="feature-carousel"><div class="feature-carousel-inner"><div class="feature-container"></div></div></div>').end().find(".feature-carousel").height(j).prepend('<div class="feature-carousel-previous">Previous</div>').append('<div class="feature-carousel-next">Next</div>').find(".feature-carousel-inner").scrollable({items:".feature-container",size:4,nextPage:".feature-carousel-next",prevPage:".feature-carousel-previous"})})},buildFeatureCarouselPaginated:function(j){var i=0;j.each(function(){var q=0;i+=1;jQuery(this).find(".feature").each(function(){var r=jQuery(this).height();if(r>q){q=r}});jQuery(".set18").find(".feature").wrapAll('<div class="feature-carousel"><div class="feature-carousel-inner"><div class="feature-container"></div></div></div>').end().find(".feature-carousel-inner").height(q).scrollable({items:".feature-container",size:4});var l=jQuery(".feature-carousel-inner").data("scrollable");var n=jQuery('<ul class="tab-list" id="tablist'+i+'"></ul>');for(var p=1;p<=l.getPageAmount();p++){var k='<li><a href="#tablist'+i+"stab"+p+'" onclick="javascript:return false;">'+p+"</a></li>";n.append(jQuery(k))}jQuery(".feature-carousel-inner").parent().append(n).end().navigator({navi:"ul#tablist"+i});var o=jQuery('<li class="tab-back disabled">Previous</li>');var m=jQuery('<li class="tab-forward">Next</li>').click(function(r){l.nextPage();r.preventDefault()});l.onSeek(function(){if(l.getPageIndex()<1){o.addClass("disabled");o.unbind("click")}else{if(o.hasClass("disabled")){o.removeClass("disabled");o.bind("click",function(r){l.prevPage();r.preventDefault()})}}if(l.getPageIndex()===(l.getPageAmount()-1)){m.addClass("disabled");m.unbind("click")}else{if(m.hasClass("disabled")){m.removeClass("disabled");m.bind("click",function(r){l.nextPage();r.preventDefault()})}}});n.prepend(o).append(m);n.css("width",40+20*(p-1))})},numberedToggleSetup:function(i){var j=(jQuery.browser.msie)?"standard":"crossfade";i.find(".set5").each(function(){jQuery(this).find(".tab").each(function(){var l=jQuery(this).find(".media")[0],k=jQuery(this).find(".rotator-content")[0],m=this.insertBefore(k,l)})}).end().each(function(){jQuery(this).find(".numbered-toggle").tab((jQuery(this).find(".numbered-toggle").hasClass("has1item"))?{paginate:false}:{fx:{change:j,duration:500},paginate:true,timer:12}).end().find("ul.tab-list").wrap('<div class="tab-list-wrap"></div>')})},rotatorAdSetup:function(i){CN.rotatorAd.init(".rotatorads")},tabsSetup:function(i){try{i.each(function(){jQuery(this).find("div.feature-tabs").tab(CN.page.config.defaultTab||1)})}catch(j){CN.debug.error("Error setting up tabs features. Perhaps the defaultTab index is not 1-based, or the jQuery tab plugin is not available.")}},mostpopularSetup:function(i){i.each(function(){jQuery(this).tab()});CN.most.setDays(1).setCount(5).init()},mostviewedSetup:function(){return(!jQuery(".cnmost-activated").is("div")?(function(){CN.most.setDays(1).setCount(5).init();jQuery("#tab-most-viewed").append('<div id="mostpopular-sponsor-wrapper"><div id="mostpopular-sponsor"><div id="mostpopular-sponsor88x32_frame" class="displayAd"></div></div></div>');jQuery("#tab-most-viewed").addClass("cnmost-activated");CN.dart.call("mostpopular-sponsor",{sz:"88x32",kws:["top"],collapse:true})}()):true)},mostemailedSetup:function(){return(!jQuery(".cnmost-activated").is("div")?(function(){CN.most.setDays(1).setCount(5).init();jQuery("#tab-most-emailed").addClass("cnmost-activated")}()):true)},sandboxSetup:function(m){var n=CN.page.sandbox,l,k=n.length,j={};for(l=0;l<k;l++){CN.debug.info("Sandbox Feature Loaded",[n[l].id,n[l].url]);j={callback:{func:CN.site.newyorker.behaviors.rewriteFrameTarget,params:[n[l].id],scope:CN.site.newyorker.behaviors}};CN.frame.refresh(n[l].id,n[l].url,true,j)}}};f=function(){jQuery.each(CN.page.feature||[],function(){if(this in h){h[this]()}})};e=function(i,j){return jQuery("."+i,j||jQuery("body")).not("."+i+"-initialized").addClass(i+"-initialized")};h={set12:function(i){var j=e("set12",i);c.adjustFeatureHeights(j);c.buildFeatureCarousel(j,4)},numberedtoggle:function(i){c.numberedToggleSetup(e("numberedtoggle",i))},rotatorads:function(i){c.rotatorAdSetup(".rotatorads")},mostpopular:function(i){c.mostpopularSetup(e("most-popular",i))},mostviewed:function(i){c.mostviewedSetup()},mostemailed:function(i){c.mostemailedSetup()},mostcommentedbycriteria:function(i){c.mostcommentedbycriteriaSetup(e("most-commented",i))},tabs:function(i){c.tabsSetup(e("tabs",i))},sandbox:function(i){c.sandboxSetup(e("sandbox",i))},set18:function(i){var j=e("set18",i);c.adjustFeatureHeights(j);c.buildFeatureCarouselPaginated(j)}};function a(){jQuery('form[name="newslettersForm"]').on("submit",function(i){CN.ajaxNewsletters.onFormSubmit(i)});jQuery("#results-search-rail,#query-errorSearch").bind("click",function(){jQuery(this).val("")});jQuery("#submit_rail").bind("click",function(){if(jQuery("#results-search-rail").val()=="Search Web site"){jQuery("#results-search-rail").val("")}});jQuery("li.utility-email").each(function(){if(typeof blogTitle!=="undefined"){jQuery("li.utility-email a").attr("href","/contact/emailFriend?referringPage="+document.location+"&title="+escape(blogTitle))}jQuery(".utilities").css("display","block")});jQuery(".search .feature .w a.type-video, .videooverlay .w a").each(function(){jQuery(this).append(jQuery('<span class="playbutton"></span>'));if(jQuery.browser.msie&&jQuery.browser.version.charAt(0)<7){jQuery(this).css({display:"block",height:jQuery(this).outerHeight()})}})}function b(){if(jQuery.browser.msie&&jQuery.browser.version.substr(0,1)=="7"){jQuery("#position1_yrail > .features:last-child, #position2_yrail > .features:last-child, #position4 .features:last-child, #position5 .features:last-child, #position6 .features:last-child, #urail .features:last-child").css("border-bottom","0px")}if(jQuery("#urail div").length==0){if(jQuery("#position6").length>0){jQuery("#position6").css("border-bottom","1px solid #CCCCCC")}else{jQuery("#position4 > div:last-child","#position5 > div:last-child").css("border-bottom","1px solid #CCCCCC")}}if(jQuery("#urail div").length>0&&jQuery("#content").height()<jQuery("#yrail").height()){jQuery("#urail > div:last-child").css("border-bottom","1px solid #CCCCCC")}}function d(){jQuery(".feature-dartad").each(function(){if(jQuery(this).height()<"10"){jQuery(this).parent(".features").hide()}});if(jQuery.browser.safari){c.adjustMargins(jQuery(".set1 .feature .text"),"top","-2px")}else{if(navigator.userAgent.toLowerCase().indexOf("firefox")!=-1&&navigator.userAgent.toLowerCase().indexOf("windows")!=-1){c.adjustMargins(jQuery(".set1 .feature .text"),"top","-1px")}}jQuery(".set6 .feature").each(function(){if(jQuery(this).find(".header").next().is(".media")&&jQuery(this).find(".header:has(span)").length==0){c.adjustMargins(jQuery(this).find(".media"),"top","14px")}});jQuery(".set9").each(function(){if(jQuery(this).find(".feature").length>1){c.addRule(jQuery(this).find(".feature").not(".last").not(".imagetop"))}});jQuery(".set10").each(function(){if(jQuery(this).find(".feature").length>1){c.addRule(jQuery(this).find(".feature").not(".last"))}});jQuery(".set7 .feature h3.header").each(function(){if(jQuery(this).find("span").length==0){jQuery(this).parent(".feature").find("h3.header + .media").css("margin-top","12px")}});if(jQuery(".search_form").height()==0){jQuery(".search_form").hide()}if(jQuery(".topicFeature .feature").height()<20){jQuery(".topicFeature .feature").hide()}jQuery(".noindent").each(function(){if(jQuery(this).html()=="&nbsp;"){jQuery(this).hide()}});jQuery(".set12-initialized").each(function(){jQuery(this).find(".feature-carousel-inner").height(jQuery(this).find(".feature-carousel").height())})}function g(){jQuery("#search_form_1").submit(function(){var l="",i=CN.search.sanitize(jQuery("#searchinput").val());if(i!==""){var k=jQuery("#search_form_1 select[name=docType]").val(),j=jQuery("#search_form_1 select[name=section]").val();l="/search?query="+encodeURI(i)+"&qt=dismax&sort="+encodeURI("score+desc");if(k!==""){l=l+"&docType="+encodeURI(k)}if(j!==""){l=l+"&section="+encodeURI(j)}document.location=l}return false})}return{init:function(){a();f();b();d();jQuery("#sponsor120x60").bind("load",function(j){var i=jQuery(j.target);i.parents("#sponsorship-ad").addClass((i.height()>5?"has-sponsor":"no-sponsor")).removeClass((i.height()>5?"no-sponsor":"has-sponsor"))}).triggerHandler("load");CN.page.config.socialSharingImage=jQuery(".captionedphoto img, .entry-content img").eq(0).attr("src")||jQuery("#content img:visible").eq(0).attr("src")||jQuery(".slideshow-items img").eq(0).attr("src")||jQuery('meta[property = "og:image"]').attr("content");CN.page.config.stumbleupon={layout:"1"};CN.page.config.tumblr={imageUrl:CN.page.config.socialSharingImage};CN.page.config.pinit={imageURL:CN.page.config.socialSharingImage,countLayout:"horizontal"};jQuery(".show-share-more").click(function(){var i=jQuery(this).siblings(".share-more-container");i.css("display","block");i.find(".share-more-close").click(function(){i.css("display","none")})});CN.site.newyorker.socialmedia.getBlogTumblr().getFBShareCount();CN.site.newyorker.socialmedia.getPinit().getLinkedIn()},rewriteFrameTarget:function(i){var j=jQuery(i)[0].contentWindow.document.body;CN.debug.info("Sandbox Feature Rewriting href target for id: "+i);jQuery(j).find("a").attr("target","_parent")}}}();CN.site.newyorker.socialmedia=function(b){var c=b("#blogs_body .hentry.entry, #blogs .hentry.entry, #blogs-body .hentry.entry"),a=(c.length>0&&!c.hasClass("single"));getURL=function(e){var d=(typeof e.tag==="undefined")?"":(CN.page.config.url.indexOf("?")>-1?"&"+e.tag:"?"+e.tag);return(a)?b(".entry-title a",e.obj.parents(".entry")).attr("href")+d:CN.page.config.url+d},normalizeURLs=function(d){d=jQuery.trim(d);return/^http/.test(d)?d:/^\/\//.test(d)?location.protocol+d:/\//.test(d)?location.protocol+"//"+location.host+d:location.protocol+"//"+location.host+location.pathname+"/"+d+location.search},getTitle=function(d){var e=(a)?b(".entry-title a",d.parents(".entry")).html():CN.page.config.title;return e},getImage=function(e){var d=a?b("img:visible:first",e.parents(".entry")).attr("src")||b('meta[property = "og:image"]').attr("content"):CN.page.config.socialSharingImage;return d?normalizeURLs(d):""},getSocialImage=function(f){var e,d;if(document.getElementById("articleheads")){e=b(".captionedphoto");d=e.find("img")[0].attr("src");return d}if(document.getElementById("blogs")){e=f.parents(".entry").find(".entry-content");d=e.find("img")[0].attr("src");return d}};isScriptIncluded=function(d){var e=false;if(d){b("script").each(function(){if((b(this).attr("src")!==undefined)&&(b(this).attr("src")!==null)&&(b(this).attr("src")!=="")&&((b(this).attr("src")).indexOf(d)!==-1)){e=true}})}return e};return{getTumblr:function(){b(".utilities .utility-tumblr").each(function(){b(this).html('<a target="_blank" href="http://www.tumblr.com/share/photo?source='+encodeURIComponent(getImage(b(this)))+"&caption="+encodeURIComponent(getTitle(b(this)))+"&clickthru="+encodeURIComponent(getURL({obj:b(this)}))+'" title="Share on Tumblr" class="tumblr-share">Share on Tumblr</a>')});b.getScript(document.location.protocol+"//platform.tumblr.com/v1/share.js");return this},getBlogTumblr:function(){b(".more-share-utilities .utility-tumblr").each(function(){b(this).html('<a target="_blank" href="http://www.tumblr.com/share/photo?source='+encodeURIComponent(getImage(b(this)))+"&caption="+encodeURIComponent(getTitle(b(this)))+"&clickthru="+encodeURIComponent(getURL({obj:b(this)}))+'" title="Share on Tumblr" class="tumblr-share">Tumblr</a>')});b.getScript(document.location.protocol+"//platform.tumblr.com/v1/share.js");return this},getStumbleUpon:function(){if(b(".utilities .utility-stumble-upon").length>0){var e,d;CN.page.config.stumbleupon=CN.page.config.stumbleupon||{layout:"1"};b(".utilities .utility-stumble-upon").each(function(){var f=document.createElement("su:badge");f.setAttribute("location",getURL({obj:b(this)}));f.setAttribute("layout",CN.page.config.stumbleupon.layout);b(this).html(f)});if(!isScriptIncluded("//platform.stumbleupon.com/1/widgets.js")){d=document.getElementsByTagName("script")[0];e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="//platform.stumbleupon.com/1/widgets.js";d.parentNode.insertBefore(e,d)}}return this},getRedditShare:function(){if(b(".utilities .utility-reddit-share").length>0){b(".utilities .utility-reddit-share").each(function(){b(this).html('<iframe width="120" scrolling="no" height="22" frameborder="0" src="//www.reddit.com/static/button/button1.html?width=120&url='+encodeURIComponent(getURL({obj:b(this)}))+"&title="+encodeURIComponent(getTitle(b(this)))+'"></iframe>')})}return this},getPinit:function(){var f=b(".utility-pinit");var d;var e=b(".pinit-main").length>0?true:false;if(f.length>0){f.each(function(){d='<a href="http://pinterest.com/pin/create/button/?url='+encodeURIComponent(getURL({obj:b(this)}))+"&media="+encodeURIComponent(getImage(b(this)))+"&description="+getTitle(b(this))+'" count-layout="none" target="_blank" onclick="CN.site.newyorker.socialmedia.popupLinkedIn(event)">';if(e){d+="&nbsp;"}else{d+="Pin It"}d+="</a>";b(this).html(d)})}return this},getLinkedIn:function(){var e=b(".utility-linkedIn");var f;var d=b(".linkedIn-main").length>0?true:false;if(e.length>0){e.each(function(){f='<a href="http://www.linkedin.com/shareArticle?mini=true&amp;url='+encodeURIComponent(getURL({obj:b(this)}))+"&source=nyr&media="+encodeURIComponent(getImage(b(this)))+"&summary="+getTitle(b(this))+'"  target="_blank" onclick="CN.site.newyorker.socialmedia.popupLinkedIn(event)">';if(d){f+="&nbsp;"}else{f+="Linked In"}f+="</a>";b(this).html(f)})}return this},getFbRecommend:function(){if(b(".utilities .utility-fb-recommend").length>0){var e={send:"false",layout:"button_count",width:"450",showFaces:"true",action:"recommend",colorScheme:"light",height:21},d=b.extend({},e,CN.page.config.facebook.recommend);b(".utilities .utility-fb-recommend").each(function(){b(this).html('<iframe src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(getURL({obj:b(this)}))+"&amp;send="+d.send+"&amp;layout="+d.layout+"&amp;width="+d.width+"&amp;show_faces="+d.showFaces+"&amp;action="+d.action+"&amp;colorscheme="+d.colorScheme+"&amp;font&amp;height="+d.height+'" scrolling="no" frameborder="0" allowTransparency="true"></iframe>')})}return this},getFBShareCount:function(){if(b(".utility-fb-recommend").length>0){var d=b(".utility-fb-recommend");d.each(function(){var f=b(this).find("a"),e=encodeURIComponent(f.attr("href").split("?u=")[1]);b.getJSON("http://graph.facebook.com/?id="+e+"&callback=?",function(h){var g=h.shares;if(g===undefined){g=0}if(g>1000000){g=Math.floor(g/1000000*10)/10+"M"}else{if(g>1000){g=Math.floor(g/1000*10)/10+"K"}}f.html('<div class="fb-share-count"><span>'+g+"</div>")})})}return this},popupReddit:function(f){f.preventDefault();var d=window.open(f.target.href,"ShareOnReddit","resizable=yes,scroll=yes,width=875,height=600")},popupFacebook:function(f){f.preventDefault();var d=window.open(f.target.href,"ShareOnFacebook","resizable=yes,scroll=yes,width=800,height=400")},popupLinkedIn:function(f){f.preventDefault();var d=window.open(f.target.href,"ShareOnLinkedIn","resizable=yes,scroll=yes,width=800,height=400")},popupPinit:function(f){f.preventDefault();var d=window.open(f.target.href,"ShareOnPinit","resizable=yes,scroll=yes,width=800,height=600")},popupReddit:function(f){f.preventDefault();var d=window.open(f.target.href,"ShareOnReddit","resizable=yes,scroll=yes,width=800,height=600")},normalizeURLs:function(d){return normalizeURLs(d)}}}(jQuery);jQuery(function(){CN.site.newyorker.behaviors.init()});CN.schemaParser=CN.schemaParser||{};CN.schemaParser.templates={baseItem:function(b,d){try{b.photo[d]()}catch(c){d="main"}var a="";a+='<div class="item">';if(b.photo){a+='<div class="captioned-photo"><div class="w">';if(b.photo.url()){a+='<a href="'+b.photo.url()+'">'}a+='<img src="'+b.photo[d]()+'" alt="'+(b.photo.alt()||"")+'" />';if(b.photo.url()){a+="</a>"}a+="</div>";if(b.photo.caption()){a+='<p class="caption">'+b.photo.caption()+"</p>"}a+="</div>"}if(b.rubric||b.header||b.subHeaders||(b.body&&b.body().length>0)||b.embeddedList||(b.contributors&&b.contributors()!=='<div class="contributors"><p><span class="contributor"></span></p></div>')||b.photoCredits||b.footerText||b.footerLegalCopy){a+='<div class="item-inner">';a+='<div class="item-header">';a+=b.rubric?'<h5 class="rubric">'+b.rubric()+"</h5>":"";a+=b.header?'<h3 class="content-headline">'+b.header()+"</h3>":"";a+=b.subHeaders?'<h4 class="sub-header">'+b.subHeaders()+"</h4>":"";a+="</div>";a+='<div class="item-text">';a+=b.body&&b.body().length>0?'<div class="body">'+b.body()+"</div>":"";a+=b.embeddedList?b.embeddedList():"";a+=b.contributors?'<div class="byline">'+b.contributors()+"</div>":"";a+=b.photoCredits?'<cite class="photo-credits">'+b.photoCredits()+"</cite>":"";a+=b.footerText||b.footerLegalCopy?'<div class="footer">':"";a+=b.footerText?'<div class="text">'+b.footerText()+"</div>":"";a+=b.footerLegalCopy?'<div class="legal">'+b.footerLegalCopy()+"</div>":"";a+=b.footerText||b.footerLegalCopy?"</div>":"";a+="</div>";a+=b.filePath?b.filePath():"";a+="</div>"}a+="</div>";return a},item:function(b){var a=this.baseItem(b,"main");return a},enlargedItem:function(b){var a=this.baseItem(b,"enlargedImage");return a}};CN.config.set({slideshowDartConfig:{name:"slideshowInterstitial",sz:"300x250",kws:["interstitial","top"],store:false,ssready:false}});if(jQuery("body").hasClass("listC")&&jQuery("#items-container").length&&!CN.url.params().showall){CN.slideshow.config.countSeparator=" of ";CN.slideshow.config.continueNote="Slide show will continue in ";CN.slideshow.config.backToIntroBtn="Back to slide show intro";CN.slideshow.config.viewSlideshowBtn="View Slide Show";(function(e){var b,d,c,a=[];if(CN.page.config.viewLarger){a.push("viewlarger")}jQuery("#items-container").slideshow({transition:"photoflash",showInterstitialTimer:5,playTimer:5,useIntro:true,useHistory:true,usePhotoSchema:true,plugins:a});d=jQuery("#items-container").slideshow();c=d.slideshow;c.onSlideshowReady.subscribe(function(){jQuery(".slideshow-loading").fadeOut("slow");jQuery(".slideshow-loading-message").fadeOut("slow",function(){jQuery(this).remove()})});jQuery("#slideshow-cm-replay").click(function(){d.commands.jumpToSlideCommand.execute(1);return false});jQuery("#slideshow-cm-subsoffer a").click(function(){window.open(this.href);return false});jQuery("#items-container .viewlarger a").bind("click",function(){CN.stats.omniture.setPaginationValue("slideshow_enlarge").trackAjaxPage()});b=function(){if(c.slide.getLabel()==="slide"){c.$el.find(".item").each(function(){if(jQuery(this).find(".item-inner").length<1){jQuery(this).addClass("itemC")}else{if(!this.className.match(/item(A|B)/)){jQuery(this).addClass("item"+CN.schemaParser.getInstance().parse(c.data[c.currentSlideIndex].item).pageType())}}});CN.stats.omniture.setPaginationValue("slide"+(c.currentSlideIndex+1)).trackAjaxPage()}else{if(c.slide.getLabel()==="domslide"){CN.stats.omniture.setPaginationValue("slideshow_offer").trackAjaxPage()}}};c.onForwardComplete.subscribe(function(){b()});c.onBackwardComplete.subscribe(function(){b()});c.onJumpToSlideComplete.subscribe(function(){b()});c.onSlideChangeComplete.subscribe(function(){CN.dart.refresh()});c.onInterstitialShow.subscribe(function(){var f;CN.dart.refresh();if(c.slide.getLabel()==="dartinterstitial"){f=CN.config.get("slideshowDartConfig");try{CN.dart.call(f.name,f);CN.stats.omniture.setPaginationValue("slideshow_ad").trackAjaxPage()}catch(g){CN.debug.log("Tried to perform dart request but failed. Perhaps no interstitial exists")}}});c.onSlideshowReady.subscribe(function(){CN.slideshow.api.addSlide("slideshow-cm-container",{slideType:"DomSlide",slideshow:c});if(c.navigationItems.navigationViewAll){c.navigationItems.navigationViewAll.onShow.subscribe(function(){CN.stats.omniture.setPaginationValue("slideshow_viewthumb").trackAjaxPage()})}if(jQuery("html").hasClass("slideshow-showinitial-true")){b()}})})(jQuery)}jQuery(document).ready(function(){if(document.getElementById("top_social_network_links")!==null){if(jQuery.browser.msie&&jQuery.browser.version.charAt(0)==8){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("async","");a.setAttribute("id","gplus-script1");a.setAttribute("src","http://apis.google.com/js/plusone.js");a.setAttribute("gapi_processed","true");document.getElementsByTagName("body")[0].appendChild(a)}jQuery("ul.utilities.utilities-fblike-twitter").addClass("hide-utilities");setTimeout("jQuery('#top_social_network_links').prependTo('div.description p:last');jQuery('ul.utilities.utilities-fblike-twitter').removeClass('hide-utilities');",6000)}if(jQuery.browser.msie&&jQuery.browser.version.charAt(0)<8){jQuery(".utility-gplusone").addClass("ie7-hide-googleplus")}});CN.userNav={};CN.userNav.setLoggedIn=function(){if(CN.user.isLoggedIn()){jQuery("#ui").html('Welcome, <span id="opts"><span>'+CN.user.username()+'</span> &#124; <a href="/user'+splitreg+'/logout" class="first">Logout</a> &#124; <a href="/magazine'+splitreg+'/registration?intcid=registration_help">Help</a> &#124; <a href="/user'+splitreg+'/update">Profile</a></span>')}};jQuery(document).ready(function(){window.pageTracker._trackEvent=window.pageTracker._trackEvent||[];window.optimizely=window.optimizely||[];var d=document.getElementById("newsletter-email");if(d){if((jQuery(d).val()).replace(/^\s+|\s+$/g,"")===""){jQuery(d).val("Newsletter sign-up: Enter e-mail address")}jQuery(d).on("focusin",function(f){window.optimizely.push("trackEvent","email field focus right");window.pageTracker._trackEvent("newsletter","email field focus","right rail",0,false);if((jQuery(this).val()).replace(/^\s+|\s+$/g,"")==="Newsletter sign-up: Enter e-mail address"){jQuery(this).val("");jQuery("#newsletter-form .collapse, #newsletter-form div#newsletter-disclaimer").show(400)}}).blur(function(){if((jQuery(this).val()).replace(/^\s+|\s+$/g,"")===""){jQuery(this).val("Newsletter sign-up: Enter e-mail address")}});jQuery("#newsletter-form .collapse input:checkbox").attr("checked","checked")}var a=document.getElementById("newsletter-email-content");if(a){var c=jQuery(a),b=jQuery(".content-well-newsletter");if((c.val()).replace(/^\s+|\s+$/g,"")===""){c.val("Newsletter sign-up: Enter e-mail address")}c.on("focusin",function(f){window.optimizely.push(["trackEvent","email field focus below"]);window.pageTracker._trackEvent("newsletter","email field focus","below blog",0,false);if((jQuery(this).val()).replace(/^\s+|\s+$/g,"")==="Newsletter sign-up: Enter e-mail address"){jQuery(this).val("");b.find(".collapse").show(400)}}).blur(function(){if((jQuery(this).val()).replace(/^\s+|\s+$/g,"")===""){jQuery(this).val("Newsletter sign-up: Enter e-mail address")}});b.find(".collapse input:checkbox").attr("checked","checked")}});jQuery(document).ready(function(a){a("#social li").hover(function(){var b=a(this).attr("id");a(this).stop().animate({height:"28px"},100)},function(){a(this).stop().animate({height:"22px"},100)});jQuery(".tab-list li:last-child").addClass("last-child")});jQuery(document).ready(function(){var c=jQuery(".item"),a=c.find(".item-text");if(a.length){if(!jQuery.trim(jQuery(a).text()).length){c.addClass("itemC")}}var b=jQuery("#ps1_fs1_features-tab-3 ul").html();jQuery("#ps1_fs1_features-tab-3 .blurb").append('<div id="this-issue"><ol>'+b+"</ol></div>");jQuery("#ps1_fs1_features-tab-3 ul").hide()});jQuery(function(){if(jQuery("#livefyre").length!==0){CN.livefyre.main.loader().loadLivefyre()}if(jQuery(".livefyre-commentcount").length!==0){CN.livefyre.commentCountStyle()}if(jQuery("#commented").length!==0){CN.livefyre.mostCommented=new CN.livefyre.widgets("commented");CN.livefyre.mostCommented.init();CN.livefyre.mostCommented.mostCommented()}});